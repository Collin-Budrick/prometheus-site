@layer components {
  .settings-panel {
    margin-top: 18px;
    display: grid;
    gap: 16px;
    padding: 18px;
    border-radius: 20px;
    border: 1px solid rgb(var(--stroke) / 0.65);
    background:
      radial-gradient(
        circle at 10% 0%,
        rgb(var(--signal) / 0.12),
        transparent 55%
      ),
      rgb(var(--surface) / 0.85);
  }

  .settings-panel-header {
    display: grid;
    gap: 6px;
  }

  .settings-panel-title {
    font-size: 11px;
    font-family: var(--font-mono);
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: rgb(var(--muted-soft));
  }

  .settings-panel-description {
    margin: 0;
    font-size: 0.92rem;
    color: rgb(var(--muted));
  }

  .settings-toggle-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 12px 0 0;
    border-top: 1px solid rgb(var(--stroke) / 0.6);
  }

  .settings-toggle-row:first-of-type {
    border-top: none;
    padding-top: 0;
  }

  .settings-toggle-label {
    display: grid;
    gap: 4px;
  }

  .settings-toggle-title {
    font-size: 0.95rem;
    color: rgb(var(--ink));
  }

  .settings-toggle-hint {
    font-size: 0.78rem;
    color: rgb(var(--muted));
  }

  .settings-action-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 12px 0 0;
    border-top: 1px solid rgb(var(--stroke) / 0.6);
  }

  .settings-action-label {
    display: grid;
    gap: 4px;
  }

  .settings-action-button {
    border-radius: 999px;
    border: 1px solid rgb(var(--stroke) / 0.7);
    background: rgb(var(--surface) / 0.8);
    padding: 6px 14px;
    font-size: 12px;
    color: rgb(var(--ink));
    cursor: pointer;
    transition:
      border-color 180ms ease,
      transform 180ms ease,
      box-shadow 180ms ease;
  }

  .settings-action-button:hover {
    border-color: rgb(var(--accent) / 0.7);
    box-shadow: 0 8px 18px rgb(var(--accent) / 0.18);
    transform: translateY(-1px);
  }

  .settings-invite-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    padding: 12px 0 0;
    border-top: 1px solid rgb(var(--stroke) / 0.6);
  }

  .settings-invite-label {
    display: grid;
    gap: 4px;
  }

  .settings-invite-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .settings-invite-code {
    width: 100%;
    min-height: 88px;
    resize: vertical;
    border-radius: 14px;
    border: 1px solid rgb(var(--stroke));
    background: rgb(var(--surface));
    color: rgb(var(--ink));
    padding: 12px 14px;
    font-size: 12px;
    font-family: var(--font-mono);
  }

  .settings-invite-code:focus {
    outline: none;
    border-color: rgb(var(--stroke-strong));
  }

  .chat-settings-toggle {
    --chat-toggle-shift: 26px;
    width: 52px;
    height: 28px;
    border-radius: 999px;
    border: 1px solid rgb(var(--stroke));
    background: rgb(var(--surface));
    padding: 3px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition:
      border-color 180ms ease,
      box-shadow 180ms ease,
      transform 180ms ease;
  }

  .chat-settings-toggle:focus-visible {
    outline: 2px solid rgb(var(--signal));
    outline-offset: 3px;
  }

  .chat-settings-toggle:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .chat-settings-toggle-track {
    width: 100%;
    height: 100%;
    border-radius: 999px;
    background: linear-gradient(
      135deg,
      rgb(var(--surface-soft)),
      rgb(var(--surface))
    );
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 2px;
    transition: background 180ms ease;
  }

  .chat-settings-toggle-knob {
    width: 16px;
    height: 16px;
    border-radius: 999px;
    background: rgb(var(--muted));
    box-shadow: inset 0 0 0 1px rgb(var(--stroke));
    transform: translateX(0);
    transition:
      transform 180ms ease,
      background 180ms ease,
      box-shadow 180ms ease;
  }

  .chat-settings-toggle[data-active="true"] {
    border-color: rgb(var(--signal) / 0.6);
    box-shadow: 0 10px 20px rgb(var(--signal) / 0.2);
  }

  .chat-settings-toggle[data-active="true"] .chat-settings-toggle-track {
    background: linear-gradient(
      135deg,
      rgb(var(--signal) / 0.35),
      rgb(var(--accent) / 0.35)
    );
  }

  .chat-settings-toggle[data-active="true"] .chat-settings-toggle-knob {
    transform: translateX(var(--chat-toggle-shift));
    background: rgb(var(--signal-strong));
    box-shadow: 0 0 12px rgb(var(--signal) / 0.45);
  }

  @media (prefers-reduced-motion: reduce) {
    .chat-settings-toggle,
    .chat-settings-toggle-track,
    .chat-settings-toggle-knob {
      transition: none;
    }
  }
}
