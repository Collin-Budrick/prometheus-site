/*!
 * ONNX Runtime Web v1.24.0-dev.20251116-b39e144322
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
var Yt=Object.defineProperty;var Xs=Object.getOwnPropertyDescriptor;var Zs=Object.getOwnPropertyNames;var Qs=Object.prototype.hasOwnProperty;var Jt=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,s)=>(typeof require<"u"?require:t)[s]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var F=(n,t)=>()=>(n&&(t=n(n=0)),t);var it=(n,t)=>{for(var s in t)Yt(n,s,{get:t[s],enumerable:!0})},Ks=(n,t,s,f)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Zs(t))!Qs.call(n,o)&&o!==s&&Yt(n,o,{get:()=>t[o],enumerable:!(f=Xs(t,o))||f.enumerable});return n};var qt=n=>Ks(Yt({},"__esModule",{value:!0}),n);var ut,Le,Je,ea,pr,Xt=F(()=>{"use strict";ut=new Map,Le=[],Je=(n,t,s)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let f=ut.get(n);if(f===void 0)ut.set(n,{backend:t,priority:s});else{if(f.priority>s)return;if(f.priority===s&&f.backend!==t)throw new Error(`cannot register backend "${n}" using priority ${s}`)}if(s>=0){let o=Le.indexOf(n);o!==-1&&Le.splice(o,1);for(let d=0;d<Le.length;d++)if(ut.get(Le[d]).priority<=s){Le.splice(d,0,n);return}Le.push(n)}return}throw new TypeError("not a valid backend")},ea=async n=>{let t=ut.get(n);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let s=!!t.initPromise;try{return s||(t.initPromise=t.backend.init(n)),await t.initPromise,t.initialized=!0,t.backend}catch(f){return s||(t.error=`${f}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},pr=async n=>{let t=n.executionProviders||[],s=t.map(p=>typeof p=="string"?p:p.name),f=s.length===0?Le:s,o,d=[],c=new Set;for(let p of f){let h=await ea(p);typeof h=="string"?d.push({name:p,err:h}):(o||(o=h),o===h&&c.add(p))}if(!o)throw new Error(`no available backend found. ERR: ${d.map(p=>`[${p.name}] ${p.err}`).join(", ")}`);for(let{name:p,err:h}of d)s.includes(p)&&console.warn(`removing requested execution provider "${p}" from session options because it is not available: ${h}`);let l=t.filter(p=>c.has(typeof p=="string"?p:p.name));return[o,new Proxy(n,{get:(p,h)=>h==="executionProviders"?l:Reflect.get(p,h)})]}});var mr=F(()=>{"use strict";Xt()});var hr,wr=F(()=>{"use strict";hr="1.24.0-dev.20251116-b39e144322"});var br,X,Zt=F(()=>{"use strict";wr();br="warning",X={wasm:{},webgl:{},webgpu:{},versions:{common:hr},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);br=n}},get logLevel(){return br}};Object.defineProperty(X,"logLevel",{enumerable:!0})});var z,yr=F(()=>{"use strict";Zt();z=X});var gr,Er,Tr=F(()=>{"use strict";gr=(n,t)=>{let s=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);s.width=n.dims[3],s.height=n.dims[2];let f=s.getContext("2d");if(f!=null){let o,d;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=n.dims[2],d=n.dims[3]):(o=n.dims[3],d=n.dims[2]);let c=t?.format!==void 0?t.format:"RGB",l=t?.norm,p,h;l===void 0||l.mean===void 0?p=[255,255,255,255]:typeof l.mean=="number"?p=[l.mean,l.mean,l.mean,l.mean]:(p=[l.mean[0],l.mean[1],l.mean[2],0],l.mean[3]!==void 0&&(p[3]=l.mean[3])),l===void 0||l.bias===void 0?h=[0,0,0,0]:typeof l.bias=="number"?h=[l.bias,l.bias,l.bias,l.bias]:(h=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(h[3]=l.bias[3]));let g=d*o,w=0,y=g,T=g*2,O=-1;c==="RGBA"?(w=0,y=g,T=g*2,O=g*3):c==="RGB"?(w=0,y=g,T=g*2):c==="RBG"&&(w=0,T=g,y=g*2);for(let D=0;D<d;D++)for(let W=0;W<o;W++){let A=(n.data[w++]-h[0])*p[0],I=(n.data[y++]-h[1])*p[1],H=(n.data[T++]-h[2])*p[2],x=O===-1?255:(n.data[O++]-h[3])*p[3];f.fillStyle="rgba("+A+","+I+","+H+","+x+")",f.fillRect(W,D,1,1)}if("toDataURL"in s)return s.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Er=(n,t)=>{let s=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),f;if(s!=null){let o,d,c;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=n.dims[2],d=n.dims[1],c=n.dims[3]):(o=n.dims[3],d=n.dims[2],c=n.dims[1]);let l=t!==void 0&&t.format!==void 0?t.format:"RGB",p=t?.norm,h,g;p===void 0||p.mean===void 0?h=[255,255,255,255]:typeof p.mean=="number"?h=[p.mean,p.mean,p.mean,p.mean]:(h=[p.mean[0],p.mean[1],p.mean[2],255],p.mean[3]!==void 0&&(h[3]=p.mean[3])),p===void 0||p.bias===void 0?g=[0,0,0,0]:typeof p.bias=="number"?g=[p.bias,p.bias,p.bias,p.bias]:(g=[p.bias[0],p.bias[1],p.bias[2],0],p.bias[3]!==void 0&&(g[3]=p.bias[3]));let w=d*o;if(t!==void 0&&(t.format!==void 0&&c===4&&t.format!=="RGBA"||c===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let y=4,T=0,O=1,D=2,W=3,A=0,I=w,H=w*2,x=-1;l==="RGBA"?(A=0,I=w,H=w*2,x=w*3):l==="RGB"?(A=0,I=w,H=w*2):l==="RBG"&&(A=0,H=w,I=w*2),f=s.createImageData(o,d);for(let P=0;P<d*o;T+=y,O+=y,D+=y,W+=y,P++)f.data[T]=(n.data[A++]-g[0])*h[0],f.data[O]=(n.data[I++]-g[1])*h[1],f.data[D]=(n.data[H++]-g[2])*h[2],f.data[W]=x===-1?255:(n.data[x++]-g[3])*h[3]}else throw new Error("Can not access image data");return f}});var Qt,Sr,vr,Or,Ar,Ir,Br=F(()=>{"use strict";ft();Qt=(n,t)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:s,width:f}=t,o=t.norm??{mean:255,bias:0},d,c;typeof o.mean=="number"?d=[o.mean,o.mean,o.mean,o.mean]:d=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?c=[o.bias,o.bias,o.bias,o.bias]:c=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let l=t.format!==void 0?t.format:"RGBA",p=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",h=s*f,g=p==="RGBA"?new Float32Array(h*4):new Float32Array(h*3),w=4,y=0,T=1,O=2,D=3,W=0,A=h,I=h*2,H=-1;l==="RGB"&&(w=3,y=0,T=1,O=2,D=-1),p==="RGBA"?H=h*3:p==="RBG"?(W=0,I=h,A=h*2):p==="BGR"&&(I=0,A=h,W=h*2);for(let P=0;P<h;P++,y+=w,O+=w,T+=w,D+=w)g[W++]=(n[y]+c[0])/d[0],g[A++]=(n[T]+c[1])/d[1],g[I++]=(n[O]+c[2])/d[2],H!==-1&&D!==-1&&(g[H++]=(n[D]+c[3])/d[3]);return p==="RGBA"?new K("float32",g,[1,4,s,f]):new K("float32",g,[1,3,s,f])},Sr=async(n,t)=>{let s=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,f=typeof ImageData<"u"&&n instanceof ImageData,o=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,d=typeof n=="string",c,l=t??{},p=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},h=g=>typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||g instanceof OffscreenCanvas?g.getContext("2d"):null;if(s){let g=p();g.width=n.width,g.height=n.height;let w=h(g);if(w!=null){let y=n.height,T=n.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(y=t.resizedHeight,T=t.resizedWidth),t!==void 0){if(l=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");l.tensorFormat="RGBA",l.height=y,l.width=T}else l.tensorFormat="RGBA",l.height=y,l.width=T;w.drawImage(n,0,0),c=w.getImageData(0,0,T,y).data}else throw new Error("Can not access image data")}else if(f){let g,w;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(g=t.resizedHeight,w=t.resizedWidth):(g=n.height,w=n.width),t!==void 0&&(l=t),l.format="RGBA",l.height=g,l.width=w,t!==void 0){let y=p();y.width=w,y.height=g;let T=h(y);if(T!=null)T.putImageData(n,0,0),c=T.getImageData(0,0,w,g).data;else throw new Error("Can not access image data")}else c=n.data}else if(o){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let g=p();g.width=n.width,g.height=n.height;let w=h(g);if(w!=null){let y=n.height,T=n.width;return w.drawImage(n,0,0,T,y),c=w.getImageData(0,0,T,y).data,l.height=y,l.width=T,Qt(c,l)}else throw new Error("Can not access image data")}else{if(d)return new Promise((g,w)=>{let y=p(),T=h(y);if(!n||!T)return w();let O=new Image;O.crossOrigin="Anonymous",O.src=n,O.onload=()=>{y.width=O.width,y.height=O.height,T.drawImage(O,0,0,y.width,y.height);let D=T.getImageData(0,0,y.width,y.height);l.height=y.height,l.width=y.width,g(Qt(D.data,l))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(c!==void 0)return Qt(c,l);throw new Error("Input data provided is not supported - aborted tensor creation")},vr=(n,t)=>{let{width:s,height:f,download:o,dispose:d}=t,c=[1,f,s,4];return new K({location:"texture",type:"float32",texture:n,dims:c,download:o,dispose:d})},Or=(n,t)=>{let{dataType:s,dims:f,download:o,dispose:d}=t;return new K({location:"gpu-buffer",type:s??"float32",gpuBuffer:n,dims:f,download:o,dispose:d})},Ar=(n,t)=>{let{dataType:s,dims:f,download:o,dispose:d}=t;return new K({location:"ml-tensor",type:s??"float32",mlTensor:n,dims:f,download:o,dispose:d})},Ir=(n,t,s)=>new K({location:"cpu-pinned",type:n,data:t,dims:s??[t.length]})});var Pe,qe,Lr,Pr,_r=F(()=>{"use strict";Pe=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),qe=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Lr=!1,Pr=()=>{if(!Lr){Lr=!0;let n=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,s=globalThis.Float16Array,f=typeof s<"u"&&s.from;n&&(Pe.set("int64",BigInt64Array),qe.set(BigInt64Array,"int64")),t&&(Pe.set("uint64",BigUint64Array),qe.set(BigUint64Array,"uint64")),f?(Pe.set("float16",s),qe.set(s,"float16")):Pe.set("float16",Uint16Array)}}});var Dr,Ur,xr=F(()=>{"use strict";ft();Dr=n=>{let t=1;for(let s=0;s<n.length;s++){let f=n[s];if(typeof f!="number"||!Number.isSafeInteger(f))throw new TypeError(`dims[${s}] must be an integer, got: ${f}`);if(f<0)throw new RangeError(`dims[${s}] must be a non-negative integer, got: ${f}`);t*=f}return t},Ur=(n,t)=>{switch(n.location){case"cpu":return new K(n.type,n.data,t);case"cpu-pinned":return new K({location:"cpu-pinned",data:n.data,type:n.type,dims:t});case"texture":return new K({location:"texture",texture:n.texture,type:n.type,dims:t});case"gpu-buffer":return new K({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:t});case"ml-tensor":return new K({location:"ml-tensor",mlTensor:n.mlTensor,type:n.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var K,ft=F(()=>{"use strict";Tr();Br();_r();xr();K=class{constructor(t,s,f){Pr();let o,d;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,o=t.type,d=t.dims,t.location){case"cpu-pinned":{let l=Pe.get(o);if(!l)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(t.data instanceof l))throw new TypeError(`buffer should be of type ${l.name}`);this.cpuData=t.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint64"&&o!=="int8"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let l,p;if(typeof t=="string")if(o=t,p=f,t==="string"){if(!Array.isArray(s))throw new TypeError("A string tensor's data must be a string array.");l=s}else{let h=Pe.get(t);if(h===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(s)){if(t==="float16"&&h===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${h.name} as data.`);t==="uint64"||t==="int64"?l=h.from(s,BigInt):l=h.from(s)}else if(s instanceof h)l=s;else if(s instanceof Uint8ClampedArray)if(t==="uint8")l=Uint8Array.from(s);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&s instanceof Uint16Array&&h!==Uint16Array)l=new globalThis.Float16Array(s.buffer,s.byteOffset,s.length);else throw new TypeError(`A ${o} tensor's data must be type of ${h}`)}else if(p=s,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let h=typeof t[0];if(h==="string")o="string",l=t;else if(h==="boolean")o="bool",l=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${h}.`)}else if(t instanceof Uint8ClampedArray)o="uint8",l=Uint8Array.from(t);else{let h=qe.get(t.constructor);if(h===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);o=h,l=t}if(p===void 0)p=[l.length];else if(!Array.isArray(p))throw new TypeError("A tensor's dims must be a number array");d=p,this.cpuData=l,this.dataLocation="cpu"}let c=Dr(d);if(this.cpuData&&c!==this.cpuData.length&&!((o==="uint4"||o==="int4")&&Math.ceil(c/2)===this.cpuData.length))throw new Error(`Tensor's size(${c}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=d,this.size=c}static async fromImage(t,s){return Sr(t,s)}static fromTexture(t,s){return vr(t,s)}static fromGpuBuffer(t,s){return Or(t,s)}static fromMLTensor(t,s){return Ar(t,s)}static fromPinnedBuffer(t,s,f){return Ir(t,s,f)}toDataURL(t){return gr(this,t)}toImageData(t){return Er(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let s=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=s,t&&this.disposer&&(this.disposer(),this.disposer=void 0),s}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Ur(this,t)}}});var de,Kt=F(()=>{"use strict";ft();de=K});var Mr,Cr,_e,De,Ue,xe,en=F(()=>{"use strict";Zt();Mr=(n,t)=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||console.timeStamp(`${n}::ORT::${t}`)},Cr=(n,t)=>{let s=new Error().stack?.split(/\r\n|\r|\n/g)||[],f=!1;for(let o=0;o<s.length;o++){if(f&&!s[o].includes("TRACE_FUNC")){let d=`FUNC_${n}::${s[o].trim().split(" ")[1]}`;t&&(d+=`::${t}`),Mr("CPU",d);return}s[o].includes("TRACE_FUNC")&&(f=!0)}},_e=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||Cr("BEGIN",n)},De=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||Cr("END",n)},Ue=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||console.time(`ORT::${n}`)},xe=n=>{(typeof X.trace>"u"?!X.wasm.trace:!X.trace)||console.timeEnd(`ORT::${n}`)}});var ct,Rr=F(()=>{"use strict";Xt();Kt();en();ct=class n{constructor(t){this.handler=t}async run(t,s,f){_e(),Ue("InferenceSession.run");let o={},d={};if(typeof t!="object"||t===null||t instanceof de||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let c=!0;if(typeof s=="object"){if(s===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(s instanceof de)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(s)){if(s.length===0)throw new TypeError("'fetches' cannot be an empty array.");c=!1;for(let h of s){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);o[h]=null}if(typeof f=="object"&&f!==null)d=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,g=Object.getOwnPropertyNames(s);for(let w of this.outputNames)if(g.indexOf(w)!==-1){let y=s[w];(y===null||y instanceof de)&&(h=!0,c=!1,o[w]=y)}if(h){if(typeof f=="object"&&f!==null)d=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else d=s}}else if(typeof s<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of this.inputNames)if(typeof t[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(c)for(let h of this.outputNames)o[h]=null;let l=await this.handler.run(t,o,d),p={};for(let h in l)if(Object.hasOwnProperty.call(l,h)){let g=l[h];g instanceof de?p[h]=g:p[h]=new de(g.type,g.data,g.dims)}return xe("InferenceSession.run"),De(),p}async release(){return this.handler.dispose()}static async create(t,s,f,o){_e(),Ue("InferenceSession.create");let d,c={};if(typeof t=="string"){if(d=t,typeof s=="object"&&s!==null)c=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(d=t,typeof s=="object"&&s!==null)c=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let g=t,w=0,y=t.byteLength;if(typeof s=="object"&&s!==null)c=s;else if(typeof s=="number"){if(w=s,!Number.isSafeInteger(w))throw new RangeError("'byteOffset' must be an integer.");if(w<0||w>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(y=t.byteLength-w,typeof f=="number"){if(y=f,!Number.isSafeInteger(y))throw new RangeError("'byteLength' must be an integer.");if(y<=0||w+y>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-w}].`);if(typeof o=="object"&&o!==null)c=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof f<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof s<"u")throw new TypeError("'options' must be an object.");d=new Uint8Array(g,w,y)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[l,p]=await pr(c),h=await l.createInferenceSessionHandler(d,p);return xe("InferenceSession.create"),De(),new n(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}});var ta,Fr=F(()=>{"use strict";Rr();ta=ct});var Nr=F(()=>{"use strict"});var kr=F(()=>{"use strict"});var Wr=F(()=>{"use strict"});var Gr=F(()=>{"use strict"});var tn={};it(tn,{InferenceSession:()=>ta,TRACE:()=>Mr,TRACE_EVENT_BEGIN:()=>Ue,TRACE_EVENT_END:()=>xe,TRACE_FUNC_BEGIN:()=>_e,TRACE_FUNC_END:()=>De,Tensor:()=>de,env:()=>z,registerBackend:()=>Je});var Oe=F(()=>{"use strict";mr();yr();Fr();Kt();Nr();kr();en();Wr();Gr()});var lt=F(()=>{"use strict"});var jr={};it(jr,{default:()=>na});var zr,Hr,na,Vr=F(()=>{"use strict";nn();Me();dt();zr="ort-wasm-proxy-worker",Hr=globalThis.self?.name===zr;Hr&&(self.onmessage=n=>{let{type:t,in:s}=n.data;try{switch(t){case"init-wasm":pt(s.wasm).then(()=>{mt(s).then(()=>{postMessage({type:t})},f=>{postMessage({type:t,err:f})})},f=>{postMessage({type:t,err:f})});break;case"init-ep":{let{epName:f,env:o}=s;ht(o,f).then(()=>{postMessage({type:t})},d=>{postMessage({type:t,err:d})});break}case"copy-from":{let{buffer:f}=s,o=Xe(f);postMessage({type:t,out:o});break}case"create":{let{model:f,options:o}=s;wt(f,o).then(d=>{postMessage({type:t,out:d})},d=>{postMessage({type:t,err:d})});break}case"release":bt(s),postMessage({type:t});break;case"run":{let{sessionId:f,inputIndices:o,inputs:d,outputIndices:c,options:l}=s;yt(f,o,d,c,new Array(c.length).fill(null),l).then(p=>{p.some(h=>h[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:p},Et([...d,...p]))},p=>{postMessage({type:t,err:p})});break}case"end-profiling":gt(s),postMessage({type:t});break;default:}}catch(f){postMessage({type:t,err:f})}});na=Hr?null:n=>new Worker(n??se,{type:"module",name:zr})});var Jr={};it(Jr,{default:()=>ra});async function Yr(n={}){var t=n,s=typeof window=="object",f=typeof WorkerGlobalScope<"u",o=f&&self.name?.startsWith("em-pthread");t.mountExternalData=(e,r)=>{e.startsWith("./")&&(e=e.substring(2)),(t.Rb||(t.Rb=new Map)).set(e,r)},t.unmountExternalData=()=>{delete t.Rb};var d,c,l=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,kc:!0}).buffer.constructor,p=(e,r)=>{throw r},h=import.meta.url,g="";if(s||f){try{g=new URL(".",h).href}catch{}f&&(c=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),d=async e=>{if(ee(e))return new Promise((i,a)=>{var u=new XMLHttpRequest;u.open("GET",e,!0),u.responseType="arraybuffer",u.onload=()=>{u.status==200||u.status==0&&u.response?i(u.response):a(u.status)},u.onerror=a,u.send(null)});var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw Error(r.status+" : "+r.url)}}var w,y,T,O,D,W,A,I=console.log.bind(console),H=console.error.bind(console),x=I,P=H,V=!1,ee=e=>e.startsWith("file://");function b(){te.buffer!=fe.buffer&&$()}if(o){let e=function(r){try{var i=r.data,a=i.Qb;if(a==="load"){let u=[];self.onmessage=m=>u.push(m),A=()=>{postMessage({Qb:"loaded"});for(let m of u)e(m);self.onmessage=e};for(let m of i.Zb)t[m]&&!t[m].proxy||(t[m]=(...E)=>{postMessage({Qb:"callHandler",Yb:m,args:E})},m=="print"&&(x=t[m]),m=="printErr"&&(P=t[m]));te=i.ec,$(),W(i.fc)}else if(a==="run"){(function(u){var m=(b(),S)[u+52>>>2>>>0];u=(b(),S)[u+56>>>2>>>0],ur(m,m-u),_(m)})(i.Ob),zt(i.Ob,0,0,1,0,0),hn(),Ft(i.Ob),Ee||=!0;try{Io(i.bc,i.Tb)}catch(u){if(u!="unwind")throw u}}else i.target!=="setimmediate"&&(a==="checkMailbox"?Ee&&rt():a&&(P(`worker: received unknown command ${a}`),P(i)))}catch(u){throw rr(),u}};var Sa=e,Ee=!1;self.onunhandledrejection=r=>{throw r.reason||r},self.onmessage=e}var te,fe,q,oe,B,S,ne,me,J,he=!1;function $(){var e=te.buffer;t.HEAP8=fe=new Int8Array(e),oe=new Int16Array(e),t.HEAPU8=q=new Uint8Array(e),new Uint16Array(e),t.HEAP32=B=new Int32Array(e),t.HEAPU32=S=new Uint32Array(e),ne=new Float32Array(e),me=new Float64Array(e),J=new BigInt64Array(e),new BigUint64Array(e)}function Z(){he=!0,o?A():ve.Ta()}var et,we=0,pe=null;function He(){if(--we==0&&pe){var e=pe;pe=null,e()}}function be(e){throw P(e="Aborted("+e+")"),V=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),D?.(e),e}function ce(){return{a:{Q:fs,f:Bo,w:Lo,e:Po,j:_o,h:Do,R:Uo,b:xo,F:Mo,ta:vn,k:Co,J:In,Ja:Bn,pa:Ln,ra:Pn,Ka:_n,Ha:Dn,Aa:Un,Ga:xn,X:Mn,qa:Cn,na:Rn,Ia:Fn,oa:Nn,Pa:Ro,Da:Fo,la:No,ua:ko,ia:Wo,S:Go,Ca:Ft,Ma:$o,xa:zo,ya:Ho,za:jo,va:zn,wa:Hn,ja:jn,Ra:Yo,Oa:Xo,U:Zo,T:Qo,Na:Jo,E:Ko,La:es,ma:ts,u:Vo,G:ns,P:st,ka:rs,ba:os,Sa:ss,Ea:Jn,Fa:qn,sa:xt,K:Xn,W:Zn,Ba:Qn,V:Kn,Z:js,L:Ns,_:Hs,M:Fs,v:Ps,c:ps,l:ls,n:cs,r:vs,da:xs,x:Is,o:hs,N:Cs,C:ks,H:Us,$:zs,aa:$s,ca:Ms,O:Ds,ea:_s,z:Bs,D:Rs,d:ms,q:ws,i:ds,Y:Vs,m:bs,p:ys,s:Ss,t:gs,y:Os,fa:Ls,A:Ws,I:As,B:Gs,ga:Ts,ha:Es,g:is,a:te,Qa:Fe}}}class ie{name="ExitStatus";constructor(r){this.message=`Program terminated with exit(${r})`,this.status=r}}var Te=e=>{e.terminate(),e.onmessage=()=>{}},Y=[],j=e=>{Se.length==0&&(bn(),wn(Se[0]));var r=Se.pop();if(!r)return 6;je.push(r),Ae[e.Ob]=r,r.Ob=e.Ob;var i={Qb:"run",bc:e.ac,Tb:e.Tb,Ob:e.Ob};return r.postMessage(i,e.Xb),0},re=0,N=(e,r,...i)=>{for(var a=2*i.length,u=U(),m=jt(8*a),E=m>>>3,v=0;v<i.length;v++){var L=i[v];typeof L=="bigint"?((b(),J)[E+2*v>>>0]=1n,(b(),J)[E+2*v+1>>>0]=L):((b(),J)[E+2*v>>>0]=0n,(b(),me)[E+2*v+1>>>0]=L)}return e=or(e,0,a,m,r),_(u),e};function Fe(e){if(o)return N(0,1,e);if(T=e,!(0<re)){for(var r of je)Te(r);for(r of Se)Te(r);Se=[],je=[],Ae={},V=!0}p(0,new ie(e))}function Ut(e){if(o)return N(1,0,e);xt(e)}var xt=e=>{if(T=e,o)throw Ut(e),"unwind";Fe(e)},Se=[],je=[],pn=[],Ae={},mn=e=>{var r=e.Ob;delete Ae[r],Se.push(e),je.splice(je.indexOf(e),1),e.Ob=0,sr(r)};function hn(){pn.forEach(e=>e())}var wn=e=>new Promise(r=>{e.onmessage=u=>{var m=(u=u.data).Qb;if(u.Sb&&u.Sb!=$t()){var E=Ae[u.Sb];E?E.postMessage(u,u.Xb):P(`Internal error! Worker sent a message "${m}" to target pthread ${u.Sb}, but that thread no longer exists!`)}else m==="checkMailbox"?rt():m==="spawnThread"?j(u):m==="cleanupThread"?mn(Ae[u.cc]):m==="loaded"?(e.loaded=!0,r(e)):u.target==="setimmediate"?e.postMessage(u):m==="callHandler"?t[u.Yb](...u.args):m&&P(`worker sent an unknown command ${m}`)},e.onerror=u=>{throw P(`worker sent an error! ${u.filename}:${u.lineno}: ${u.message}`),u};var i,a=[];for(i of[])t.propertyIsEnumerable(i)&&a.push(i);e.postMessage({Qb:"load",Zb:a,ec:te,fc:y})});function bn(){var e=new Worker((()=>{let r=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new r("ort.wasm.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Se.push(e)}var yn,gn=[],C=e=>{var r=gn[e];return r||(gn[e]=r=yn.get(e)),r},Io=(e,r)=>{re=0,e=C(e)(r),0<re?T=e:Ht(e)},tt=[],nt=0;function Bo(e){var r=new Mt(e>>>=0);return(b(),fe)[r.Pb+12>>>0]==0&&(En(r,!0),nt--),Tn(r,!1),tt.push(r),cr(e),dr(e)}var Ne=0,Lo=()=>{M(0,0);var e=tt.pop();fr(e.Ub),Ne=0};function En(e,r){r=r?1:0,(b(),fe)[e.Pb+12>>>0]=r}function Tn(e,r){r=r?1:0,(b(),fe)[e.Pb+13>>>0]=r}class Mt{constructor(r){this.Ub=r,this.Pb=r-24}}var Ct=e=>{var r=Ne;if(!r)return Ye(0),0;var i=new Mt(r);(b(),S)[i.Pb+16>>>2>>>0]=r;var a=(b(),S)[i.Pb+4>>>2>>>0];if(!a)return Ye(0),r;for(var u of e){if(u===0||u===a)break;if(lr(u,a,i.Pb+16))return Ye(u),r}return Ye(a),r};function Po(){return Ct([])}function _o(e){return Ct([e>>>0])}function Do(e,r,i,a){return Ct([e>>>0,r>>>0,i>>>0,a>>>0])}var Uo=()=>{var e=tt.pop();e||be("no exception to throw");var r=e.Ub;throw(b(),fe)[e.Pb+13>>>0]==0&&(tt.push(e),Tn(e,!0),En(e,!1),nt++),Ne=r};function xo(e,r,i){var a=new Mt(e>>>=0);throw r>>>=0,i>>>=0,(b(),S)[a.Pb+16>>>2>>>0]=0,(b(),S)[a.Pb+4>>>2>>>0]=r,(b(),S)[a.Pb+8>>>2>>>0]=i,nt++,Ne=e}var Mo=()=>nt;function Sn(e,r,i,a){return o?N(2,1,e,r,i,a):vn(e,r,i,a)}function vn(e,r,i,a){if(e>>>=0,i>>>=0,a>>>=0,l===void 0)return 6;var u=[];return o&&u.length===0?Sn(e,r>>>=0,i,a):(e={ac:i,Ob:e,Tb:a,Xb:u},o?(e.Qb="spawnThread",postMessage(e,u),0):j(e))}function Co(e){throw Ne||=e>>>0,Ne}var On=typeof TextDecoder<"u"?new TextDecoder:void 0,An=(e,r=0,i,a)=>{var u=r>>>=0;if(i=u+i,a)a=i;else{for(;e[u]&&!(u>=i);)++u;a=u}if(16<a-r&&e.buffer&&On)return On.decode(e.buffer instanceof ArrayBuffer?e.subarray(r,a):e.slice(r,a));for(u="";r<a;)if(128&(i=e[r++])){var m=63&e[r++];if((224&i)==192)u+=String.fromCharCode((31&i)<<6|m);else{var E=63&e[r++];65536>(i=(240&i)==224?(15&i)<<12|m<<6|E:(7&i)<<18|m<<12|E<<6|63&e[r++])?u+=String.fromCharCode(i):(i-=65536,u+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else u+=String.fromCharCode(i);return u},Rt=(e,r,i)=>(e>>>=0)?An((b(),q),e,r,i):"";function In(e,r,i){return o?N(3,1,e,r,i):0}function Bn(e,r){if(o)return N(4,1,e,r)}function Ln(e,r){if(o)return N(5,1,e,r)}function Pn(e,r,i){if(o)return N(6,1,e,r,i)}function _n(e,r,i){return o?N(7,1,e,r,i):0}function Dn(e,r){if(o)return N(8,1,e,r)}function Un(e,r,i){if(o)return N(9,1,e,r,i)}function xn(e,r,i,a){if(o)return N(10,1,e,r,i,a)}function Mn(e,r,i,a){if(o)return N(11,1,e,r,i,a)}function Cn(e,r,i,a){if(o)return N(12,1,e,r,i,a)}function Rn(e){if(o)return N(13,1,e)}function Fn(e,r){if(o)return N(14,1,e,r)}function Nn(e,r,i){if(o)return N(15,1,e,r,i)}var Ro=()=>be("");function Fo(e){zt(e>>>0,!f,1,!s,131072,!1),hn()}var kn=e=>{if(!V)try{if(e(),!(0<re))try{o?Ht(T):xt(T)}catch(r){r instanceof ie||r=="unwind"||p(0,r)}}catch(r){r instanceof ie||r=="unwind"||p(0,r)}};function Ft(e){e>>>=0,typeof Atomics.dc=="function"&&(Atomics.dc((b(),B),e>>>2,e).value.then(rt),e+=128,Atomics.store((b(),B),e>>>2,1))}var rt=()=>{var e=$t();e&&(Ft(e),kn(ir))};function No(e,r){(e>>>=0)==r>>>0?setTimeout(rt):o?postMessage({Sb:e,Qb:"checkMailbox"}):(e=Ae[e])&&e.postMessage({Qb:"checkMailbox"})}var ot=[];function ko(e,r,i,a,u){for(r>>>=0,a/=2,ot.length=a,i=u>>>0>>>3,u=0;u<a;u++)(b(),J)[i+2*u>>>0]?ot[u]=(b(),J)[i+2*u+1>>>0]:ot[u]=(b(),me)[i+2*u+1>>>0];return(r?er[r]:us[e])(...ot)}var Wo=()=>{re=0};function Go(e){e>>>=0,o?postMessage({Qb:"cleanupThread",cc:e}):mn(Ae[e])}function $o(e){}function zo(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),(b(),B)[r>>>2>>>0]=e.getUTCSeconds(),(b(),B)[r+4>>>2>>>0]=e.getUTCMinutes(),(b(),B)[r+8>>>2>>>0]=e.getUTCHours(),(b(),B)[r+12>>>2>>>0]=e.getUTCDate(),(b(),B)[r+16>>>2>>>0]=e.getUTCMonth(),(b(),B)[r+20>>>2>>>0]=e.getUTCFullYear()-1900,(b(),B)[r+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,(b(),B)[r+28>>>2>>>0]=e}var Wn=e=>e%4==0&&(e%100!=0||e%400==0),Gn=[0,31,60,91,121,152,182,213,244,274,305,335],$n=[0,31,59,90,120,151,181,212,243,273,304,334];function Ho(e,r){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),r>>>=0,e=new Date(1e3*e),(b(),B)[r>>>2>>>0]=e.getSeconds(),(b(),B)[r+4>>>2>>>0]=e.getMinutes(),(b(),B)[r+8>>>2>>>0]=e.getHours(),(b(),B)[r+12>>>2>>>0]=e.getDate(),(b(),B)[r+16>>>2>>>0]=e.getMonth(),(b(),B)[r+20>>>2>>>0]=e.getFullYear()-1900,(b(),B)[r+24>>>2>>>0]=e.getDay();var i=(Wn(e.getFullYear())?Gn:$n)[e.getMonth()]+e.getDate()-1|0;(b(),B)[r+28>>>2>>>0]=i,(b(),B)[r+36>>>2>>>0]=-60*e.getTimezoneOffset(),i=new Date(e.getFullYear(),6,1).getTimezoneOffset();var a=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(i!=a&&e.getTimezoneOffset()==Math.min(a,i)),(b(),B)[r+32>>>2>>>0]=e}function jo(e){e>>>=0;var r=new Date((b(),B)[e+20>>>2>>>0]+1900,(b(),B)[e+16>>>2>>>0],(b(),B)[e+12>>>2>>>0],(b(),B)[e+8>>>2>>>0],(b(),B)[e+4>>>2>>>0],(b(),B)[e>>>2>>>0],0),i=(b(),B)[e+32>>>2>>>0],a=r.getTimezoneOffset(),u=new Date(r.getFullYear(),6,1).getTimezoneOffset(),m=new Date(r.getFullYear(),0,1).getTimezoneOffset(),E=Math.min(m,u);return 0>i?(b(),B)[e+32>>>2>>>0]=+(u!=m&&E==a):0<i!=(E==a)&&(u=Math.max(m,u),r.setTime(r.getTime()+6e4*((0<i?E:u)-a))),(b(),B)[e+24>>>2>>>0]=r.getDay(),i=(Wn(r.getFullYear())?Gn:$n)[r.getMonth()]+r.getDate()-1|0,(b(),B)[e+28>>>2>>>0]=i,(b(),B)[e>>>2>>>0]=r.getSeconds(),(b(),B)[e+4>>>2>>>0]=r.getMinutes(),(b(),B)[e+8>>>2>>>0]=r.getHours(),(b(),B)[e+12>>>2>>>0]=r.getDate(),(b(),B)[e+16>>>2>>>0]=r.getMonth(),(b(),B)[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),BigInt(isNaN(e)?-1:e/1e3)}function zn(e,r,i,a,u,m,E){return o?N(16,1,e,r,i,a,u,m,E):-52}function Hn(e,r,i,a,u,m){if(o)return N(17,1,e,r,i,a,u,m)}var Ve={},Vo=()=>performance.timeOrigin+performance.now();function jn(e,r){if(o)return N(18,1,e,r);if(Ve[e]&&(clearTimeout(Ve[e].id),delete Ve[e]),!r)return 0;var i=setTimeout(()=>{delete Ve[e],kn(()=>ar(e,performance.timeOrigin+performance.now()))},r);return Ve[e]={id:i,lc:r},0}var Ie=(e,r,i)=>{var a=(b(),q);if(r>>>=0,0<i){var u=r;i=r+i-1;for(var m=0;m<e.length;++m){var E=e.codePointAt(m);if(127>=E){if(r>=i)break;a[r++>>>0]=E}else if(2047>=E){if(r+1>=i)break;a[r++>>>0]=192|E>>6,a[r++>>>0]=128|63&E}else if(65535>=E){if(r+2>=i)break;a[r++>>>0]=224|E>>12,a[r++>>>0]=128|E>>6&63,a[r++>>>0]=128|63&E}else{if(r+3>=i)break;a[r++>>>0]=240|E>>18,a[r++>>>0]=128|E>>12&63,a[r++>>>0]=128|E>>6&63,a[r++>>>0]=128|63&E,m++}}a[r>>>0]=0,e=r-u}else e=0;return e};function Yo(e,r,i,a){e>>>=0,r>>>=0,i>>>=0,a>>>=0;var u=new Date().getFullYear(),m=new Date(u,0,1).getTimezoneOffset();u=new Date(u,6,1).getTimezoneOffset();var E=Math.max(m,u);(b(),S)[e>>>2>>>0]=60*E,(b(),B)[r>>>2>>>0]=+(m!=u),e=(r=v=>{var L=Math.abs(v);return`UTC${0<=v?"-":"+"}${String(Math.floor(L/60)).padStart(2,"0")}${String(L%60).padStart(2,"0")}`})(m),r=r(u),u<m?(Ie(e,i,17),Ie(r,a,17)):(Ie(e,a,17),Ie(r,i,17))}var Jo=()=>Date.now(),qo=1;function Xo(e,r,i){if(i>>>=0,!(0<=e&&3>=e))return 28;if(e===0)e=Date.now();else{if(!qo)return 52;e=performance.timeOrigin+performance.now()}return e=Math.round(1e6*e),(b(),J)[i>>>3>>>0]=BigInt(e),0}var Nt=[];function Zo(e,r,i){e>>>=0,r>>>=0,i>>>=0,Nt.length=0;for(var a;a=(b(),q)[r++>>>0];){var u=a!=105;i+=(u&=a!=112)&&i%8?4:0,Nt.push(a==112?(b(),S)[i>>>2>>>0]:a==106?(b(),J)[i>>>3>>>0]:a==105?(b(),B)[i>>>2>>>0]:(b(),me)[i>>>3>>>0]),i+=u?8:4}return er[e](...Nt)}var Qo=()=>{};function Ko(e,r){return P(Rt(e>>>0,r>>>0))}var es=()=>{throw re+=1,"unwind"};function ts(){return 4294901760}var ns=()=>navigator.hardwareConcurrency,Be={},kt=e=>{for(var r=0,i=0;i<e.length;++i){var a=e.charCodeAt(i);127>=a?r++:2047>=a?r+=2:55296<=a&&57343>=a?(r+=4,++i):r+=3}return r};function st(e){if(!(2147483648&(e>>>=0)))return be("Cannot use emscripten_pc_get_function on native functions without -sUSE_OFFSET_CONVERTER"),0;if(!(e=Be[e]))return 0;var r;if(r=/^\s+at (.*) \(.*\)$/.exec(e))e=r[1];else{if(!(r=/^(.+?)@/.exec(e)))return 0;e=r[1]}tr(st.Wb??0),r=kt(e)+1;var i=nr(r);return i&&Ie(e,i,r),st.Wb=i,st.Wb}function rs(e){e>>>=0;var r=(b(),q).length;if(e<=r||4294901760<e)return!1;for(var i=1;4>=i;i*=2){var a=r*(1+.2/i);a=Math.min(a,e+100663296);e:{a=(Math.min(4294901760,65536*Math.ceil(Math.max(e,a)/65536))-te.buffer.byteLength+65535)/65536|0;try{te.grow(a),$();var u=1;break e}catch{}u=void 0}if(u)return!0}return!1}var at=e=>{var r;if(r=/\bwasm-function\[\d+\]:(0x[0-9a-f]+)/.exec(e))return+r[1];if(/\bwasm-function\[(\d+)\]:(\d+)/.exec(e))be("Legacy backtrace format detected but -sUSE_OFFSET_CONVERTER not present.");else if(r=/:(\d+):\d+(?:\)|$)/.exec(e))return 2147483648|+r[1];return 0},Vn=e=>{e.forEach(r=>{var i=at(r);i&&(Be[i]=r)})};function os(){var e=Error().stack.toString().split(`
`);return e[0]=="Error"&&e.shift(),Vn(e),Be.Vb=at(e[3]),Be.$b=e,Be.Vb}function ss(e,r,i){if(e>>>=0,r>>>=0,Be.Vb==e)var a=Be.$b;else(a=Error().stack.toString().split(`
`))[0]=="Error"&&a.shift(),Vn(a);for(var u=3;a[u]&&at(a[u])!=e;)++u;for(e=0;e<i&&a[e+u];++e)(b(),B)[r+4*e>>>2>>>0]=at(a[e+u]);return e}var Wt,Gt={},Yn=()=>{if(!Wt){var e,r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(e in Gt)Gt[e]===void 0?delete r[e]:r[e]=Gt[e];var i=[];for(e in r)i.push(`${e}=${r[e]}`);Wt=i}return Wt};function Jn(e,r){if(o)return N(19,1,e,r);e>>>=0,r>>>=0;var i,a=0,u=0;for(i of Yn()){var m=r+a;(b(),S)[e+u>>>2>>>0]=m,a+=Ie(i,m,1/0)+1,u+=4}return 0}function qn(e,r){if(o)return N(20,1,e,r);e>>>=0,r>>>=0;var i=Yn();for(var a of((b(),S)[e>>>2>>>0]=i.length,e=0,i))e+=kt(a)+1;return(b(),S)[r>>>2>>>0]=e,0}function Xn(e){return o?N(21,1,e):52}function Zn(e,r,i,a){return o?N(22,1,e,r,i,a):52}function Qn(e,r,i,a){return o?N(23,1,e,r,i,a):70}var as=[null,[],[]];function Kn(e,r,i,a){if(o)return N(24,1,e,r,i,a);r>>>=0,i>>>=0,a>>>=0;for(var u=0,m=0;m<i;m++){var E=(b(),S)[r>>>2>>>0],v=(b(),S)[r+4>>>2>>>0];r+=8;for(var L=0;L<v;L++){var R=e,Q=(b(),q)[E+L>>>0],le=as[R];Q===0||Q===10?((R===1?x:P)(An(le)),le.length=0):le.push(Q)}u+=v}return(b(),S)[a>>>2>>>0]=u,0}function is(e){return e>>>0}o||function(){for(var e=t.numThreads-1;e--;)bn();Y.push(()=>{we++,function(r){o?r():Promise.all(Se.map(wn)).then(r)}(()=>He())})}(),o||(te=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),$()),t.wasmBinary&&(w=t.wasmBinary),t.stackSave=()=>U(),t.stackRestore=e=>_(e),t.stackAlloc=e=>jt(e),t.setValue=function(e,r,i="i8"){switch(i.endsWith("*")&&(i="*"),i){case"i1":case"i8":(b(),fe)[e>>>0]=r;break;case"i16":(b(),oe)[e>>>1>>>0]=r;break;case"i32":(b(),B)[e>>>2>>>0]=r;break;case"i64":(b(),J)[e>>>3>>>0]=BigInt(r);break;case"float":(b(),ne)[e>>>2>>>0]=r;break;case"double":(b(),me)[e>>>3>>>0]=r;break;case"*":(b(),S)[e>>>2>>>0]=r;break;default:be(`invalid type for setValue: ${i}`)}},t.getValue=function(e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":return(b(),fe)[e>>>0];case"i16":return(b(),oe)[e>>>1>>>0];case"i32":return(b(),B)[e>>>2>>>0];case"i64":return(b(),J)[e>>>3>>>0];case"float":return(b(),ne)[e>>>2>>>0];case"double":return(b(),me)[e>>>3>>>0];case"*":return(b(),S)[e>>>2>>>0];default:be(`invalid type for getValue: ${r}`)}},t.UTF8ToString=Rt,t.stringToUTF8=Ie,t.lengthBytesUTF8=kt;var us=[Fe,Ut,Sn,In,Bn,Ln,Pn,_n,Dn,Un,xn,Mn,Cn,Rn,Fn,Nn,zn,Hn,jn,Jn,qn,Xn,Zn,Qn,Kn],er={866028:(e,r,i,a,u)=>{if(t===void 0||!t.Rb)return 1;if((e=Rt(Number(e>>>0))).startsWith("./")&&(e=e.substring(2)),!(e=t.Rb.get(e)))return 2;if(r=Number(r>>>0),i=Number(i>>>0),a=Number(a>>>0),r+i>e.byteLength)return 3;try{let m=e.subarray(r,r+i);switch(u){case 0:(b(),q).set(m,a>>>0);break;case 1:t.hc?t.hc(a,m):t.jc(a,m);break;default:return 4}return 0}catch{return 4}},866852:()=>typeof wasmOffsetConverter<"u"};function fs(){return typeof wasmOffsetConverter<"u"}var $t,tr,nr,zt,rr,or,sr,Ht,ar,ir,M,Ye,ur,_,jt,U,fr,cr,lr,dr,ve=await async function(){function e(a,u){return ve=a.exports,ve=function(){var m=ve,E=L=>()=>L()>>>0,v=L=>R=>L(R)>>>0;return(m=Object.assign({},m)).sb=E(m.sb),m.ub=v(m.ub),m.Ib=v(m.Ib),m.Jb=E(m.Jb),m.Nb=v(m.Nb),m}(),pn.push(ve.vb),yn=ve.wb,y=u,a=ve,t._OrtInit=a.Ua,t._OrtGetLastError=a.Va,t._OrtCreateSessionOptions=a.Wa,t._OrtAppendExecutionProvider=a.Xa,t._OrtAddFreeDimensionOverride=a.Ya,t._OrtAddSessionConfigEntry=a.Za,t._OrtReleaseSessionOptions=a._a,t._OrtCreateSession=a.$a,t._OrtReleaseSession=a.ab,t._OrtGetInputOutputCount=a.bb,t._OrtGetInputOutputMetadata=a.cb,t._OrtFree=a.db,t._OrtCreateTensor=a.eb,t._OrtGetTensorData=a.fb,t._OrtReleaseTensor=a.gb,t._OrtCreateRunOptions=a.hb,t._OrtAddRunConfigEntry=a.ib,t._OrtReleaseRunOptions=a.jb,t._OrtCreateBinding=a.kb,t._OrtBindInput=a.lb,t._OrtBindOutput=a.mb,t._OrtClearBoundOutputs=a.nb,t._OrtReleaseBinding=a.ob,t._OrtRunWithBinding=a.pb,t._OrtRun=a.qb,t._OrtEndProfiling=a.rb,$t=a.sb,t._free=tr=a.tb,t._malloc=nr=a.ub,zt=a.xb,rr=a.yb,or=a.zb,sr=a.Ab,Ht=a.Bb,ar=a.Cb,ir=a.Db,M=a.Eb,Ye=a.Fb,ur=a.Gb,_=a.Hb,jt=a.Ib,U=a.Jb,fr=a.Kb,cr=a.Lb,lr=a.Mb,dr=a.Nb,He(),ve}we++;var r,i=ce();return t.instantiateWasm?new Promise(a=>{t.instantiateWasm(i,(u,m)=>{a(e(u,m))})}):o?new Promise(a=>{W=u=>{var m=new WebAssembly.Instance(u,ce());a(e(m,u))}}):(et??=t.locateFile?t.locateFile?t.locateFile("ort-wasm-simd-threaded.wasm",g):g+"ort-wasm-simd-threaded.wasm":new URL("ort-wasm-simd-threaded.wasm",import.meta.url).href,r=await async function(a){var u=et;if(!w&&typeof WebAssembly.instantiateStreaming=="function"&&!ee(u))try{var m=fetch(u,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(m,a)}catch(E){P(`wasm streaming compile failed: ${E}`),P("falling back to ArrayBuffer instantiation")}return async function(E,v){try{var L=await async function(R){if(!w)try{var Q=await d(R);return new Uint8Array(Q)}catch{}if(R==et&&w)R=new Uint8Array(w);else{if(!c)throw"both async and sync fetching of the wasm failed";R=c(R)}return R}(E);return await WebAssembly.instantiate(L,v)}catch(R){P(`failed to asynchronously prepare wasm: ${R}`),be(R)}}(u,a)}(i),e(r.instance,r.module))}();function cs(e,r,i,a){var u=U();try{return C(e)(r,i,a)}catch(m){if(_(u),m!==m+0)throw m;M(1,0)}}function ls(e,r,i){var a=U();try{return C(e)(r,i)}catch(u){if(_(a),u!==u+0)throw u;M(1,0)}}function ds(e,r,i){var a=U();try{C(e)(r,i)}catch(u){if(_(a),u!==u+0)throw u;M(1,0)}}function ps(e,r){var i=U();try{return C(e)(r)}catch(a){if(_(i),a!==a+0)throw a;M(1,0)}}function ms(e){var r=U();try{C(e)()}catch(i){if(_(r),i!==i+0)throw i;M(1,0)}}function hs(e,r,i,a,u,m,E){var v=U();try{return C(e)(r,i,a,u,m,E)}catch(L){if(_(v),L!==L+0)throw L;M(1,0)}}function ws(e,r){var i=U();try{C(e)(r)}catch(a){if(_(i),a!==a+0)throw a;M(1,0)}}function bs(e,r,i,a){var u=U();try{C(e)(r,i,a)}catch(m){if(_(u),m!==m+0)throw m;M(1,0)}}function ys(e,r,i,a,u){var m=U();try{C(e)(r,i,a,u)}catch(E){if(_(m),E!==E+0)throw E;M(1,0)}}function gs(e,r,i,a,u,m,E){var v=U();try{C(e)(r,i,a,u,m,E)}catch(L){if(_(v),L!==L+0)throw L;M(1,0)}}function Es(e,r,i,a,u,m,E){var v=U();try{C(e)(r,i,a,u,m,E)}catch(L){if(_(v),L!==L+0)throw L;M(1,0)}}function Ts(e,r,i,a,u,m,E,v){var L=U();try{C(e)(r,i,a,u,m,E,v)}catch(R){if(_(L),R!==R+0)throw R;M(1,0)}}function Ss(e,r,i,a,u,m){var E=U();try{C(e)(r,i,a,u,m)}catch(v){if(_(E),v!==v+0)throw v;M(1,0)}}function vs(e,r,i,a,u){var m=U();try{return C(e)(r,i,a,u)}catch(E){if(_(m),E!==E+0)throw E;M(1,0)}}function Os(e,r,i,a,u,m,E,v){var L=U();try{C(e)(r,i,a,u,m,E,v)}catch(R){if(_(L),R!==R+0)throw R;M(1,0)}}function As(e,r,i,a,u,m,E,v,L,R,Q,le){var ye=U();try{C(e)(r,i,a,u,m,E,v,L,R,Q,le)}catch(ge){if(_(ye),ge!==ge+0)throw ge;M(1,0)}}function Is(e,r,i,a,u,m){var E=U();try{return C(e)(r,i,a,u,m)}catch(v){if(_(E),v!==v+0)throw v;M(1,0)}}function Bs(e,r,i){var a=U();try{return C(e)(r,i)}catch(u){if(_(a),u!==u+0)throw u;return M(1,0),0n}}function Ls(e,r,i,a,u,m,E,v,L){var R=U();try{C(e)(r,i,a,u,m,E,v,L)}catch(Q){if(_(R),Q!==Q+0)throw Q;M(1,0)}}function Ps(e){var r=U();try{return C(e)()}catch(i){if(_(r),i!==i+0)throw i;M(1,0)}}function _s(e,r){var i=U();try{return C(e)(r)}catch(a){if(_(i),a!==a+0)throw a;return M(1,0),0n}}function Ds(e){var r=U();try{return C(e)()}catch(i){if(_(r),i!==i+0)throw i;return M(1,0),0n}}function Us(e,r,i,a,u,m){var E=U();try{return C(e)(r,i,a,u,m)}catch(v){if(_(E),v!==v+0)throw v;M(1,0)}}function xs(e,r,i,a,u,m){var E=U();try{return C(e)(r,i,a,u,m)}catch(v){if(_(E),v!==v+0)throw v;M(1,0)}}function Ms(e,r,i){var a=U();try{return C(e)(r,i)}catch(u){if(_(a),u!==u+0)throw u;M(1,0)}}function Cs(e,r,i,a,u,m,E,v){var L=U();try{return C(e)(r,i,a,u,m,E,v)}catch(R){if(_(L),R!==R+0)throw R;M(1,0)}}function Rs(e,r,i,a,u){var m=U();try{return C(e)(r,i,a,u)}catch(E){if(_(m),E!==E+0)throw E;return M(1,0),0n}}function Fs(e,r,i,a){var u=U();try{return C(e)(r,i,a)}catch(m){if(_(u),m!==m+0)throw m;M(1,0)}}function Ns(e,r,i,a){var u=U();try{return C(e)(r,i,a)}catch(m){if(_(u),m!==m+0)throw m;M(1,0)}}function ks(e,r,i,a,u,m,E,v,L,R,Q,le){var ye=U();try{return C(e)(r,i,a,u,m,E,v,L,R,Q,le)}catch(ge){if(_(ye),ge!==ge+0)throw ge;M(1,0)}}function Ws(e,r,i,a,u,m,E,v,L,R,Q){var le=U();try{C(e)(r,i,a,u,m,E,v,L,R,Q)}catch(ye){if(_(le),ye!==ye+0)throw ye;M(1,0)}}function Gs(e,r,i,a,u,m,E,v,L,R,Q,le,ye,ge,Ys,Js){var qs=U();try{C(e)(r,i,a,u,m,E,v,L,R,Q,le,ye,ge,Ys,Js)}catch(Vt){if(_(qs),Vt!==Vt+0)throw Vt;M(1,0)}}function $s(e,r,i,a){var u=U();try{return C(e)(r,i,a)}catch(m){if(_(u),m!==m+0)throw m;M(1,0)}}function zs(e,r,i,a,u){var m=U();try{return C(e)(r,i,a,u)}catch(E){if(_(m),E!==E+0)throw E;M(1,0)}}function Hs(e,r,i){var a=U();try{return C(e)(r,i)}catch(u){if(_(a),u!==u+0)throw u;M(1,0)}}function js(e,r,i){var a=U();try{return C(e)(r,i)}catch(u){if(_(a),u!==u+0)throw u;M(1,0)}}function Vs(e,r,i,a){var u=U();try{C(e)(r,i,a)}catch(m){if(_(u),m!==m+0)throw m;M(1,0)}}return function e(){if(0<we)pe=e;else if(o)O?.(t),Z();else{for(;0<Y.length;)Y.shift()(t);0<we?pe=e:(t.calledRun=!0,V||(Z(),O?.(t)))}}(),t.PTR_SIZE=4,he?t:new Promise((e,r)=>{O=e,D=r})}var ra,oa,qr=F(()=>{"use strict";ra=Yr,oa=globalThis.self?.name?.startsWith("em-pthread");oa&&Yr()});var Qr,on,sa,se,Kr,rn,aa,ia,eo,ua,Xr,to,Zr,no,dt=F(()=>{"use strict";lt();Qr=typeof location>"u"?void 0:location.origin,on=import.meta.url>"file:"&&import.meta.url<"file;",sa=()=>{if(!!1){if(on){let n=URL;return new URL(new n("ort.wasm.bundle.min.mjs",import.meta.url).href,Qr).href}return import.meta.url}},se=sa(),Kr=()=>{if(se&&!se.startsWith("blob:"))return se.substring(0,se.lastIndexOf("/")+1)},rn=(n,t)=>{try{let s=t??se;return(s?new URL(n,s):new URL(n)).origin===Qr}catch{return!1}},aa=(n,t)=>{let s=t??se;try{return(s?new URL(n,s):new URL(n)).href}catch{return}},ia=(n,t)=>`${t??"./"}${n}`,eo=async n=>{let s=await(await fetch(n,{credentials:"same-origin"})).blob();return URL.createObjectURL(s)},ua=async n=>(await import(/*webpackIgnore:true*/ /*@vite-ignore*/n)).default,Xr=(Vr(),qt(jr)).default,to=async()=>{if(!se)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(rn(se))return[void 0,Xr()];let n=await eo(se);return[n,Xr(n)]},Zr=(qr(),qt(Jr)).default,no=async(n,t,s,f)=>{let o=Zr&&!(n||t);if(o)if(se)o=rn(se);else if(f&&!s)o=!0;else throw new Error("cannot determine the script source URL.");if(o)return[void 0,Zr];{let d="ort-wasm-simd-threaded.mjs",c=n??aa(d,t),l=!!1&&s&&c&&!rn(c,t),p=l?await eo(c):c??ia(d,t);return[l?p:void 0,await ua(p)]}}});var sn,an,Tt,ro,fa,ca,la,pt,G,Me=F(()=>{"use strict";dt();an=!1,Tt=!1,ro=!1,fa=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},ca=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},la=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},pt=async n=>{if(an)return Promise.resolve();if(Tt)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ro)throw new Error("previous call to 'initializeWebAssembly()' failed.");Tt=!0;let t=n.initTimeout,s=n.numThreads;if(n.simd!==!1){if(n.simd==="relaxed"){if(!la())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!ca())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let f=fa();s>1&&!f&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+s+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),n.numThreads=s=1);let o=n.wasmPaths,d=typeof o=="string"?o:void 0,c=o?.mjs,l=c?.href??c,p=o?.wasm,h=p?.href??p,g=n.wasmBinary,[w,y]=await no(l,d,s>1,!!g||!!h),T=!1,O=[];if(t>0&&O.push(new Promise(D=>{setTimeout(()=>{T=!0,D()},t)})),O.push(new Promise((D,W)=>{let A={numThreads:s};if(g)A.wasmBinary=g;else if(h||d)A.locateFile=I=>h??d+I;else if(l&&l.indexOf("blob:")!==0)A.locateFile=I=>new URL(I,l).href;else if(w){let I=Kr();I&&(A.locateFile=H=>I+H)}y(A).then(I=>{Tt=!1,an=!0,sn=I,D(),w&&URL.revokeObjectURL(w)},I=>{Tt=!1,ro=!0,W(I)})})),await Promise.race(O),T)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},G=()=>{if(an&&sn)return sn;throw new Error("WebAssembly is not initialized yet.")}});var ae,Ze,k,St=F(()=>{"use strict";Me();ae=(n,t)=>{let s=G(),f=s.lengthBytesUTF8(n)+1,o=s._malloc(f);return s.stringToUTF8(n,o,f),t.push(o),o},Ze=(n,t,s,f)=>{if(typeof n=="object"&&n!==null){if(s.has(n))throw new Error("Circular reference in options");s.add(n)}Object.entries(n).forEach(([o,d])=>{let c=t?t+o:o;if(typeof d=="object")Ze(d,c+".",s,f);else if(typeof d=="string"||typeof d=="number")f(c,d.toString());else if(typeof d=="boolean")f(c,d?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof d}`)})},k=n=>{let t=G(),s=t.stackSave();try{let f=t.PTR_SIZE,o=t.stackAlloc(2*f);t._OrtGetLastError(o,o+f);let d=Number(t.getValue(o,f===4?"i32":"i64")),c=t.getValue(o+f,"*"),l=c?t.UTF8ToString(c):"";throw new Error(`${n} ERROR_CODE: ${d}, ERROR_MESSAGE: ${l}`)}finally{t.stackRestore(s)}}});var oo,so=F(()=>{"use strict";Me();St();oo=n=>{let t=G(),s=0,f=[],o=n||{};try{if(n?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log severity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(o.terminate=!1);let d=0;return n?.tag!==void 0&&(d=ae(n.tag,f)),s=t._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,d),s===0&&k("Can't create run options."),n?.extra!==void 0&&Ze(n.extra,"",new WeakSet,(c,l)=>{let p=ae(c,f),h=ae(l,f);t._OrtAddRunConfigEntry(s,p,h)!==0&&k(`Can't set a run config entry: ${c} - ${l}.`)}),[s,f]}catch(d){throw s!==0&&t._OrtReleaseRunOptions(s),f.forEach(c=>t._free(c)),d}}});var da,pa,ma,vt,ha,ao,io=F(()=>{"use strict";Me();St();da=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"layout":return 3;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},pa=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},ma=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let t=n.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(s=>(typeof s=="string"?s:s.name)==="webgpu")&&(n.enableMemPattern=!1)},vt=(n,t,s,f)=>{let o=ae(t,f),d=ae(s,f);G()._OrtAddSessionConfigEntry(n,o,d)!==0&&k(`Can't set a session config entry: ${t} - ${s}.`)},ha=async(n,t,s)=>{let f=t.executionProviders;for(let o of f){let d=typeof o=="string"?o:o.name,c=[];switch(d){case"webnn":if(d="WEBNN",typeof o!="string"){let y=o?.deviceType;y&&vt(n,"deviceType",y,s)}break;case"webgpu":if(d="JS",typeof o!="string"){let w=o;if(w?.preferredLayout){if(w.preferredLayout!=="NCHW"&&w.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${w.preferredLayout}`);vt(n,"preferredLayout",w.preferredLayout,s)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${d}`)}let l=ae(d,s),p=c.length,h=0,g=0;if(p>0){h=G()._malloc(p*G().PTR_SIZE),s.push(h),g=G()._malloc(p*G().PTR_SIZE),s.push(g);for(let w=0;w<p;w++)G().setValue(h+w*G().PTR_SIZE,c[w][0],"*"),G().setValue(g+w*G().PTR_SIZE,c[w][1],"*")}await G()._OrtAppendExecutionProvider(n,l,h,g,p)!==0&&k(`Can't append execution provider: ${d}.`)}},ao=async n=>{let t=G(),s=0,f=[],o=n||{};ma(o);try{let d=da(o.graphOptimizationLevel??"all"),c=pa(o.executionMode??"sequential"),l=typeof o.logId=="string"?ae(o.logId,f):0,p=o.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log severity level is not valid: ${p}`);let h=o.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let g=typeof o.optimizedModelFilePath=="string"?ae(o.optimizedModelFilePath,f):0;if(s=t._OrtCreateSessionOptions(d,!!o.enableCpuMemArena,!!o.enableMemPattern,c,!!o.enableProfiling,0,l,p,h,g),s===0&&k("Can't create session options."),o.executionProviders&&await ha(s,o,f),o.enableGraphCapture!==void 0){if(typeof o.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);vt(s,"enableGraphCapture",o.enableGraphCapture.toString(),f)}if(o.freeDimensionOverrides)for(let[w,y]of Object.entries(o.freeDimensionOverrides)){if(typeof w!="string")throw new Error(`free dimension override name must be a string: ${w}`);if(typeof y!="number"||!Number.isInteger(y)||y<0)throw new Error(`free dimension override value must be a non-negative integer: ${y}`);let T=ae(w,f);t._OrtAddFreeDimensionOverride(s,T,y)!==0&&k(`Can't set a free dimension override: ${w} - ${y}.`)}return o.extra!==void 0&&Ze(o.extra,"",new WeakSet,(w,y)=>{vt(s,w,y,f)}),[s,f]}catch(d){throw s!==0&&t._OrtReleaseSessionOptions(s)!==0&&k("Can't release session options."),f.forEach(c=>t._free(c)),d}}});var ke,Ot,We,uo,fo,At,It,co,un=F(()=>{"use strict";ke=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${n}`)}},Ot=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${n}`)}},We=(n,t)=>{let s=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][n],f=typeof t=="number"?t:t.reduce((o,d)=>o*d,1);return s>0?Math.ceil(f*s):void 0},uo=n=>{switch(n){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},fo=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},At=n=>n==="float32"||n==="float16"||n==="int32"||n==="int64"||n==="uint32"||n==="uint8"||n==="bool"||n==="uint4"||n==="int4",It=n=>n==="float32"||n==="float16"||n==="int32"||n==="int64"||n==="uint32"||n==="uint64"||n==="int8"||n==="uint8"||n==="bool"||n==="uint4"||n==="int4",co=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${n}`)}}});var Qe,fn=F(()=>{"use strict";lt();Qe=async n=>{if(typeof n=="string")if(!1)try{let{readFile:t}=Jt("node:fs/promises");return new Uint8Array(await t(n))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let{createReadStream:s}=Jt("node:fs"),f=s(n),o=[];for await(let d of f)o.push(d);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(n);if(!t.ok)throw new Error(`failed to load external data file: ${n}`);let s=t.headers.get("Content-Length"),f=s?parseInt(s,10):0;if(f<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${n}, no response body.`);let o=t.body.getReader(),d;try{d=new ArrayBuffer(f)}catch(l){if(l instanceof RangeError){let p=Math.ceil(f/65536);d=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw l}let c=0;for(;;){let{done:l,value:p}=await o.read();if(l)break;let h=p.byteLength;new Uint8Array(d,c,h).set(p),c+=h}return new Uint8Array(d,0,f)}}else return n instanceof Blob?new Uint8Array(await n.arrayBuffer()):n instanceof Uint8Array?n:new Uint8Array(n)}});var wa,mt,ht,Ge,ba,lo,Xe,wt,bt,po,yt,gt,Et,nn=F(()=>{"use strict";Oe();so();io();un();Me();St();fn();wa=(n,t)=>{G()._OrtInit(n,t)!==0&&k("Can't initialize onnxruntime.")},mt=async n=>{wa(n.wasm.numThreads,fo(n.logLevel))},ht=async(n,t)=>{G().asyncInit?.();let s=n.webgpu.adapter;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");if(s){if(typeof s.limits!="object"||typeof s.features!="object"||typeof s.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let f=n.webgpu.powerPreference;if(f!==void 0&&f!=="low-power"&&f!=="high-performance")throw new Error(`Invalid powerPreference setting: "${f}"`);let o=n.webgpu.forceFallbackAdapter;if(o!==void 0&&typeof o!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${o}"`);if(s=await navigator.gpu.requestAdapter({powerPreference:f,forceFallbackAdapter:o}),!s)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}}if(t==="webnn"&&(typeof navigator>"u"||!navigator.ml))throw new Error("WebNN is not supported in current environment")},Ge=new Map,ba=n=>{let t=G(),s=t.stackSave();try{let f=t.PTR_SIZE,o=t.stackAlloc(2*f);t._OrtGetInputOutputCount(n,o,o+f)!==0&&k("Can't get session input/output count.");let c=f===4?"i32":"i64";return[Number(t.getValue(o,c)),Number(t.getValue(o+f,c))]}finally{t.stackRestore(s)}},lo=(n,t)=>{let s=G(),f=s.stackSave(),o=0;try{let d=s.PTR_SIZE,c=s.stackAlloc(2*d);s._OrtGetInputOutputMetadata(n,t,c,c+d)!==0&&k("Can't get session input/output metadata.");let p=Number(s.getValue(c,"*"));o=Number(s.getValue(c+d,"*"));let h=s.HEAP32[o/4];if(h===0)return[p,0];let g=s.HEAPU32[o/4+1],w=[];for(let y=0;y<g;y++){let T=Number(s.getValue(o+8+y*d,"*"));w.push(T!==0?s.UTF8ToString(T):Number(s.getValue(o+8+(y+g)*d,"*")))}return[p,h,w]}finally{s.stackRestore(f),o!==0&&s._OrtFree(o)}},Xe=n=>{let t=G(),s=t._malloc(n.byteLength);if(s===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return t.HEAPU8.set(n,s),[s,n.byteLength]},wt=async(n,t)=>{let s,f,o=G();Array.isArray(n)?[s,f]=n:n.buffer===o.HEAPU8.buffer?[s,f]=[n.byteOffset,n.byteLength]:[s,f]=Xe(n);let d=0,c=0,l=0,p=[],h=[],g=[];try{if([c,p]=await ao(t),t?.externalData&&o.mountExternalData){let x=[];for(let P of t.externalData){let V=typeof P=="string"?P:P.path;x.push(Qe(typeof P=="string"?P:P.data).then(ee=>{o.mountExternalData(V,ee)}))}await Promise.all(x)}for(let x of t?.executionProviders??[])if((typeof x=="string"?x:x.name)==="webnn"){if(o.shouldTransferToMLTensor=!1,typeof x!="string"){let V=x,ee=V?.context,b=V?.gpuDevice,Ee=V?.deviceType,te=V?.powerPreference;ee?o.currentContext=ee:b?o.currentContext=await o.webnnCreateMLContext(b):o.currentContext=await o.webnnCreateMLContext({deviceType:Ee,powerPreference:te})}else o.currentContext=await o.webnnCreateMLContext();break}d=await o._OrtCreateSession(s,f,c),o.webgpuOnCreateSession?.(d),d===0&&k("Can't create a session."),o.jsepOnCreateSession?.(),o.currentContext&&(o.webnnRegisterMLContext(d,o.currentContext),o.currentContext=void 0,o.shouldTransferToMLTensor=!0);let[w,y]=ba(d),T=!!t?.enableGraphCapture,O=[],D=[],W=[],A=[],I=[];for(let x=0;x<w;x++){let[P,V,ee]=lo(d,x);P===0&&k("Can't get an input name."),h.push(P);let b=o.UTF8ToString(P);O.push(b),W.push(V===0?{name:b,isTensor:!1}:{name:b,isTensor:!0,type:Ot(V),shape:ee})}for(let x=0;x<y;x++){let[P,V,ee]=lo(d,x+w);P===0&&k("Can't get an output name."),g.push(P);let b=o.UTF8ToString(P);D.push(b),A.push(V===0?{name:b,isTensor:!1}:{name:b,isTensor:!0,type:Ot(V),shape:ee})}return Ge.set(d,[d,h,g,null,T,!1]),[d,O,D,W,A]}catch(w){throw h.forEach(y=>o._OrtFree(y)),g.forEach(y=>o._OrtFree(y)),l!==0&&o._OrtReleaseBinding(l)!==0&&k("Can't release IO binding."),d!==0&&o._OrtReleaseSession(d)!==0&&k("Can't release session."),w}finally{o._free(s),c!==0&&o._OrtReleaseSessionOptions(c)!==0&&k("Can't release session options."),p.forEach(w=>o._free(w)),o.unmountExternalData?.()}},bt=n=>{let t=G(),s=Ge.get(n);if(!s)throw new Error(`cannot release session. invalid session id: ${n}`);let[f,o,d,c,l]=s;c&&(l&&t._OrtClearBoundOutputs(c.handle)!==0&&k("Can't clear bound outputs."),t._OrtReleaseBinding(c.handle)!==0&&k("Can't release IO binding.")),t.jsepOnReleaseSession?.(n),t.webnnOnReleaseSession?.(n),t.webgpuOnReleaseSession?.(n),o.forEach(p=>t._OrtFree(p)),d.forEach(p=>t._OrtFree(p)),t._OrtReleaseSession(f)!==0&&k("Can't release session."),Ge.delete(n)},po=async(n,t,s,f,o,d,c=!1)=>{if(!n){t.push(0);return}let l=G(),p=l.PTR_SIZE,h=n[0],g=n[1],w=n[3],y=w,T,O;if(h==="string"&&(w==="gpu-buffer"||w==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(c&&w!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${d} when enableGraphCapture is true.`);if(w==="gpu-buffer"){let A=n[2].gpuBuffer;O=We(ke(h),g);{let I=l.jsepRegisterBuffer;if(!I)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');T=I(f,d,A,O)}}else if(w==="ml-tensor"){let A=n[2].mlTensor;O=We(ke(h),g);let I=l.webnnRegisterMLTensor;if(!I)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');T=I(f,A,ke(h),g)}else{let A=n[2];if(Array.isArray(A)){O=p*A.length,T=l._malloc(O),s.push(T);for(let I=0;I<A.length;I++){if(typeof A[I]!="string")throw new TypeError(`tensor data at index ${I} is not a string`);l.setValue(T+I*p,ae(A[I],s),"*")}}else{let I=l.webnnIsGraphInput,H=l.webnnIsGraphOutput;if(h!=="string"&&I&&H){let x=l.UTF8ToString(o);if(I(f,x)||H(f,x)){let P=ke(h);O=We(P,g),y="ml-tensor";let V=l.webnnCreateTemporaryTensor,ee=l.webnnUploadTensor;if(!V||!ee)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let b=await V(f,P,g);ee(b,new Uint8Array(A.buffer,A.byteOffset,A.byteLength)),T=b}else O=A.byteLength,T=l._malloc(O),s.push(T),l.HEAPU8.set(new Uint8Array(A.buffer,A.byteOffset,O),T)}else O=A.byteLength,T=l._malloc(O),s.push(T),l.HEAPU8.set(new Uint8Array(A.buffer,A.byteOffset,O),T)}}let D=l.stackSave(),W=l.stackAlloc(4*g.length);try{g.forEach((I,H)=>l.setValue(W+H*p,I,p===4?"i32":"i64"));let A=l._OrtCreateTensor(ke(h),T,O,W,g.length,co(y));A===0&&k(`Can't create tensor for input/output. session=${f}, index=${d}.`),t.push(A)}finally{l.stackRestore(D)}},yt=async(n,t,s,f,o,d)=>{let c=G(),l=c.PTR_SIZE,p=Ge.get(n);if(!p)throw new Error(`cannot run inference. invalid session id: ${n}`);let h=p[0],g=p[1],w=p[2],y=p[3],T=p[4],O=p[5],D=t.length,W=f.length,A=0,I=[],H=[],x=[],P=[],V=[],ee=c.stackSave(),b=c.stackAlloc(D*l),Ee=c.stackAlloc(D*l),te=c.stackAlloc(W*l),fe=c.stackAlloc(W*l);try{[A,I]=oo(d),Ue("wasm prepareInputOutputTensor");for(let S=0;S<D;S++)await po(s[S],H,P,n,g[t[S]],t[S],T);for(let S=0;S<W;S++)await po(o[S],x,P,n,w[f[S]],D+f[S],T);xe("wasm prepareInputOutputTensor");for(let S=0;S<D;S++)c.setValue(b+S*l,H[S],"*"),c.setValue(Ee+S*l,g[t[S]],"*");for(let S=0;S<W;S++)c.setValue(te+S*l,x[S],"*"),c.setValue(fe+S*l,w[f[S]],"*");c.jsepOnRunStart?.(h),c.webnnOnRunStart?.(h);let q;q=await c._OrtRun(h,Ee,b,D,fe,W,te,A),q!==0&&k("failed to call OrtRun().");let oe=[],B=[];Ue("wasm ProcessOutputTensor");for(let S=0;S<W;S++){let ne=Number(c.getValue(te+S*l,"*"));if(ne===x[S]||V.includes(x[S])){oe.push(o[S]),ne!==x[S]&&c._OrtReleaseTensor(ne)!==0&&k("Can't release tensor.");continue}let me=c.stackSave(),J=c.stackAlloc(4*l),he=!1,$,Z=0;try{c._OrtGetTensorData(ne,J,J+l,J+2*l,J+3*l)!==0&&k(`Can't access output tensor data on index ${S}.`);let we=l===4?"i32":"i64",pe=Number(c.getValue(J,we));Z=c.getValue(J+l,"*");let He=c.getValue(J+l*2,"*"),be=Number(c.getValue(J+l*3,we)),ce=[];for(let Y=0;Y<be;Y++)ce.push(Number(c.getValue(He+Y*l,we)));c._OrtFree(He)!==0&&k("Can't free memory for tensor dims.");let ie=ce.reduce((Y,j)=>Y*j,1);$=Ot(pe);let Te=y?.outputPreferredLocations[f[S]];if($==="string"){if(Te==="gpu-buffer"||Te==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let Y=[];for(let j=0;j<ie;j++){let re=c.getValue(Z+j*l,"*"),N=c.getValue(Z+(j+1)*l,"*"),Fe=j===ie-1?void 0:N-re;Y.push(c.UTF8ToString(re,Fe))}oe.push([$,ce,Y,"cpu"])}else if(Te==="gpu-buffer"&&ie>0){let Y=c.jsepGetBuffer;if(!Y)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let j=Y(Z),re=We(pe,ie);if(re===void 0||!At($))throw new Error(`Unsupported data type: ${$}`);he=!0,oe.push([$,ce,{gpuBuffer:j,download:c.jsepCreateDownloader(j,re,$),dispose:()=>{c._OrtReleaseTensor(ne)!==0&&k("Can't release tensor.")}},"gpu-buffer"])}else if(Te==="ml-tensor"&&ie>0){let Y=c.webnnEnsureTensor,j=c.webnnIsGraphInputOutputTypeSupported;if(!Y||!j)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(We(pe,ie)===void 0||!It($))throw new Error(`Unsupported data type: ${$}`);if(!j(n,$,!1))throw new Error(`preferredLocation "ml-tensor" for ${$} output is not supported by current WebNN Context.`);let N=await Y(n,Z,pe,ce,!1);he=!0,oe.push([$,ce,{mlTensor:N,download:c.webnnCreateMLTensorDownloader(Z,$),dispose:()=>{c.webnnReleaseTensorId(Z),c._OrtReleaseTensor(ne)}},"ml-tensor"])}else if(Te==="ml-tensor-cpu-output"&&ie>0){let Y=c.webnnCreateMLTensorDownloader(Z,$)(),j=oe.length;he=!0,B.push((async()=>{let re=[j,await Y];return c.webnnReleaseTensorId(Z),c._OrtReleaseTensor(ne),re})()),oe.push([$,ce,[],"cpu"])}else{let Y=uo($),j=new Y(ie);new Uint8Array(j.buffer,j.byteOffset,j.byteLength).set(c.HEAPU8.subarray(Z,Z+j.byteLength)),oe.push([$,ce,j,"cpu"])}}finally{c.stackRestore(me),$==="string"&&Z&&c._free(Z),he||c._OrtReleaseTensor(ne)}}y&&!T&&(c._OrtClearBoundOutputs(y.handle)!==0&&k("Can't clear bound outputs."),Ge.set(n,[h,g,w,y,T,!1]));for(let[S,ne]of await Promise.all(B))oe[S][2]=ne;return xe("wasm ProcessOutputTensor"),oe}finally{c.webnnOnRunEnd?.(h),c.stackRestore(ee),H.forEach(q=>c._OrtReleaseTensor(q)),x.forEach(q=>c._OrtReleaseTensor(q)),P.forEach(q=>c._free(q)),A!==0&&c._OrtReleaseRunOptions(A),I.forEach(q=>c._free(q))}},gt=n=>{let t=G(),s=Ge.get(n);if(!s)throw new Error("invalid session id");let f=s[0],o=t._OrtEndProfiling(f);o===0&&k("Can't get an profile file name."),t._OrtFree(o)},Et=n=>{let t=[];for(let s of n){let f=s[2];!Array.isArray(f)&&"buffer"in f&&t.push(f.buffer)}return t}});var Re,ue,Ke,Lt,Pt,Bt,cn,ln,$e,ze,ga,mo,ho,wo,bo,yo,go,Eo,dn=F(()=>{"use strict";Oe();nn();Me();dt();Re=()=>!!z.wasm.proxy&&typeof document<"u",Ke=!1,Lt=!1,Pt=!1,ln=new Map,$e=(n,t)=>{let s=ln.get(n);s?s.push(t):ln.set(n,[t])},ze=()=>{if(Ke||!Lt||Pt||!ue)throw new Error("worker not ready")},ga=n=>{switch(n.data.type){case"init-wasm":Ke=!1,n.data.err?(Pt=!0,cn[1](n.data.err)):(Lt=!0,cn[0]()),Bt&&(URL.revokeObjectURL(Bt),Bt=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=ln.get(n.data.type);n.data.err?t.shift()[1](n.data.err):t.shift()[0](n.data.out);break}default:}},mo=async()=>{if(!Lt){if(Ke)throw new Error("multiple calls to 'initWasm()' detected.");if(Pt)throw new Error("previous call to 'initWasm()' failed.");if(Ke=!0,Re())return new Promise((n,t)=>{ue?.terminate(),to().then(([s,f])=>{try{ue=f,ue.onerror=d=>t(d),ue.onmessage=ga,cn=[n,t];let o={type:"init-wasm",in:z};!o.in.wasm.wasmPaths&&(s||on)&&(o.in.wasm.wasmPaths={wasm:new URL("ort-wasm-simd-threaded.wasm",import.meta.url).href}),ue.postMessage(o),Bt=s}catch(o){t(o)}},t)});try{await pt(z.wasm),await mt(z),Lt=!0}catch(n){throw Pt=!0,n}finally{Ke=!1}}},ho=async n=>{if(Re())return ze(),new Promise((t,s)=>{$e("init-ep",[t,s]);let f={type:"init-ep",in:{epName:n,env:z}};ue.postMessage(f)});await ht(z,n)},wo=async n=>Re()?(ze(),new Promise((t,s)=>{$e("copy-from",[t,s]);let f={type:"copy-from",in:{buffer:n}};ue.postMessage(f,[n.buffer])})):Xe(n),bo=async(n,t)=>{if(Re()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return ze(),new Promise((s,f)=>{$e("create",[s,f]);let o={type:"create",in:{model:n,options:{...t}}},d=[];n instanceof Uint8Array&&d.push(n.buffer),ue.postMessage(o,d)})}else return wt(n,t)},yo=async n=>{if(Re())return ze(),new Promise((t,s)=>{$e("release",[t,s]);let f={type:"release",in:n};ue.postMessage(f)});bt(n)},go=async(n,t,s,f,o,d)=>{if(Re()){if(s.some(c=>c[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(c=>c))throw new Error("pre-allocated output tensor is not supported for proxy.");return ze(),new Promise((c,l)=>{$e("run",[c,l]);let p=s,h={type:"run",in:{sessionId:n,inputIndices:t,inputs:p,outputIndices:f,options:d}};ue.postMessage(h,Et(p))})}else return yt(n,t,s,f,o,d)},Eo=async n=>{if(Re())return ze(),new Promise((t,s)=>{$e("end-profiling",[t,s]);let f={type:"end-profiling",in:n};ue.postMessage(f)});gt(n)}});var To,Ea,_t,So=F(()=>{"use strict";Oe();dn();un();lt();fn();To=(n,t)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[n.type,n.dims,{mlTensor:n.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${n.location} for ${t()}`)}},Ea=n=>{switch(n[3]){case"cpu":return new de(n[0],n[2],n[1]);case"gpu-buffer":{let t=n[0];if(!At(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:s,download:f,dispose:o}=n[2];return de.fromGpuBuffer(s,{dataType:t,dims:n[1],download:f,dispose:o})}case"ml-tensor":{let t=n[0];if(!It(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:s,download:f,dispose:o}=n[2];return de.fromMLTensor(s,{dataType:t,dims:n[1],download:f,dispose:o})}default:throw new Error(`invalid data location: ${n[3]}`)}},_t=class{async fetchModelAndCopyToWasmMemory(t){return wo(await Qe(t))}async loadModel(t,s){_e();let f;typeof t=="string"?f=await this.fetchModelAndCopyToWasmMemory(t):f=t,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await bo(f,s),De()}async dispose(){return yo(this.sessionId)}async run(t,s,f){_e();let o=[],d=[];Object.entries(t).forEach(y=>{let T=y[0],O=y[1],D=this.inputNames.indexOf(T);if(D===-1)throw new Error(`invalid input '${T}'`);o.push(O),d.push(D)});let c=[],l=[];Object.entries(s).forEach(y=>{let T=y[0],O=y[1],D=this.outputNames.indexOf(T);if(D===-1)throw new Error(`invalid output '${T}'`);c.push(O),l.push(D)});let p=o.map((y,T)=>To(y,()=>`input "${this.inputNames[d[T]]}"`)),h=c.map((y,T)=>y?To(y,()=>`output "${this.outputNames[l[T]]}"`):null),g=await go(this.sessionId,d,p,l,h,f),w={};for(let y=0;y<g.length;y++)w[this.outputNames[l[y]]]=c[y]??Ea(g[y]);return De(),w}startProfiling(){}endProfiling(){Eo(this.sessionId)}}});var Oo={};it(Oo,{OnnxruntimeWebAssemblyBackend:()=>Dt,initializeFlags:()=>vo,wasmBackend:()=>Ta});var vo,Dt,Ta,Ao=F(()=>{"use strict";Oe();dn();So();vo=()=>{(typeof z.wasm.initTimeout!="number"||z.wasm.initTimeout<0)&&(z.wasm.initTimeout=0);let n=z.wasm.simd;if(typeof n!="boolean"&&n!==void 0&&n!=="fixed"&&n!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${n}". Reset it to \`false\` and ignore SIMD feature checking.`),z.wasm.simd=!1),typeof z.wasm.proxy!="boolean"&&(z.wasm.proxy=!1),typeof z.wasm.trace!="boolean"&&(z.wasm.trace=!1),typeof z.wasm.numThreads!="number"||!Number.isInteger(z.wasm.numThreads)||z.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)z.wasm.numThreads=1;else{let t=typeof navigator>"u"?Jt("node:os").cpus().length:navigator.hardwareConcurrency;z.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Dt=class{async init(t){vo(),await mo(),await ho(t)}async createInferenceSessionHandler(t,s){let f=new _t;return await f.loadModel(t,s),f}},Ta=new Dt});Oe();Oe();Oe();var $r="1.24.0-dev.20251116-b39e144322";var su=tn;{let n=(Ao(),qt(Oo)).wasmBackend;Je("cpu",n,10),Je("wasm",n,10)}Object.defineProperty(z.versions,"web",{value:$r,enumerable:!0});export{ta as InferenceSession,Mr as TRACE,Ue as TRACE_EVENT_BEGIN,xe as TRACE_EVENT_END,_e as TRACE_FUNC_BEGIN,De as TRACE_FUNC_END,de as Tensor,su as default,z as env,Je as registerBackend};
//# sourceMappingURL=ort.wasm.bundle.min.mjs.map
