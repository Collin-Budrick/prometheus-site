import{t as k}from"./q-B9iggP75.js";import{A as Z,C as y,D as g,E as P,O as R,S as x,T as p,_ as f,a as ee,b as L,c as Se,d as ke,f as te,g as w,h as m,i as _e,k as N,l as H,m as ae,n as E,o as Ie,p as U,r as Le,s as Pe,t as J,u as Ce,v as s,w as Ae,x as Te,y as I}from"./q-DTQ0NQw_.js";import{partytownSnippet as $e}from"@builder.io/partytown/integration";import{eq as Re,gt as se}from"drizzle-orm";import{drizzle as qe}from"drizzle-orm/postgres-js";import Ee from"postgres";import{numeric as De,pgTable as ne,serial as le,text as F,timestamp as re}from"drizzle-orm/pg-core";const G=["en","ko"],W={en:"English",ko:"한국어"};let M="en",_,ie=()=>{if(_)return _;if(typeof document<"u"){const e=document.documentElement.lang;e&&e in W&&(_=e)}return _||(_=M),_};var Ne=e=>W[e]?e:(console.error(`unknown locale ${e}`),M);const Ue=e=>{ie=()=>_=Ne(e())};var Me=(e,a=[])=>{for(let t=0;typeof e=="object";t++){let n=e[a[t]]??e["*"];typeof n=="number"&&(n=e[n]),e=n}return typeof e=="string"?e.replace(/\$([\d$])/g,(t,n)=>n==="$"?"$":String(a[Number(n)-1]??"")):""},je=e=>e.map((a,t)=>`${t}${a.replace(/\$/g,()=>"$$")}`).join("$").slice(1);const ze="English",Oe={"Performance Lab":"Performance Lab",Home:"Home",Store:"Store",Chat:"Chat",AI:"AI","Performance first":"Performance first","Microscopic first load, big capability":"Microscopic first load, big capability","Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.":"Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.","- Ultra-thin home route with immutable caching":"- Ultra-thin home route with immutable caching","- Lazy feature routes for store, chat, and AI":"- Lazy feature routes for store, chat, and AI","- Optional Partytown for third-party isolation":"- Optional Partytown for third-party isolation","Latency budget":"Latency budget","Server render: sub-50ms target with streaming enabled":"Server render: sub-50ms target with streaming enabled","Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny":"Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny","Speculative nav: prerender store, prefetch chat":"Speculative nav: prerender store, prefetch chat","Sample adapter (offline)":"Sample adapter (offline)","Edge cache pack (offline)":"Edge cache pack (offline)","Invalid id.":"Invalid id.","Item not found.":"Item not found.","Unable to delete item right now.":"Unable to delete item right now.","Name and positive price required.":"Name and positive price required.","Unable to create item right now.":"Unable to create item right now.","Database offline: showing fallback inventory.":"Database offline: showing fallback inventory.","Unable to load inventory right now.":"Unable to load inventory right now.","Fast browsing with tiny payloads":"Fast browsing with tiny payloads",cached:"cached","Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Data only wakes up once the route is visible to keep initial payloads microscopic.":"Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Data only wakes up once the route is visible to keep initial payloads microscopic.",Inventory:"Inventory",Refresh:"Refresh","Showing fallback data while the database is unavailable.":"Showing fallback data while the database is unavailable.","Inventory loads once this section is visible.":"Inventory loads once this section is visible.","SKU $1":"SKU $1","Delete $1":"Delete $1",Delete:"Delete","No items yet.":"No items yet.","Load more":"Load more","Loading...":"Loading...","Add an item":"Add an item",Name:"Name","Lightweight widget":"Lightweight widget",Price:"Price","Saving...":"Saving...","Create item":"Create item","Added $1.":"Added $1.",Realtime:"Realtime","WebSocket chat via Valkey pub/sub":"WebSocket chat via Valkey pub/sub",websocket:"websocket","The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.":"The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.",Connected:"Connected","Connect to chat":"Connect to chat","No socket opened until you opt in.":"No socket opened until you opt in.","No messages yet.":"No messages yet.","Say something quick":"Say something quick",Send:"Send","AI tools":"AI tools","Edge-friendly utilities":"Edge-friendly utilities","This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.":"This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.","Type a quick prompt":"Type a quick prompt","Send to API":"Send to API","Response: $1":"Response: $1","Prometheus | Ultra-fast starter":"Prometheus | Ultra-fast starter","Qwik City + Bun + Valkey performance stack starter.":"Qwik City + Bun + Valkey performance stack starter.","Store | Prometheus":"Store | Prometheus","Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.":"Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.","Chat | Prometheus":"Chat | Prometheus","WebSocket chat backed by Valkey pub/sub.":"WebSocket chat backed by Valkey pub/sub.","AI | Prometheus":"AI | Prometheus","Minimal AI utility route hitting Bun API.":"Minimal AI utility route hitting Bun API."};var Ve={locale:"en",name:ze,translations:Oe};const Qe="한국어",Fe={"Performance Lab":"퍼포먼스 랩",Home:"홈",Store:"스토어",Chat:"채팅",AI:"AI","Performance first":"성능 우선","Microscopic first load, big capability":"초소형 첫 로드, 큰 역량","Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.":"Qwik City SSR은 셸을 가볍게 유지합니다. 브라우저가 View Transitions와 Speculation Rules를 지원하면 탐색이 강화되고, 서드파티 스크립트는 메인 스레드를 벗어납니다.","- Ultra-thin home route with immutable caching":"- 초경량 홈 라우트와 불변 캐싱","- Lazy feature routes for store, chat, and AI":"- 스토어, 채팅, AI를 위한 지연 로드 기능 라우트","- Optional Partytown for third-party isolation":"- 서드파티 격리를 위한 Partytown 선택 옵션","Latency budget":"레이턴시 예산","Server render: sub-50ms target with streaming enabled":"서버 렌더링: 스트리밍 사용 시 50ms 미만 목표","Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny":"크리티컬 CSS: UnoCSS + Lightning CSS로 페이로드를 최소화","Speculative nav: prerender store, prefetch chat":"추측 탐색: 스토어 프리렌더, 채팅 프리패치","Sample adapter (offline)":"샘플 어댑터(오프라인)","Edge cache pack (offline)":"엣지 캐시 팩(오프라인)","Invalid id.":"유효하지 않은 ID입니다.","Item not found.":"항목을 찾을 수 없습니다.","Unable to delete item right now.":"지금은 항목을 삭제할 수 없습니다.","Name and positive price required.":"이름과 양수 가격이 필요합니다.","Unable to create item right now.":"지금은 항목을 생성할 수 없습니다.","Database offline: showing fallback inventory.":"데이터베이스 오프라인: 대체 인벤토리를 표시합니다.","Unable to load inventory right now.":"지금은 인벤토리를 불러올 수 없습니다.","Fast browsing with tiny payloads":"초소형 페이로드로 빠른 탐색",cached:"캐시됨","Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Data only wakes up once the route is visible to keep initial payloads microscopic.":"항목은 Drizzle을 통해 Postgres에서 직접 스트리밍되며, 응답을 가볍게 유지하기 위해 커서 페이지네이션을 사용합니다. 데이터는 라우트가 보일 때만 깨어나 초기 페이로드를 극소화합니다.",Inventory:"인벤토리",Refresh:"새로고침","Showing fallback data while the database is unavailable.":"데이터베이스를 사용할 수 없어 대체 데이터를 표시합니다.","Inventory loads once this section is visible.":"이 섹션이 보일 때 인벤토리가 로드됩니다.","SKU $1":"SKU $1","Delete $1":"$1 삭제",Delete:"삭제","No items yet.":"아직 항목이 없습니다.","Load more":"더 불러오기","Loading...":"로딩 중...","Add an item":"항목 추가",Name:"이름","Lightweight widget":"경량 위젯",Price:"가격","Saving...":"저장 중...","Create item":"항목 만들기","Added $1.":"$1 추가됨.",Realtime:"실시간","WebSocket chat via Valkey pub/sub":"Valkey pub/sub 기반 WebSocket 채팅",websocket:"웹소켓","The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.":"클라이언트는 홈 라우트를 극소화하기 위해 탐색 후에만 로드됩니다. 실시간이 필요할 때까지 bfcache 자격을 유지하도록 필요 시 연결합니다. 메시지는 API의 Valkey 채널을 통해 브로드캐스트됩니다.",Connected:"연결됨","Connect to chat":"채팅에 연결","No socket opened until you opt in.":"동의하기 전에는 소켓을 열지 않습니다.","No messages yet.":"메시지가 아직 없습니다.","Say something quick":"간단히 입력하세요",Send:"보내기","AI tools":"AI 도구","Edge-friendly utilities":"엣지 친화적 유틸리티","This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.":"이 라우트는 상호작용을 단순하게 유지합니다. 추가 클라이언트 번들을 보내지 않고 Bun + Elysia를 테스트하는 왕복 에코 API입니다.","Type a quick prompt":"간단한 프롬프트를 입력하세요","Send to API":"API로 보내기","Response: $1":"응답: $1","Prometheus | Ultra-fast starter":"Prometheus | 초고속 스타터","Qwik City + Bun + Valkey performance stack starter.":"Qwik City + Bun + Valkey 성능 스택 스타터.","Store | Prometheus":"스토어 | Prometheus","Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.":"Drizzle 기반 스토어로 Postgres에서 커서 페이지네이션과 지연 로드를 사용해 불러옵니다.","Chat | Prometheus":"채팅 | Prometheus","WebSocket chat backed by Valkey pub/sub.":"Valkey pub/sub 기반 WebSocket 채팅.","AI | Prometheus":"AI | Prometheus","Minimal AI utility route hitting Bun API.":"Bun API를 호출하는 최소 AI 유틸리티 라우트."};var Ge={locale:"ko",fallback:"en",name:Qe,translations:Fe},Be={en:Ve,ko:Ge},He=(e,a,t)=>{let n,r;do n=Be[e],r=n.translations[a];while(!r&&(e=n.fallback));return r||(r=a),Me(r,t)},We=(e,...a)=>He(ie(),typeof e=="string"?e:je(e),a),l=We,B=e=>{if(!e)return;const a=e.trim();if(!a)return;const t=a.replace(/_/g,"-").toLowerCase(),n=t==="kr"?"ko":t,r=G.find(d=>d.toLowerCase()===n);if(r)return r;const i=n.split("-")[0];if(i)return G.find(d=>d.toLowerCase()===i)},Ye=e=>{if(!e)return;const a=e.split(",");for(const t of a){const n=t.split(";")[0],r=B(n);if(r)return r}};const Y=({queryLocale:e,cookieLocale:a,acceptLanguage:t})=>B(e)||B(a)||Ye(t)||M;var Ke=k({onRequest:()=>Je},1);const Je=({query:e,cookie:a,headers:t,locale:n})=>{const r=Y({queryLocale:e.get("locale"),cookieLocale:a.get("locale")?.value,acceptLanguage:t.get("accept-language")});e.has("locale")&&(a.delete("locale"),a.set("locale",r,{})),n(r)};var Xe=new Set(["style","font","document"]);const Ze=(e,a,t)=>{const n=new Set;return Array.from(e??[]).filter(r=>{if(r.rel!=="preload")return!0;if(a)return!1;const i=r.href,d=r.as;return typeof i!="string"||i.trim().length===0||t&&!t.has(i)||typeof d!="string"||!Xe.has(d)||n.has(i)?!1:(n.add(i),!0)})};var A={rel:"preload",href:"/assets/critical.css",as:"style",crossOrigin:"anonymous"},T=e=>({rel:"preload",href:e||"/",as:"document"}),oe=[{pattern:/^\/$/,links:[T("/"),A]},{pattern:/^\/store(?:\/|$)/,links:[T("/store"),A]},{pattern:/^\/chat(?:\/|$)/,links:[T("/chat"),A]},{pattern:/^\/ai(?:\/|$)/,links:[T("/ai"),A]}];const et=(e,a)=>{if(a)return[];const t=oe.find(({pattern:n})=>n.test(e));return t?[...t.links]:[T(e),A]},tt=new Set(oe.flatMap(({links:e})=>e.map(a=>a.href)));var at=()=>{const e=H(),a=Y({queryLocale:e.url.searchParams.get("locale"),cookieLocale:typeof document<"u"?document.cookie.split(";").map(n=>n.trim()).find(n=>n.startsWith("locale="))?.split("=")[1]:void 0,acceptLanguage:typeof navigator<"u"?navigator.languages?.join(",")||navigator.language:void 0}),t=n=>{const r=new URLSearchParams(e.url.search);r.set("locale",n);const i=r.toString();return`${e.url.pathname}${i?`?${i}`:""}`};return s("div",null,{class:"flex items-center gap-1 text-xs"},G.map(n=>{const r=n===a;return s("a",{href:t(n),"aria-disabled":r,class:["rounded-full border px-2 py-1 transition-colors",r?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 pointer-events-none":"border-slate-700 text-slate-300 hover:text-emerald-200 hover:border-emerald-500/40"].join(" ")},null,W[n]??n.toUpperCase(),1,n)}),1,"mU_0")};const st=y(p(at,"s_00eYrYyi6VA"));var nt=(e,a)=>e===void 0?a:typeof e=="boolean"?e:e==="1"||e.toLowerCase()==="true",V=(e,a)=>nt(e,a&&!0);const $={speculationRules:V(void 0,!0),viewTransitions:V(void 0,!0),partytown:V(void 0,!0)};var Q=e=>{const a=typeof import.meta<"u"&&{BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!0}[e];if(a!==void 0)return a;if(typeof process<"u")return process.env?.[e]??process.env?.[e.replace(/^VITE_/,"")]},b={gaId:Q("VITE_GTAG_ID"),adsClient:Q("VITE_ADSENSE_CLIENT"),supportWidgetSrc:Q("VITE_SUPPORT_WIDGET_SRC")},ce=[{id:"gtag",label:"Google Analytics 4",category:"analytics",src:b.gaId?`https://www.googletagmanager.com/gtag/js?id=${b.gaId}`:void 0,inline:b.gaId?`window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', '${b.gaId}', { transport_type: 'beacon', send_page_view: true });`:void 0,forward:["dataLayer.push","gtag"],attributes:{async:!0,"data-gtm-id":b.gaId},budgetKb:90,load:"defer",partytown:!0,fallback:"Falls back to async tag when Partytown is disabled.",when:!!b.gaId},{id:"adsense",label:"Google AdSense",category:"ads",src:b.adsClient?`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${b.adsClient}`:void 0,forward:["adsbygoogle.push"],attributes:{async:!0,"data-ad-client":b.adsClient,crossOrigin:"anonymous"},budgetKb:95,load:"idle",partytown:!0,fallback:"Loads on idle/timeout when Partytown is off to avoid blocking hydration.",when:!!b.adsClient},{id:"support-widget",label:"Support chat widget",category:"widget",src:b.supportWidgetSrc,budgetKb:120,load:"interaction",partytown:!1,fallback:"Injected after user input, idle callback, or 5s timeout.",when:!!b.supportWidgetSrc}];const D=ce.filter(e=>e.when),Ia=Array.from(new Set(ce.flatMap(e=>e.forward??[])));var lt=(e,a)=>`(()=>{const url='${a}';let loaded=false;const load=()=>{if(loaded||!url)return;loaded=true;const s=document.createElement('script');s.src=url;s.async=true;s.dataset.thirdParty='${e}';document.body.appendChild(s);};const prime=()=>{load();cleanup();};const cleanup=()=>events.forEach((event)=>window.removeEventListener(event,prime,opts));const events=['pointerdown','keydown','touchstart','focusin'];const opts={once:true,passive:true};events.forEach((event)=>window.addEventListener(event,prime,opts));if('requestIdleCallback'in window){requestIdleCallback(()=>prime(),{timeout:5000});}else{setTimeout(prime,5000);}setTimeout(load,8000);})();`,rt=()=>{const e=D.some(t=>t.partytown),a=$.partytown?Array.from(new Set(D.flatMap(t=>t.forward??[]))):[];return D.length?f(U,{children:[$.partytown&&e&&s("script",{dangerouslySetInnerHTML:$e({lib:"/~partytown/",forward:a})},null,null,3,"dH_0"),D.map(t=>{if(!t.src&&!t.inline)return null;const n=t.attributes??{};if(t.partytown&&$.partytown)return f(U,{children:[t.src&&I("script",{type:"text/partytown",...n,get src(){return t.src},src:x(t,"src")},{type:m},0,"dH_1"),t.inline&&I("script",{type:"text/partytown",...n,get dangerouslySetInnerHTML(){return t.inline},dangerouslySetInnerHTML:x(t,"inline")},{type:m},0,"dH_2")]},1,t.id);if(t.load==="interaction"&&t.src)return s("script",{dangerouslySetInnerHTML:lt(t.id,t.src)},null,null,3,`${t.id}-loader`);const r=t.load==="defer"?{defer:!0}:{async:!0};return f(U,{children:[t.src&&I("script",{...n,...r,get src(){return t.src},src:x(t,"src")},null,0,"dH_3"),t.inline&&I("script",{...n,...r,get dangerouslySetInnerHTML(){return t.inline},dangerouslySetInnerHTML:x(t,"inline")},null,0,"dH_4")]},1,t.id)})]},1,"dH_5"):null};const it=y(p(rt,"s_mLjU5QE56DA"));var ot=".route-transition{view-transition-name:route;contain:paint}",ct=k({RouterHead:()=>de,_auto_speculationCandidates:()=>K,_auto_toSpeculationRules:()=>ue,default:()=>pt},1),K=[{url:"/store",action:"prerender"},{url:"/chat",action:"prefetch"}],ue=e=>{const a=K.filter(({url:t})=>t!==e).reduce((t,n)=>(t[n.action].push({source:"list",urls:[n.url]}),t),{prefetch:[],prerender:[]});return a.prefetch.length||a.prerender.length?a:null},ut=()=>{const e=Se(),a=H(),t=$.speculationRules&&!0,n=t?ue(a.url.pathname):null,r=et(a.url.pathname,!1),i=new Set([...tt,...r.map(o=>o.href)]),d=Ze([...e.links,...r],!1,i),c=!1,u=t&&n?`(()=>{try{if(navigator.connection?.saveData)return;if(!HTMLScriptElement.supports?.('speculationrules'))return;const payload=${JSON.stringify(n)};const script=document.createElement('script');script.type='speculationrules';script.textContent=JSON.stringify(payload);document.head.append(script);}catch{}})();`:void 0;return f(U,{children:[s("title",null,null,e.title||"Prometheus",1,null),s("meta",null,{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"},null,3,null),s("link",null,{rel:"canonical",href:w(o=>o.url.href,[a],"p0.url.href")},null,3,null),s("link",null,{rel:"stylesheet",href:"/assets/critical.css"},null,3,null),e.meta.map(o=>I("meta",{...o},null,0,o.key)),d.map(o=>I("link",{...o},null,0,o.key)),t&&K.filter(({url:o})=>o!==a.url.pathname).map(({url:o,action:v})=>s("link",{rel:v,href:o},null,null,3,`${v}:${o}`)),e.styles.map(o=>I("style",{...o.props,get dangerouslySetInnerHTML(){return o.style},dangerouslySetInnerHTML:x(o,"style")},null,0,o.key)),u&&s("script",{dangerouslySetInnerHTML:u},null,null,3,"qG_0"),$.viewTransitions&&s("script",null,{dangerouslySetInnerHTML:"if ('startViewTransition' in document) {document.documentElement.classList.add('supports-view-transition');}"},null,3,"qG_1"),f(it,null,3,"qG_2"),c]},1,"qG_4")};const de=y(p(ut,"s_0ZAFccQi4aM"));var dt=()=>(R(p(ot,"s_ovuN5RMiUy0")),s("div",null,{class:"min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950"},[s("header",null,{class:"sticky top-0 z-20 border-b border-slate-800 bg-slate-950/80 backdrop-blur"},s("nav",null,{class:"mx-auto flex max-w-5xl items-center justify-between px-4 py-3 text-sm font-medium"},[s("div",null,{class:"flex items-center gap-2"},[s("span",null,{class:"rounded-full bg-emerald-500/10 px-3 py-1 text-emerald-300"},"Prometheus",3,null),s("span",null,{class:"text-slate-400"},l`Performance Lab`,1,null)],1,null),s("div",null,{class:"flex items-center gap-4 text-slate-200"},[f(E,{href:"/",class:"hover:text-emerald-300 transition-colors",children:l`Home`,[m]:{href:m,class:m}},1,"qG_5"),f(E,{href:"/store","data-speculate":"prefetch",class:"hover:text-emerald-300 transition-colors",children:l`Store`,[m]:{href:m,"data-speculate":m,class:m}},1,"qG_6"),f(E,{href:"/chat","data-speculate":"prefetch",class:"hover:text-emerald-300 transition-colors",children:l`Chat`,[m]:{href:m,"data-speculate":m,class:m}},1,"qG_7"),f(E,{href:"/ai",class:"hover:text-emerald-300 transition-colors",children:l`AI`,[m]:{href:m,class:m}},1,"qG_8"),f(st,null,3,"qG_9")],1,null)],1,null),1,null),s("main",null,{class:"mx-auto flex max-w-5xl flex-col gap-6 px-4 py-10 route-transition"},f(ae,null,3,"qG_10"),1,null)],1,"qG_11")),pt=y(p(dt,"s_wqKL2Up903o")),mt=".home-grid{gap:1.5rem;display:grid}@media (width>=768px){.home-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}",ht=k({default:()=>me,head:()=>he,onGet:()=>pe},1);const pe=({cacheControl:e})=>{e({public:!0,maxAge:900})};var ft=()=>(R(p(mt,"s_RIE80aAOC7Q")),s("section",null,{class:"home-grid"},[s("div",null,{class:"p-6 surface"},[s("p",null,{class:"text-emerald-300 text-sm uppercase tracking-wide"},l`Performance first`,1,null),s("h1",null,{class:"mt-2 font-semibold text-slate-50 text-3xl"},l`Microscopic first load, big capability`,1,null),s("p",null,{class:"mt-4 text-slate-300"},l`Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.`,1,null),s("div",null,{class:"gap-3 grid mt-6 text-slate-200 text-sm"},[s("div",null,{class:"flex items-center gap-2"},l`- Ultra-thin home route with immutable caching`,1,null),s("div",null,{class:"flex items-center gap-2"},l`- Lazy feature routes for store, chat, and AI`,1,null),s("div",null,{class:"flex items-center gap-2"},l`- Optional Partytown for third-party isolation`,1,null)],1,null)],1,null),s("div",null,{class:"p-6 text-slate-200 text-sm surface"},[s("h2",null,{class:"font-semibold text-slate-50 text-lg"},l`Latency budget`,1,null),s("ul",null,{class:"space-y-2 mt-3"},[s("li",null,null,l`Server render: sub-50ms target with streaming enabled`,1,null),s("li",null,null,l`Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny`,1,null),s("li",null,null,l`Speculative nav: prerender store, prefetch chat`,1,null)],1,null)],1,null)],1,"FW_0")),me=y(p(ft,"s_e7mxYERDQJw"));const he=({withLocale:e})=>e(()=>({title:l`Prometheus | Ultra-fast starter`,meta:[{name:"description",content:l`Qwik City + Bun + Valkey performance stack starter.`}]}));var gt=k({default:()=>me,head:()=>he,onGet:()=>pe},1),vt=".ai-island{margin-top:1rem}",yt=async()=>{const[e,a]=P();if(!e.value)return;const t=await fetch("/api/ai/echo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e.value})});if(t.ok){const{echo:n}=await t.json();a.value=n}},bt=()=>{const e=g(""),a=g(""),t=p(yt,"s_rGtr6P02y5w",[e,a]);return s("div",null,{class:"ai-island space-y-3 text-sm text-slate-200"},[s("textarea",null,{value:w(n=>n.value,[e],"p0.value"),class:"w-full rounded-lg border border-slate-800 bg-slate-900 px-3 py-2",placeholder:l`Type a quick prompt`,rows:4,onInput$:L("s_YrRlW66gD5Y",[e])},null,3,null),s("div",null,{class:"flex items-center gap-2"},[s("button",null,{type:"button",class:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-950",onClick$:t},l`Send to API`,1,null),a.value&&s("span",null,{class:"text-emerald-300"},l`Response: ${a.value}`,1,"9W_0")],1,null)],1,"9W_1")};const wt=y(p(bt,"s_6AcQXlwaGPM"));var xt=k({default:()=>kt,head:()=>_t},1),St=()=>(R(p(vt,"s_S5uQY9BGXbM")),s("section",null,{class:"surface p-6"},[s("p",null,{class:"text-sm uppercase tracking-wide text-emerald-300"},l`AI tools`,1,null),s("h1",null,{class:"text-2xl font-semibold text-slate-50"},l`Edge-friendly utilities`,1,null),s("p",null,{class:"mt-3 max-w-2xl text-sm text-slate-300"},l`This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.`,1,null),f(wt,{"on:qvisible":!0,[m]:{"on:qvisible":m}},3,"gn_0")],1,"gn_1")),kt=y(p(St,"s_X8xIQqUjebE"));const _t=({withLocale:e})=>e(()=>({title:l`AI | Prometheus`,meta:[{name:"description",content:l`Minimal AI utility route hitting Bun API.`}]}));var It=".chat-island{margin-top:1.25rem}.chat-messages{max-height:16rem}",Lt=({cleanup:e})=>{const[a,t,n]=P()},Pt=()=>{const[e,a]=P();!e.value||!a.value||(a.value.send(JSON.stringify({type:"chat",text:e.value})),e.value="")},Ct=()=>{const e=g([]),a=g(null),t=g(""),n=g(!1);N(p(Lt,"s_QOX90pOt9sA",[e,n,a]),{eagerness:"visible"});const r=p(Pt,"s_0P85XrqKCfY",[t,a]);return s("div",null,{class:"chat-island"},[s("div",null,{class:"mt-4 flex items-center gap-3"},[s("button",null,{type:"button",class:"rounded-lg bg-slate-800 px-3 py-2 text-sm text-slate-100 ring-1 ring-slate-700 transition hover:bg-slate-700",disabled:w(i=>i.value,[n],"p0.value"),onClick$:L("s_DoKYoyvM41g",[n])},n.value?l`Connected`:l`Connect to chat`,1,null),!n.value&&s("span",null,{class:"text-xs text-slate-400"},l`No socket opened until you opt in.`,1,"Ki_0")],1,null),s("div",null,{class:"mt-5 space-y-3 text-sm text-slate-200"},[s("div",null,{class:"surface chat-messages overflow-auto p-4"},[e.value.length===0&&s("p",null,{class:"text-slate-500"},l`No messages yet.`,1,"Ki_1"),e.value.map(i=>s("div",null,{class:"py-1"},[s("span",null,{class:"text-slate-400"},[x(i,"from"),":"],1,null)," ",s("span",null,null,x(i,"text"),1,null)],1,i.id))],1,null),s("div",null,{class:"flex gap-2"},[s("input",null,{value:w(i=>i.value,[t],"p0.value"),class:"w-full rounded-lg border border-slate-800 bg-slate-900 px-3 py-2 text-slate-100",placeholder:l`Say something quick`,onInput$:L("s_hgk47q7YSmg",[t])},null,3,null),s("button",null,{type:"button",class:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-950",onClick$:r},l`Send`,1,null)],1,null)],1,null)],1,"Ki_2")};const At=y(p(Ct,"s_54i2tFOIwmo"));var Tt=k({default:()=>Rt,head:()=>qt},1),$t=()=>(R(p(It,"s_hNgJ6QruKFA")),s("section",null,{class:"surface p-6"},[s("div",null,{class:"flex items-center justify-between gap-2"},[s("div",null,null,[s("p",null,{class:"text-sm uppercase tracking-wide text-emerald-300"},l`Realtime`,1,null),s("h1",null,{class:"text-2xl font-semibold text-slate-50"},l`WebSocket chat via Valkey pub/sub`,1,null)],1,null),s("span",null,{class:"rounded-full bg-slate-800 px-3 py-1 text-xs text-slate-200"},l`websocket`,1,null)],1,null),s("p",null,{class:"mt-3 max-w-2xl text-sm text-slate-300"},l`The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.`,1,null),f(At,{"on:qvisible":!0,[m]:{"on:qvisible":m}},3,"TX_0")],1,"TX_1")),Rt=y(p($t,"s_uFxaifyy6KQ"));const qt=({withLocale:e})=>e(()=>({title:l`Chat | Prometheus`,meta:[{name:"description",content:l`WebSocket chat backed by Valkey pub/sub.`}]}));var Et=process.env.DATABASE_URL??`postgresql://${process.env.POSTGRES_USER??"prometheus"}:${process.env.POSTGRES_PASSWORD??"secret"}@${process.env.POSTGRES_HOST??"localhost"}:${process.env.POSTGRES_PORT??5433}/${process.env.POSTGRES_DB??"prometheus"}`,Dt=process.env.POSTGRES_SSL==="true"?"require":!1;const Nt=Ee(Et,{max:5,ssl:Dt}),j=qe({client:Nt}),S=ne("store_items",{id:le("id").primaryKey(),name:F("name").notNull(),price:De("price",{precision:10,scale:2}).notNull(),createdAt:re("created_at",{mode:"date",withTimezone:!1}).defaultNow()}),La=ne("chat_messages",{id:le("id").primaryKey(),author:F("author").notNull(),body:F("body").notNull(),createdAt:re("created_at",{mode:"date",withTimezone:!1}).defaultNow()});var fe=e=>{const a=Number.parseFloat(String(e.price));return{id:e.id,name:e.name,price:Number.isFinite(a)?a:0}};const Ut=({cacheControl:e})=>{e({public:!0,maxAge:300,sMaxAge:900,staleWhileRevalidate:60})};var ge=async e=>{const t=Number.isFinite(e)&&(e??0)>0?Number(e):0,n=j.select().from(S),r=t>0?n.where(se(S.id,t)):n;try{const i=(await r.orderBy(S.id).limit(6)).map(fe);return{items:i,cursor:i.length===6?i[i.length-1].id:null,source:"db"}}catch(i){return console.error("Failed to load store items",i),{items:[{id:-1,name:l`Sample adapter (offline)`,price:24.99},{id:-2,name:l`Edge cache pack (offline)`,price:12.5}],cursor:null,source:"fallback"}}},Mt=Te(async e=>ge(e),"o0FSe7O5kbg");const jt=Pe(p(Mt,"s_o0FSe7O5kbg"));var zt=async()=>ge();const ve=Ie(p(zt,"s_v669J74jz24"));var Ot=async e=>{const a=Number.parseInt(String(e.id??""),10);if(!Number.isFinite(a)||a<=0)return{success:!1,error:l`Invalid id.`};try{const[t]=await j.delete(S).where(Re(S.id,a)).returning();return t?{success:!0,id:a}:{success:!1,error:l`Item not found.`}}catch(t){return console.error("Failed to delete store item",t),{success:!1,error:l`Unable to delete item right now.`}}};const ye=ee(p(Ot,"s_R9VLNISWb6o"));var Vt=async e=>{const a=String(e.name??"").trim(),t=Number.parseFloat(String(e.price??""));if(!a||Number.isNaN(t)||t<=0)return{success:!1,error:l`Name and positive price required.`};try{const[n]=await j.insert(S).values({name:a,price:t.toString()}).returning();return{success:!0,item:fe(n)}}catch(n){return console.error("Failed to create store item",n),{success:!1,error:l`Unable to create item right now.`}}};const be=ee(p(Vt,"s_nexPpNJs6FU"));var we=(e,a)=>e[a]?e:{...e,[a]:!0},xe=(e,a)=>{if(!e[a])return e;const t={...e};return delete t[a],t},Qt=async(e=!1)=>{const[a,t,n,r,i,d,c]=P();if(!d.value){d.value=!0,t.value=null;try{const u=await jt(e?void 0:a.value??void 0),o=u?.items??[],v=e?o:[...i.value,...o];c(()=>{i.value=v}),a.value=u?.cursor??null,r.value=u?.source==="fallback",n.value=!0,t.value=u?.source==="fallback"?l`Database offline: showing fallback inventory.`:null}catch(u){console.error("Failed to load store items",u),t.value=l`Unable to load inventory right now.`}finally{d.value=!1}}},Ft=()=>{const[e,a]=P();e.value||a(!0)},Gt=({track:e})=>{const[a,t,n,r,i,d,c]=P(),u=e(()=>a.value);if(u?.success&&u.item){const o=[...d.value.filter(v=>v.id!==u.item.id),u.item];o.sort((v,q)=>v.id-q.id),i.value?c(()=>{d.value=o}):(t.value=we(t.value,u.item.id),d.value=o,setTimeout(()=>{t.value=xe(t.value,u.item.id)},320)),r.value=!0,n.value=null}},Bt=({track:e})=>{const[a,t,n,r,i,d]=P(),c=e(()=>a.value);c?.success&&c.id?(r.value?d(()=>{i.value=i.value.filter(u=>u.id!==c.id)}):(n.value=we(n.value,c.id),setTimeout(()=>{i.value=i.value.filter(u=>u.id!==c.id),n.value=xe(n.value,c.id)},260)),t.value=null):c?.error&&(t.value=c.error)},Ht=()=>{const e=ve(),a=g(e.value.items),t=g(e.value.cursor),n=g(!1),r=g(e.value.items.length>0),i=g(e.value.source==="fallback"),d=g(e.value.source==="fallback"?l`Database offline: showing fallback inventory.`:null),c=be(),u=ye(),o=g(!1),v=g({}),q=g({});Z(L("s_AuJpa7ZJr0s",[o]));const z=h=>{if(typeof document<"u"&&"startViewTransition"in document){document.startViewTransition?.(h);return}h()},O=p(Qt,"s_69ywUjDxRgU",[t,d,r,i,a,n,z]);return N(p(Ft,"s_h70dBAjCmqY",[r,O]),{eagerness:"visible"}),N(p(Gt,"s_fap9umrX08E",[c,v,d,r,o,a,z])),N(p(Bt,"s_ESNIfCDtZ0Q",[u,d,q,o,a,z])),s("div",null,{class:"gap-4 grid md:grid-cols-[1.2fr_1fr] bg-slate-900/60 mt-5 p-4 border border-slate-800 rounded-lg"},[s("div",null,{class:"space-y-4"},[s("div",null,{class:"flex justify-between items-center"},[s("p",null,{class:"text-slate-300 text-sm"},l`Inventory`,1,null),s("button",null,{type:"button",class:"bg-slate-800 hover:bg-slate-700 disabled:opacity-60 px-3 py-2 rounded-lg ring-1 ring-slate-700 font-semibold text-slate-100 text-xs transition",disabled:w(h=>h.value,[n],"p0.value"),onClick$:L("s_DM6GWHW8dls",[O])},l`Refresh`,1,null)],1,null),i.value&&s("p",null,{class:"text-amber-300 text-xs"},l`Showing fallback data while the database is unavailable.`,1,"YL_0"),!r.value&&s("p",null,{class:"text-slate-500 text-sm"},l`Inventory loads once this section is visible.`,1,"YL_1"),d.value&&s("p",null,{class:"text-rose-300 text-sm"},w(h=>h.value,[d],"p0.value"),3,"YL_2"),a.value.length?s("ul",null,{class:"gap-3 grid md:grid-cols-2",style:{viewTransitionName:"store-grid"}},a.value.map(h=>s("li",{class:["surface space-y-2 p-4",!o.value&&v.value[h.id]?"store-item-entering":"",!o.value&&q.value[h.id]?"store-item-exiting":""].filter(Boolean).join(" "),style:{viewTransitionName:`store-item-${h.id}`}},null,[s("div",null,{class:"flex justify-between items-start gap-3"},[s("div",null,null,[s("p",null,{class:"text-slate-400 text-sm"},l`SKU ${h.id}`,1,null),s("p",null,{class:"font-semibold text-slate-50 text-lg"},x(h,"name"),1,null)],1,null),f(J,{action:u,class:"shrink-0",children:[s("input",{value:x(h,"id")},{type:"hidden",name:"id"},null,3,null),s("button",{disabled:u.isRunning||h.id<=0,"aria-label":l`Delete ${h.name}`},{type:"submit",class:"hover:bg-rose-500/10 disabled:opacity-60 px-2 py-1 rounded-md ring-1 ring-slate-700 hover:ring-rose-500 text-slate-400 hover:text-rose-200 text-xs transition"},l`Delete`,1,null)],[m]:{action:m,class:m}},1,"YL_3")],1,null),s("p",null,{class:"text-emerald-300"},["$",h.price.toFixed(2)],1,null)],1,h.id)),1,"YL_4"):r.value&&!n.value&&s("p",null,{class:"text-slate-500 text-sm"},l`No items yet.`,1,"YL_5"),s("div",null,{class:"flex items-center gap-3"},[t.value!==null&&s("button",null,{type:"button",class:"bg-emerald-500 hover:bg-emerald-400 disabled:opacity-60 px-4 py-2 rounded-lg font-semibold text-emerald-950 text-sm transition",disabled:w(h=>h.value,[n],"p0.value"),onClick$:L("s_isBUq7NOKTw",[O])},l`Load more`,1,"YL_6"),n.value&&s("span",null,{class:"text-slate-400 text-xs"},l`Loading...`,1,"YL_7")],1,null)],1,null),s("div",null,{class:"space-y-3 bg-slate-900/80 p-4 border border-slate-800 rounded-lg"},[s("p",null,{class:"font-semibold text-slate-100 text-sm"},l`Add an item`,1,null),f(J,{action:c,class:"space-y-3 text-slate-200 text-sm",children:[s("div",null,{class:"space-y-1"},[s("label",null,{class:"text-slate-400 text-xs uppercase tracking-wide",for:"name"},l`Name`,1,null),s("input",null,{id:"name",name:"name",class:"bg-slate-950 px-3 py-2 border border-slate-800 rounded-lg w-full text-slate-100",placeholder:l`Lightweight widget`,required:!0},null,3,null)],1,null),s("div",null,{class:"space-y-1"},[s("label",null,{class:"text-slate-400 text-xs uppercase tracking-wide",for:"price"},l`Price`,1,null),s("input",null,{id:"price",name:"price",type:"number",step:"0.01",min:"0",class:"bg-slate-950 px-3 py-2 border border-slate-800 rounded-lg w-full text-slate-100",placeholder:"24.99",required:!0},null,3,null)],1,null),s("button",null,{type:"submit",class:"bg-emerald-500 hover:bg-emerald-400 disabled:opacity-70 px-4 py-2 rounded-lg w-full font-semibold text-emerald-950 text-sm transition",disabled:w(h=>h.isRunning,[c],"p0.isRunning")},c.isRunning?l`Saving...`:l`Create item`,1,null),c.value?.error&&s("p",null,{class:"text-rose-300 text-xs"},w(h=>h.value.error,[c],"p0.value.error"),3,"YL_8"),c.value?.success&&c.value.item&&s("p",null,{class:"text-emerald-300 text-xs"},l`Added ${c.value.item.name}.`,1,"YL_9")],[m]:{action:m,class:m}},1,"YL_10")],1,null)],1,"YL_11")};const Wt=y(p(Ht,"s_2aWAOZ0c5GI"));var Yt=".store-item-entering{transform-origin:top;animation:.26s ease-out both store-item-enter}.store-item-exiting{transform-origin:top;animation:.24s ease-in both store-item-exit}@keyframes store-item-enter{0%{opacity:0;transform:translateY(6px)scale(.99)}to{opacity:1;transform:translateY(0)scale(1)}}@keyframes store-item-exit{0%{opacity:1;transform:translateY(0)scale(1)}to{opacity:0;transform:translateY(-6px)scale(.98)}}",Kt=k({default:()=>Xt,head:()=>Zt,onGet:()=>Ut,useCreateStoreItem:()=>be,useDeleteStoreItem:()=>ye,useStoreItemsLoader:()=>ve},1),Jt=()=>(R(p(Yt,"s_cOQoV5jD0Q4")),s("section",null,{class:"p-6 surface"},[s("div",null,{class:"flex justify-between items-center gap-2"},[s("div",null,null,[s("p",null,{class:"text-emerald-300 text-sm uppercase tracking-wide"},l`Store`,1,null),s("h1",null,{class:"font-semibold text-slate-50 text-2xl"},l`Fast browsing with tiny payloads`,1,null)],1,null),s("span",null,{class:"bg-slate-800 px-3 py-1 rounded-full text-slate-200 text-xs"},l`cached`,1,null)],1,null),s("p",null,{class:"mt-3 max-w-2xl text-slate-300 text-sm"},l`Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Data only wakes up once the route is visible to keep initial payloads microscopic.`,1,null),f(Wt,{"on:qvisible":!0,[m]:{"on:qvisible":m}},3,"3h_0")],1,"3h_1")),Xt=y(p(Jt,"s_bZ8kc5UlLx4"));const Zt=({withLocale:e})=>e(()=>({title:l`Store | Prometheus`,meta:[{name:"description",content:l`Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.`}]}));var ea=k({onGet:()=>ta},1);const ta=async({cacheControl:e,query:a,json:t})=>{e({public:!0,maxAge:300,sMaxAge:900,staleWhileRevalidate:60});const n=Number.parseInt(a.get("limit")??"",10),r=Number.parseInt(a.get("cursor")??"",10),i=Number.isFinite(n)&&n>0?Math.min(n,50):10,d=Number.isFinite(r)&&r>0?r:0;try{const c=j.select().from(S),u=(await(d>0?c.where(se(S.id,d)):c).orderBy(S.id).limit(i)).map(o=>({...o,price:Number.parseFloat(String(o.price))}));t(200,{items:u,cursor:u.length===i?u[u.length-1].id:null})}catch(c){console.error("Failed to load store items",c),t(500,{error:"Unable to load items right now."})}},aa=[Ke];var C=()=>ct;const sa=[["/",[C,()=>gt],"/",["q-CnK5OTSm.js","q-C_6DJSs2.js"]],["ai",[C,()=>xt],"/ai",["q-CnK5OTSm.js","q-x9Idfs8p.js"]],["chat",[C,()=>Tt],"/chat",["q-CnK5OTSm.js","q-D81LJCuM.js"]],["index",[C,()=>ht],"/index",["q-CnK5OTSm.js","q-CBRodD_w.js"]],["store",[C,()=>Kt],"/store",["q-CnK5OTSm.js","q-BU4_ULbi.js"]],["api/store/items",[C,()=>ea],"/api/store/items",["q-CnK5OTSm.js"]]],na=[];var la={routes:sa,serverPlugins:aa,menus:na,trailingSlash:!1,basePathname:"/",cacheModules:!0},ra=({serverData:e})=>`/build${`/${e.locale}`}`,ia=()=>{Ue(()=>Ae(M))},oa=()=>{const e=H();return Z(L("s_TVD7erg9zpo",[g(e.url.href),e])),f(ae,null,3,"Dv_0")};const ca=y(p(oa,"s_w6dmeDadJmA"));var ua={};globalThis.__EXPERIMENTAL__=ua;var da=()=>f(Le,{children:[s("head",null,null,[s("meta",null,{charSet:"utf-8"},null,3,null),f(de,null,3,"xd_0")],1,null),s("body",null,{class:"app-shell"},f(ca,{children:f(_e,null,3,"xd_1")},1,"xd_2"),1,null)]},1,"xd_3"),pa=y(p(da,"s_8txvw3enrrU"));ia();var ma=e=>{const a=typeof e.base=="function"?e.base(e):e.base;return a?a.endsWith("/")?a:`${a}/`:"/build/"},X=e=>!!e&&typeof e=="object"&&"manifest"in e,ha=e=>{const a=e.serverData?.locale;if(a)return a;let t=null;const n=e.serverData?.url;if(n)try{t=new URL(n).searchParams.get("locale")}catch{t=null}const r=e.serverData?.requestHeaders?.["accept-language"]??void 0;return Y({queryLocale:t,acceptLanguage:r})};function fa(e){const a=e.manifest??te,t=X(a)?a.manifest:a,n=ha(e),r={...e.serverData,locale:n},i=ma({...e,base:ra,serverData:r}),d=`${i}${t?.qwikLoader??"qwikloader.js"}`,c={...e.containerAttributes,lang:n,"q:locale":n},o={tag:"script",location:"head",attributes:{"data-qwik-lazy-loader":"1",dangerouslySetInnerHTML:`(function(){const src='${d}';if(!src)return;let started=false;const load=()=>{if(started||navigator.connection?.saveData)return;started=true;const s=document.createElement('script');s.type='module';s.defer=true;s.src=src;s.setAttribute('data-qwik-loader','lazy');document.head.appendChild(s);};const prime=()=>{load();cleanup();};const cleanup=()=>triggers.forEach((event)=>document.removeEventListener(event,prime,listenerOpts));const triggers=['pointerdown','keydown','touchstart','focusin'];const listenerOpts={once:true,passive:true};triggers.forEach((event)=>document.addEventListener(event,prime,listenerOpts));document.addEventListener('visibilitychange',()=>{if(document.visibilityState==='visible')prime();},{once:true});})();`}},v=t?X(a)?{...a,manifest:{...t,core:void 0,preloader:void 0,injections:[...t?.injections??[],o]}}:{...t,core:void 0,preloader:void 0,injections:[...t?.injections??[],o]}:a;return ke(f(pa,null,3,"CC_0"),{...e,base:i,serverData:r,manifest:v,qwikLoader:"never",preloader:!1,containerTagName:"html",containerAttributes:c,stream:e.stream??{static:{buffer:0},inOrder:["<html"]}})}var{router:ga,notFound:va}=Ce({render:fa,qwikCityPlan:la,manifest:te}),Pa={router:ga,notFound:va};export{Pa as default,va as notFound,ga as router};
