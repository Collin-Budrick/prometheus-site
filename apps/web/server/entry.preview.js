import{t as m}from"./q-B9iggP75.js";import{C as I,S as d,_ as g,a as L,b as u,c as q,d as A,f as r,g as v,h as e,i as T,l as b,m as i,n as P,o as Q,p,r as j,s as M,t as x,u as E,v as h,x as y,y as c}from"./q-Dt9giLZ3.js";var U=new Set(["style","script","fetch","image","worker"]);const R=(t,a)=>{const n=new Set;return Array.from(t??[]).filter(s=>{if(s.rel!=="preload")return!0;if(a)return!1;const o=s.href,l=s.as;return typeof o!="string"||o.trim().length===0||typeof l!="string"||!U.has(l)||l==="font"||n.has(o)?!1:(n.add(o),!0)})};var F=m({RouterHead:()=>_,default:()=>J},1),H=()=>{const t=L(),a=Q(),n=R(t.links,!1),s=!1,o="(()=>{try{if(navigator.connection?.saveData)return;if(!HTMLScriptElement.supports?.('speculationrules'))return;const seen=new Set();const install=(kind,href)=>{if(!href||seen.has(href))return;seen.add(href);const script=document.createElement('script');script.type='speculationrules';script.textContent=JSON.stringify({[kind]:[{source:'list',urls:[href]}]});document.head.append(script);};const queue=(kind,href)=>{const run=()=>install(kind,href);(self.requestIdleCallback||((cb)=>setTimeout(cb,600)))(run,{timeout:900});};document.querySelectorAll('[data-speculate]').forEach((link)=>{const href=link.getAttribute('href');const kind=link.getAttribute('data-speculate')||'prefetch';if(!href)return;const prime=()=>install(kind,href);link.addEventListener('pointerdown',prime,{once:true});link.addEventListener('focus',prime,{once:true});link.addEventListener('mouseenter',()=>queue(kind,href),{once:true});});}catch{}})();";return i(E,{children:[e("title",null,null,t.title||"Prometheus",1,null),e("meta",null,{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"},null,3,null),e("link",null,{rel:"canonical",href:p(l=>l.url.href,[a],"p0.url.href")},null,3,null),t.meta.map(l=>v("meta",{...l},null,0,l.key)),n.map(l=>v("link",{...l},null,0,l.key)),t.styles.map(l=>v("style",{...l.props,get dangerouslySetInnerHTML(){return l.style},dangerouslySetInnerHTML:h(l,"style")},null,0,l.key)),o&&e("script",{dangerouslySetInnerHTML:o},null,null,3,"qG_0"),e("script",null,{dangerouslySetInnerHTML:"if ('startViewTransition' in document) {document.documentElement.classList.add('supports-view-transition');}"},null,3,null),s]},1,"qG_2")};const _=c(u(H,"s_0ZAFccQi4aM"));var G=()=>e("div",null,{class:"min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950"},[e("header",null,{class:"sticky top-0 z-20 border-b border-slate-800 bg-slate-950/80 backdrop-blur"},e("nav",null,{class:"mx-auto flex max-w-5xl items-center justify-between px-4 py-3 text-sm font-medium"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"rounded-full bg-emerald-500/10 px-3 py-1 text-emerald-300"},"Prometheus",3,null),e("span",null,{class:"text-slate-400"},"Performance Lab",3,null)],3,null),e("div",null,{class:"flex items-center gap-4 text-slate-200"},[i(x,{href:"/",class:"hover:text-emerald-300 transition-colors",children:"Home",[r]:{href:r,class:r}},3,"qG_3"),i(x,{href:"/store","data-speculate":"prefetch",class:"hover:text-emerald-300 transition-colors",children:"Store",[r]:{href:r,"data-speculate":r,class:r}},3,"qG_4"),i(x,{href:"/chat","data-speculate":"prefetch",class:"hover:text-emerald-300 transition-colors",children:"Chat",[r]:{href:r,"data-speculate":r,class:r}},3,"qG_5"),i(x,{href:"/ai",class:"hover:text-emerald-300 transition-colors",children:"AI",[r]:{href:r,class:r}},3,"qG_6")],1,null)],1,null),1,null),e("main",null,{class:"mx-auto flex max-w-5xl flex-col gap-6 px-4 py-10 route-transition"},i(A,null,3,"qG_7"),1,null)],1,"qG_8"),J=c(u(G,"s_wqKL2Up903o")),B=m({default:()=>w,head:()=>S,onGet:()=>k},1);const k=({cacheControl:t})=>{t({public:!0,maxAge:900})};var $=()=>e("section",null,{class:"gap-6 grid md:grid-cols-2"},[e("div",null,{class:"p-6 surface"},[e("p",null,{class:"text-emerald-300 text-sm uppercase tracking-wide"},"Performance first",3,null),e("h1",null,{class:"mt-2 font-semibold text-slate-50 text-3xl"},"Microscopic first load, big capability",3,null),e("p",null,{class:"mt-4 text-slate-300"},"Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.",3,null),e("div",null,{class:"gap-3 grid mt-6 text-slate-200 text-sm"},[e("div",null,{class:"flex items-center gap-2"},"- Ultra-thin home route with immutable caching",3,null),e("div",null,{class:"flex items-center gap-2"},"- Lazy feature routes for store, chat, and AI",3,null),e("div",null,{class:"flex items-center gap-2"},"- Optional Partytown for third-party isolation",3,null)],3,null)],3,null),e("div",null,{class:"p-6 text-slate-200 text-sm surface"},[e("h2",null,{class:"font-semibold text-slate-50 text-lg"},"Latency budget",3,null),e("ul",null,{class:"space-y-2 mt-3"},[e("li",null,null,"Server render: sub-50ms target with streaming enabled",3,null),e("li",null,null,"Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny",3,null),e("li",null,null,"Speculative nav: prerender store, prefetch chat",3,null)],3,null)],3,null)],3,"FW_0"),w=c(u($,"s_e7mxYERDQJw"));const S={title:"Prometheus | Ultra-fast starter",meta:[{name:"description",content:"Qwik City + Bun + Valkey performance stack starter."}]};var K=m({default:()=>w,head:()=>S,onGet:()=>k},1),X=m({default:()=>O,head:()=>V},1),Z=async()=>{const[t,a]=y();if(!t.value)return;const n=await fetch("/api/ai/echo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t.value})});if(n.ok){const{echo:s}=await n.json();a.value=s}},N=()=>{const t=d(""),a=d(""),n=u(Z,"s_IeTPFYT6ASQ",[t,a]);return e("section",null,{class:"surface p-6"},[e("p",null,{class:"text-sm uppercase tracking-wide text-emerald-300"},"AI tools",3,null),e("h1",null,{class:"text-2xl font-semibold text-slate-50"},"Edge-friendly utilities",3,null),e("p",null,{class:"mt-3 max-w-2xl text-sm text-slate-300"},"This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.",3,null),e("div",null,{class:"mt-4 space-y-3 text-sm text-slate-200"},[e("textarea",null,{value:p(s=>s.value,[t],"p0.value"),class:"w-full rounded-lg border border-slate-800 bg-slate-900 px-3 py-2",placeholder:"Type a quick prompt",rows:4,onInput$:g("s_LABJ4QOQ7gI",[t])},null,3,null),e("div",null,{class:"flex items-center gap-2"},[e("button",null,{type:"button",class:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-950",onClick$:n},"Send to API",3,null),a.value&&e("span",null,{class:"text-emerald-300"},["Response: ",p(s=>s.value,[a],"p0.value")],3,"gn_0")],1,null)],1,null)],1,"gn_1")},O=c(u(N,"s_X8xIQqUjebE"));const V={title:"AI | Prometheus",meta:[{name:"description",content:"Minimal AI utility route hitting Bun API."}]};var Y=m({default:()=>ee,head:()=>te},1),z=({cleanup:t})=>{const[a,n,s]=y()},D=()=>{const[t,a]=y();!t.value||!a.value||(a.value.send(JSON.stringify({type:"chat",text:t.value})),t.value="")},W=()=>{const t=d([]),a=d(null),n=d(""),s=d(!1);I(u(z,"s_IJ05ZFgM0H4",[t,s,a]),{eagerness:"visible"});const o=u(D,"s_ub0KtQnLT0Q",[n,a]);return e("section",null,{class:"surface p-6"},[e("div",null,{class:"flex items-center justify-between gap-2"},[e("div",null,null,[e("p",null,{class:"text-sm uppercase tracking-wide text-emerald-300"},"Realtime",3,null),e("h1",null,{class:"text-2xl font-semibold text-slate-50"},"WebSocket chat via Valkey pub/sub",3,null)],3,null),e("span",null,{class:"rounded-full bg-slate-800 px-3 py-1 text-xs text-slate-200"},"websocket",3,null)],3,null),e("p",null,{class:"mt-3 max-w-2xl text-sm text-slate-300"},"The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.",3,null),e("div",null,{class:"mt-4 flex items-center gap-3"},[e("button",null,{type:"button",class:"rounded-lg bg-slate-800 px-3 py-2 text-sm text-slate-100 ring-1 ring-slate-700 transition hover:bg-slate-700",disabled:p(l=>l.value,[s],"p0.value"),onClick$:g("s_kZj4pe9s4wU",[s])},p(l=>l.value?"Connected":"Connect to chat",[s],'p0.value?"Connected":"Connect to chat"'),3,null),!s.value&&e("span",null,{class:"text-xs text-slate-400"},"No socket opened until you opt in.",3,"TX_0")],1,null),e("div",null,{class:"mt-5 space-y-3 text-sm text-slate-200"},[e("div",null,{class:"surface max-h-64 overflow-auto p-4"},[t.value.length===0&&e("p",null,{class:"text-slate-500"},"No messages yet.",3,"TX_1"),t.value.map(l=>e("div",null,{class:"py-1"},[e("span",null,{class:"text-slate-400"},[h(l,"from"),":"],1,null)," ",e("span",null,null,h(l,"text"),1,null)],1,l.id))],1,null),e("div",null,{class:"flex gap-2"},[e("input",null,{value:p(l=>l.value,[n],"p0.value"),class:"w-full rounded-lg border border-slate-800 bg-slate-900 px-3 py-2 text-slate-100",placeholder:"Say something quick",onInput$:g("s_wKLih1EFcnc",[n])},null,3,null),e("button",null,{type:"button",class:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-950",onClick$:o},"Send",3,null)],3,null)],1,null)],1,"TX_2")},ee=c(u(W,"s_uFxaifyy6KQ"));const te={title:"Chat | Prometheus",meta:[{name:"description",content:"WebSocket chat backed by Valkey pub/sub."}]};var le=m({default:()=>re,head:()=>ue,onGet:()=>se,useStoreItems:()=>C},1);const se=({cacheControl:t})=>{t({public:!0,maxAge:300,sMaxAge:900,staleWhileRevalidate:60})};var ae=async({url:t})=>{const a=new URL("/api/store/items",t);a.searchParams.set("limit","5");try{const n=await fetch(a);if(!n.ok)return[];const s=await n.json();return Array.isArray(s)?s:s&&typeof s=="object"&&Array.isArray(s.items)?s.items:[]}catch(n){return console.error("Failed to load store items",n),[]}};const C=T(u(ae,"s_tSKeMBJBXZ8"));var ne=()=>{const t=C();return e("section",null,{class:"surface p-6"},[e("div",null,{class:"flex items-center justify-between gap-2"},[e("div",null,null,[e("p",null,{class:"text-sm uppercase tracking-wide text-emerald-300"},"Store",3,null),e("h1",null,{class:"text-2xl font-semibold text-slate-50"},"Fast browsing with tiny payloads",3,null)],3,null),e("span",null,{class:"rounded-full bg-slate-800 px-3 py-1 text-xs text-slate-200"},"cached",3,null)],3,null),e("p",null,{class:"mt-3 max-w-2xl text-sm text-slate-300"},"Items stream from the Bun API and cache in Valkey. Cursor pagination keeps responses lean while staying resilient to large catalogs.",3,null),t.value.length?e("ul",null,{class:"mt-6 grid gap-3 md:grid-cols-2"},t.value.map(a=>e("li",null,{class:"surface p-4"},[e("p",null,{class:"text-sm text-slate-400"},["SKU ",h(a,"id")],1,null),e("p",null,{class:"text-lg font-semibold text-slate-50"},h(a,"name"),1,null),e("p",null,{class:"text-emerald-300"},["$",a.price.toFixed(2)],1,null)],1,a.id)),1,"3h_0"):e("p",null,{class:"mt-4 text-slate-400"},"Inventory is warming up. Check back in a moment.",3,null)],1,"3h_1")},re=c(u(ne,"s_bZ8kc5UlLx4"));const ue={title:"Store | Prometheus",meta:[{name:"description",content:"Valkey-cached store with cursor pagination."}]},ie=[];var f=()=>F;const oe=[["/",[f,()=>K],"/",["q-Cmp6I4p0.js","q-Dzp_kRSW.js"]],["ai",[f,()=>X],"/ai",["q-Cmp6I4p0.js","q-BYbAU4IU.js"]],["chat",[f,()=>Y],"/chat",["q-Cmp6I4p0.js","q-C291HJXJ.js"]],["index",[f,()=>B],"/index",["q-Cmp6I4p0.js","q-CsPYJ8Yg.js"]],["store",[f,()=>le],"/store",["q-Cmp6I4p0.js","q-BzFXa11E.js"]]],ce=[];var de={routes:oe,serverPlugins:ie,menus:ce,trailingSlash:!1,basePathname:"/",cacheModules:!0},pe={};globalThis.__EXPERIMENTAL__=pe;var me=()=>i(P,{children:[e("head",null,null,[e("meta",null,{charSet:"utf-8"},null,3,null),i(_,null,3,"xd_0")],1,null),e("body",null,{class:"app-shell"},i(j,null,3,"xd_1"),1,null)]},1,"xd_2"),fe=c(u(me,"s_8txvw3enrrU"));function he(t){return q(i(fe,null,3,"CC_0"),{...t,manifest:t.manifest??b,containerTagName:"html",stream:t.stream??{static:{buffer:0},inOrder:["<html"]}})}var{router:xe,notFound:ve}=M({render:he,qwikCityPlan:de,manifest:b}),be={router:xe,notFound:ve};export{be as default,ve as notFound,xe as router};
