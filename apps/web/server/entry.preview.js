import{createRequire as Pu}from"node:module";import{getNotFound as Tu}from"./@qwik-city-not-found-paths.js";import{isStaticPath as Fi}from"./@qwik-city-static-paths.js";import{createReadStream as Cu}from"node:fs";import{basename as ku,extname as qu,join as jr}from"node:path";import{fileURLToPath as Nu}from"node:url";import{Http2ServerRequest as Au}from"node:http2";import{ReadableStream as Eu,TextDecoderStream as Iu,TextEncoderStream as Lu,WritableStream as Ru}from"node:stream/web";import{FormData as Du,Headers as Ou,Request as Bu,Response as zu,fetch as Qu}from"undici";import Mu from"crypto";import{partytownSnippet as ju}from"@qwik.dev/partytown/integration";import Wr from"postgres";import{numeric as Fu,pgTable as Ya,serial as Xa,text as cs,timestamp as Za}from"drizzle-orm/pg-core";var Ui=Object.defineProperty,dt=(e,t)=>{let r={};for(var n in e)Ui(r,n,{get:e[n],enumerable:!0});return t&&Ui(r,Symbol.toStringTag,{value:"Module"}),r},Lt=Pu(import.meta.url);function Gn(e,t){let r="Server Error";return t!=null&&(typeof t.message=="string"?r=t.message:r=String(t)),"<html>"+Uu(e,r)+"</html>"}function Uu(e,t){typeof e!="number"&&(e=500),typeof t=="string"?t=Wu(t):t="";const r=typeof t=="string"?"600px":"300px",n=e>=500?Ju:Hu;return`
<head>
  <meta charset="utf-8">
  <meta http-equiv="Status" content="${e}">
  <title>${e} ${t}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { color: ${n}; background-color: #fafafa; padding: 30px; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Roboto, sans-serif; }
    p { max-width: ${r}; margin: 60px auto 30px auto; background: white; border-radius: 4px; box-shadow: 0px 0px 50px -20px ${n}; overflow: hidden; }
    strong { display: inline-block; padding: 15px; background: ${n}; color: white; }
    span { display: inline-block; padding: 15px; }
  </style>
</head>
<body><p><strong>${e}</strong> <span>${t}</span></p></body>
`}var Vu=/[&<>]/g,Wu=e=>e.replace(Vu,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return""}}),Hu="#006ce9",Ju="#713fc2",Ku={lax:"Lax",Lax:"Lax",None:"None",none:"None",strict:"Strict",Strict:"Strict"},Gu={seconds:1,minutes:60,hours:3600,days:3600*24,weeks:3600*24*7},Vi=(e,t,r)=>{const n=[`${e}=${t}`];typeof r.domain=="string"&&n.push(`Domain=${r.domain}`),typeof r.maxAge=="number"?n.push(`Max-Age=${r.maxAge}`):Array.isArray(r.maxAge)?n.push(`Max-Age=${r.maxAge[0]*Gu[r.maxAge[1]]}`):typeof r.expires=="number"||typeof r.expires=="string"?n.push(`Expires=${r.expires}`):r.expires instanceof Date&&n.push(`Expires=${r.expires.toUTCString()}`),r.httpOnly&&n.push("HttpOnly"),typeof r.path=="string"&&n.push(`Path=${r.path}`);const s=Xu(r.sameSite);return s&&n.push(`SameSite=${s}`),r.secure&&n.push("Secure"),n.join("; ")};function Wi(e){try{return decodeURIComponent(e)}catch{return e}}var Yu=e=>{const t={};if(typeof e=="string"&&e!==""){const r=e.split(";");for(const n of r){const s=n.indexOf("=");s!==-1&&(t[Wi(n.slice(0,s).trim())]=Wi(n.slice(s+1).trim()))}}return t};function Xu(e){if(e===!0)return"Strict";if(e===!1)return"None";if(e)return Ku[e]}var Rt=Symbol("request-cookies"),Fr=Symbol("response-cookies"),Xe=Symbol("live-cookies"),Zu=class{[Rt];[Fr]={};[Xe]={};appendCounter=0;constructor(e){this[Rt]=Yu(e),this[Xe]={...this[Rt]}}get(e,t=!0){const r=this[t?Xe:Rt][e];return r?{value:r,json(){return JSON.parse(r)},number(){return Number(r)}}:null}getAll(e=!0){return Object.keys(this[e?Xe:Rt]).reduce((t,r)=>(t[r]=this.get(r),t),{})}has(e,t=!0){return!!this[t?Xe:Rt][e]}set(e,t,r={}){this[Xe][e]=typeof t=="string"?t:JSON.stringify(t);const n=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[Fr][e]=Vi(e,n,r)}append(e,t,r={}){this[Xe][e]=typeof t=="string"?t:JSON.stringify(t);const n=typeof t=="string"?t:encodeURIComponent(JSON.stringify(t));this[Fr][++this.appendCounter]=Vi(e,n,r)}delete(e,t){this.set(e,"deleted",{...t,maxAge:0}),this[Xe][e]=null}headers(){return Object.values(this[Fr])}},Yr=class extends Error{constructor(e,t){super(typeof t=="string"?t:void 0),this.status=e,this.data=t}},xn=class{},Qs=class extends xn{},eo=class extends xn{constructor(e){super(),this.pathname=e}},Hi=new WeakMap,Ji="qaction",ed="qfunc",Ki="qdata";function td(e,t){return to(e,Xi(e),Gi(e),t,Xi(t),Gi(t))}function to(e,t,r,n,s,i){if(n.startsWith("/build/"))return null;let a=null;for(;t<r;){const o=e.charCodeAt(t++),l=n.charCodeAt(s++);if(o===91){const c=ro(e,t),d=t+(c?3:0),u=Yn(e,d,r,93),h=e.substring(d,u),p=Yn(e,u+1,r,47),v=e.substring(u+1,p);t=u+1;const y=s-1;if(c){const x=nd(h,v,n,y,i,e,t+v.length+1,r);if(x)return Object.assign(a||(a={}),x)}const m=Yn(n,y,i,47,v);if(m==-1)return null;const $=n.substring(y,m);if(!c&&!v&&!$)return null;s=m,(a||(a={}))[h]=decodeURIComponent($)}else if(o!==l&&!(isNaN(l)&&rd(e,t)))return null}return Yi(e,t)&&Yi(n,s)?a||{}:null}function rd(e,t){return e.charCodeAt(t)===91&&ro(e,t+1)}function Gi(e){const t=e.length;return t>1&&e.charCodeAt(t-1)===47?t-1:t}function Yi(e,t){const r=e.length;return t>=r||t==r-1&&e.charCodeAt(t)===47}function Xi(e){return e.charCodeAt(0)===47?1:0}function ro(e,t){return e.charCodeAt(t)===46&&e.charCodeAt(t+1)===46&&e.charCodeAt(t+2)===46}function Yn(e,t,r,n,s=""){for(;t<r&&e.charCodeAt(t)!==n;)t++;const i=s.length;for(let a=0;a<i;a++)if(e.charCodeAt(t-i+a)!==s.charCodeAt(a))return-1;return t-i}function nd(e,t,r,n,s,i,a,o){r.charCodeAt(n)===47&&n++;let l=s;const c=t+"/";for(;l>=n;){const d=to(i,a,o,r,l,s);if(d){let h=r.substring(n,Math.min(l,s));return h.endsWith(c)&&(h=h.substring(0,h.length-c.length)),d[e]=decodeURIComponent(h),d}const u=sd(r,n,c,l,n-1)+c.length;if(l===u)break;l=u}return null}function sd(e,t,r,n,s){let i=e.lastIndexOf(r,n);return i==n-r.length&&(i=e.lastIndexOf(r,n-r.length-1)),i>t?i:s}var id=async(e,t,r,n,s)=>{if(!Array.isArray(e))return null;for(const i of e){const a=i[0],o=td(a,n);if(!o)continue;const l=i[1],c=i[3],d=new Array(l.length),u=[];l.forEach((p,v)=>{Zi(p,u,y=>d[v]=y,r)});let h;return s||Zi(ad(t,n),u,p=>h=p?.default,r),u.length>0&&await Promise.all(u),[a,o,d,h,c]}return null},Zi=(e,t,r,n)=>{if(typeof e=="function"){const s=Hi.get(e);if(s)r(s);else{const i=e();typeof i.then=="function"?t.push(i.then(a=>{n!==!1&&Hi.set(e,a),r(a)})):i&&r(i)}}},ad=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const r=e.find(n=>n[0]===t||t.startsWith(n[0]));if(r)return r[1]}},od=e=>e&&typeof e.then=="function";function ld(e){const t=[];return e==="day"?e=3600*24:e==="week"?e=3600*24*7:e==="month"?e=3600*24*30:e==="year"?e=3600*24*365:e==="private"?e={private:!0,noCache:!0}:e==="immutable"?e={public:!0,immutable:!0,maxAge:3600*24*365}:e==="no-cache"&&(e={noCache:!0}),typeof e=="number"&&(e={maxAge:e,sMaxAge:e}),e.immutable&&t.push("immutable"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push("no-store"),e.noCache&&t.push("no-cache"),e.private&&t.push("private"),e.public&&t.push("public"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),e.staleIfError&&t.push(`stale-if-error=${e.staleIfError}`),t.join(", ")}var Xr;import("node:async_hooks").then(e=>{const t=e.AsyncLocalStorage;Xr=new t,globalThis.qcAsyncRequestStore=Xr}).catch(e=>{console.warn("AsyncLocalStorage not available, continuing without it. This might impact concurrent server calls.",e)});function cd(e,t,r,n,s=!0,i="/",a){let o;const l=new Promise(d=>o=d),c=dd(e,t,r,s,i,a,o);return{response:l,requestEv:c,completion:Xr?Xr.run(c,ea,c,n,o):ea(c,n,o)}}async function ea(e,t,r){try{(a=>new URL(a.pathname+a.search,a))(e.originalUrl)}catch{const a="Resource Not Found";e.status(404);const o=Gn(404,a);return e.html(404,o),new Yr(404,a)}let n=1;async function s(){try{await e.next()}catch(i){if(i instanceof Qs)await e.getWritableStream().close();else if(i instanceof eo){if(n>50)throw new Error("Infinite rewrite loop");n+=1;const a=new URL(e.url);a.pathname=i.pathname;const{loadedRoute:o,requestHandlers:l}=await t(a);return e.resetRoute(o,l,a),await s()}else if(i instanceof Yr){if(!e.headersSent){const a=i.status,o=e.request.headers.get("Accept");if(o&&!o.includes("text/html")){const l=e[kr];e.headers.set("Content-Type","application/qwik-json"),e.send(a,await l._serializeData(i.data,!0))}else{const l=Gn(i.status,i.data);e.html(a,l)}}}else if(!(i instanceof xn)){if(Tn(e)!=="dev")try{e.headersSent||(e.headers.set("content-type","text/html; charset=utf-8"),e.cacheControl({noCache:!0}),e.status(500));const a=e.getWritableStream();if(!a.locked){const o=a.getWriter();await o.write(Cn.encode(Gn(500,"Internal Server Error"))),await o.close()}}catch{console.error("Unable to render error page")}return i}}}try{return await s()}finally{e.isDirty()||r(null)}}function us(e,t){const r=e.endsWith(Gt);if(r){const n=e.length-Gt.length+(t?1:0);e=e.slice(0,n),e===""&&(e="/")}return{pathname:e,isInternal:r}}var Ms="@isQData",Gt="/q-data.json",no=Symbol("RequestEvLoaders"),so=Symbol("RequestEvMode"),io=Symbol("RequestEvRoute"),kr=Symbol("RequestEvQwikSerializer"),ao=Symbol("RequestEvTrailingSlash"),oo="@routeName",_n="@actionId",lo="@actionFormData",ud="@nonce",co="@rewrite";function dd(e,t,r,n,s,i,a){const{request:o,platform:l,env:c}=e,d=new Map,u=new Zu(o.headers.get("cookie")),h=new Headers,p=new URL(o.url),{pathname:v,isInternal:y}=us(p.pathname,n);y&&(p.pathname=v,d.set(Ms,!0));let m=-1,$=null,x,b=e.locale,T=200;const k=async()=>{for(m++;m<r.length;){const C=r[m],q=globalThis.qcAsyncRequestStore,R=q?.run?q.run(Q,C,Q):C(Q);od(R)&&await R,m++}},S=(C,q,R=p)=>{t=C,r=q,p.pathname=R.pathname,p.search=R.search,m=-1},_=()=>{if($!==null)throw new Error("Response already sent")},A=(C,q)=>{if(_(),typeof C=="number"){T=C;const R=Q.getWritableStream().getWriter();R.write(typeof q=="string"?Cn.encode(q):q),R.close()}else if(T=C.status,C.headers.forEach((R,U)=>{U.toLowerCase()!=="set-cookie"&&h.append(U,R)}),C.headers.getSetCookie().forEach(R=>{const U=R.indexOf("=");if(U===-1)return;const Z=R.slice(0,U).trim(),le=R.slice(U+1).trim();u.set(Z,le)}),C.body){const R=Q.getWritableStream();C.body.pipeTo(R)}else Q.getWritableStream().getWriter().close();return O()},O=()=>(m=Xn,new xn),B={},Q={[no]:B,[so]:e.mode,[ao]:n,get[io](){return t},[kr]:i,cookie:u,headers:h,env:c,method:o.method,signal:o.signal,originalUrl:new URL(p),get params(){return t?.[1]??{}},get pathname(){return p.pathname},platform:l,get query(){return p.searchParams},request:o,url:p,basePathname:s,sharedMap:d,get headersSent(){return $!==null},get exited(){return m>=Xn},get clientConn(){return e.getClientConn()},next:k,resetRoute:S,exit:O,cacheControl:(C,q="Cache-Control")=>{_(),h.set(q,ld(C))},resolveValue:(async C=>{const q=C.__id;if(C.__brand==="server_loader"&&!(q in B))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");return B[q]}),status:C=>typeof C=="number"?(_(),T=C,C):T,locale:C=>(typeof C=="string"&&(b=C),b||""),error:(C,q)=>(T=C,h.delete("Cache-Control"),new Yr(C,q)),redirect:(C,q)=>{if(_(),T=C,q){if(/([^:])\/{2,}/.test(q)){const R=q.replace(/([^:])\/{2,}/g,"$1/");console.warn(`Redirect URL ${q} is invalid, fixing to ${R}`),q=R}h.set("Location",q)}return h.delete("Cache-Control"),C>301&&h.set("Cache-Control","no-store"),m=Xn,new Qs},rewrite:C=>{if(_(),C.startsWith("http"))throw new Error("Rewrite does not support absolute urls");return d.set(co,!0),new eo(C.replace(/\/+/g,"/"))},defer:C=>typeof C=="function"?C:()=>C,fail:(C,q)=>(_(),T=C,h.delete("Cache-Control"),{failed:!0,...q}),text:(C,q)=>(h.set("Content-Type","text/plain; charset=utf-8"),A(C,q)),html:(C,q)=>(h.set("Content-Type","text/html; charset=utf-8"),A(C,q)),parseBody:async()=>x!==void 0?x:x=hd(Q,d,i),json:(C,q)=>(h.set("Content-Type","application/json; charset=utf-8"),A(C,JSON.stringify(q))),send:A,isDirty:()=>$!==null,getWritableStream:()=>{if($===null){if(e.mode==="dev"){const C=d.get("@serverTiming");C&&h.set("Server-Timing",C.map(q=>`${q[0]};dur=${q[1]}`).join(","))}$=e.getWritableStream(T,h,u,a,Q)}return $}};return Object.freeze(Q)}function Pn(e){return e[no]}function js(e){return e[ao]}function fd(e){return e[io]}function Tn(e){return e[so]}var Xn=Number.MAX_SAFE_INTEGER,hd=async({request:e,method:t,query:r},n,s)=>{var i;const a=((i=e.headers.get("content-type"))==null?void 0:i.split(/[;,]/,1)[0].trim())??"";if(a==="application/x-www-form-urlencoded"||a==="multipart/form-data"){const o=await e.formData();return n.set(lo,o),pd(o)}else{if(a==="application/json")return await e.json();if(a==="application/qwik-json"){if(t==="GET"&&r.has(Ki)){const o=r.get(Ki);if(o)try{return s._deserializeData(decodeURIComponent(o))}catch{}}return s._deserializeData(await e.text())}}},pd=e=>[...e.entries()].reduce((t,[r,n])=>(r.split(".").reduce((s,i,a,o)=>{if(i.endsWith("[]")){const l=i.slice(0,-2);return s[l]=s[l]||[],s[l]=[...s[l],n]}return a<o.length-1?s[i]=s[i]||(Number.isNaN(+o[a+1])?{}:[]):s[i]=n},t),t),{});function md(e){const{params:t,request:r,status:n,locale:s,originalUrl:i}=e,a={};r.headers.forEach((y,m)=>a[m]=y);const o=e.sharedMap.get(_n),l=e.sharedMap.get(lo),c=e.sharedMap.get(oo),d=e.sharedMap.get(ud),u=e.request.headers,h=new URL(i.pathname+i.search,i),p=u.get("X-Forwarded-Host"),v=u.get("X-Forwarded-Proto");return p&&(h.port="",h.host=p),v&&(h.protocol=v),{url:h.href,requestHeaders:a,locale:s(),nonce:d,containerAttributes:{"q:route":c},qwikcity:{routeName:c,ev:e,params:{...t},loadedRoute:fd(e),response:{status:n(),loaders:Pn(e),action:o,formData:l}}}}var gd=(e,t,r,n,s,i)=>{const a=[],o=[],l=[],c=!!(t&&Sd(t[2]));if(i&&l.push(Td),e&&ta(a,o,l,e,c,r),t){const d=t[0];n&&(r==="POST"||r==="PUT"||r==="PATCH"||r==="DELETE")&&(n==="lax-proto"?l.unshift(xd):l.unshift(_d)),c&&((r==="POST"||r==="GET")&&l.push(yd),l.push(bd),i&&l.push(Cd));const u=t[2];ta(a,o,l,u,c,r),c&&(l.push(h=>{h.sharedMap.set(oo,d)}),l.push($d(o,a)),l.push(s))}return l},ta=(e,t,r,n,s,i)=>{for(const a of n){typeof a.onRequest=="function"?r.push(a.onRequest):Array.isArray(a.onRequest)&&r.push(...a.onRequest);let o;switch(i){case"GET":o=a.onGet;break;case"POST":o=a.onPost;break;case"PUT":o=a.onPut;break;case"PATCH":o=a.onPatch;break;case"DELETE":o=a.onDelete;break;case"OPTIONS":o=a.onOptions;break;case"HEAD":o=a.onHead;break}if(typeof o=="function"?r.push(o):Array.isArray(o)&&r.push(...o),s)for(const l of Object.values(a))typeof l=="function"&&(l.__brand==="server_loader"?e.push(l):l.__brand==="server_action"&&t.push(l))}};function $d(e,t){return async r=>{if(r.headersSent){r.exit();return}const{method:n}=r,s=Pn(r),i=Tn(r)==="dev",a=r[kr];if(i&&n==="GET"&&r.query.has(Ji)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request.
Make sure your <form> has method="POST" attribute, like this: <form method="POST">`),n==="POST"){const o=r.query.get(Ji);if(o){const l=globalThis._qwikActionsMap,c=e.find(d=>d.__id===o)??l?.get(o);if(c){r.sharedMap.set(_n,o);const d=await r.parseBody();if(!d||typeof d!="object")throw new Error(`Expected request data for the action id ${o} to be an object`);const u=await ra(r,c.__validators,d,i);if(!u.success)s[o]=r.fail(u.status??500,u.error);else{const h=i?await en(r,c.__qrl.getSymbol().split("_",1)[0],()=>c.__qrl.call(r,u.data,r)):await c.__qrl.call(r,u.data,r);i&&Zr(a,h,c.__qrl),s[o]=h}}}}if(t.length>0){const o=t.map(l=>{const c=l.__id;return s[c]=ra(r,l.__validators,void 0,i).then(d=>d.success?i?en(r,l.__qrl.getSymbol().split("_",1)[0],()=>l.__qrl.call(r,r)):l.__qrl.call(r,r):r.fail(d.status??500,d.error)).then(d=>(typeof d=="function"?s[c]=d():(i&&Zr(a,d,l.__qrl),s[c]=d),d)),s[c]});await Promise.all(o)}}}async function ra(e,t,r,n){let s={success:!0,data:r};if(t)for(const i of t)if(n?s=await en(e,"validator$",()=>i.validate(e,r)):s=await i.validate(e,r),s.success)r=s.data;else return s;return s}function vd(e){return e?typeof e=="object"&&Symbol.asyncIterator in e:!1}async function yd(e){const t=e.query.get(ed);if(t&&e.request.headers.get("X-QRL")===t&&e.request.headers.get("Content-Type")==="application/qwik-json"){e.exit();const r=Tn(e)==="dev",n=e[kr],s=await e.parseBody();if(Array.isArray(s)){const[i,...a]=s;if(wd(i)&&i.getHash()===t){let o;try{r?o=await en(e,`server_${i.getSymbol()}`,()=>i.apply(e,a)):o=await i.apply(e,a)}catch(l){throw l instanceof Yr?e.error(l.status,l.data):e.error(500,"Invalid request")}if(vd(o)){e.headers.set("Content-Type","text/qwik-json-stream");const l=e.getWritableStream().getWriter();for await(const c of o){r&&Zr(n,c,i);const d=await n._serializeData(c,!0);if(e.signal.aborted)break;await l.write(Cn.encode(`${d}
`))}l.close()}else{Zr(n,o,i),e.headers.set("Content-Type","application/qwik-json");const l=await n._serializeData(o,!0);e.send(200,l)}return}}throw e.error(500,"Invalid request")}}function bd(e){const t=js(e),{basePathname:r,originalUrl:n,sharedMap:s}=e,{pathname:i,search:a}=n;if(!s.has(Ms)&&i!==r&&!i.endsWith(".html")){if(t){if(!i.endsWith("/"))throw e.redirect(301,i+"/"+a)}else if(i.endsWith("/"))throw e.redirect(301,i.slice(0,i.length-1)+a)}}function Zr(e,t,r){try{e._verifySerializable(t,void 0)}catch(n){throw n instanceof Error&&r.dev&&(n.loc=r.dev),n}}var wd=e=>typeof e=="function"&&typeof e.getSymbol=="function";function Sd(e){const t=e[e.length-1];return t&&typeof t.default=="function"}function uo(e,t){e=new URL(e),e.pathname.endsWith(Gt)&&(e.pathname=e.pathname.slice(0,-Gt.length)),t?e.pathname.endsWith("/")||(e.pathname+="/"):e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1));const r=e.search.slice(1).replaceAll(/&?q(action|data|func)=[^&]+/g,"");return`${e.pathname}${r?`?${r}`:""}${e.hash}`}var Cn=new TextEncoder;function xd(e){fo(e,"lax-proto")}function _d(e){fo(e)}function fo(e,t){if(qd(e.request.headers,"application/x-www-form-urlencoded","multipart/form-data","text/plain")){const r=e.request.headers.get("origin"),n=e.url.origin;let s=r!==n;if(s&&t&&r?.replace(/^http(s)?/g,"")===n.replace(/^http(s)?/g,"")&&(s=!1),s)throw e.error(403,`CSRF check failed. Cross-site ${e.method} form submissions are forbidden.
The request origin "${r}" does not match the server origin "${n}".`)}}function Pd(e){return async t=>{if(t.headersSent||t.sharedMap.has(Ms))return;const r={};t.request.headers.forEach((u,h)=>r[h]=u);const n=t.headers;n.has("Content-Type")||n.set("Content-Type","text/html; charset=utf-8");const s=js(t),{readable:i,writable:a}=new TextEncoderStream,o=t.getWritableStream(),l=i.pipeTo(o,{preventClose:!0}),c=a.getWriter(),d=t.status();try{const u=Tn(t)==="static",h=md(t),p=await e({base:t.basePathname+"build/",stream:c,serverData:h,containerAttributes:{"q:render":u?"static":"",...h.containerAttributes}}),v={loaders:Pn(t),action:t.sharedMap.get(_n),status:d!==200?d:200,href:uo(t.url,s)};typeof p.html=="string"&&await c.write(p.html),t.sharedMap.set("qData",v)}finally{await c.ready,await c.close(),await l}await o.close()}}async function Td(e){try{await e.next()}catch(n){if(!(n instanceof Qs))throw n}if(e.headersSent)return;const t=e.status(),r=e.headers.get("Location");if(t>=301&&t<=308&&r){const n=kd(r);if(n){e.headers.set("Location",n),e.getWritableStream().close();return}else e.status(200),e.headers.delete("Location")}}async function Cd(e){if(await e.next(),e.headersSent||e.exited)return;const t=e.status(),r=e.headers.get("Location"),n=js(e),s={};e.request.headers.forEach((l,c)=>s[c]=l),e.headers.set("Content-Type","application/json; charset=utf-8");const i={loaders:Pn(e),action:e.sharedMap.get(_n),status:t!==200?t:200,href:uo(e.url,n),redirect:r??void 0,isRewrite:e.sharedMap.get(co)},a=e.getWritableStream().getWriter(),o=await e[kr]._serializeData(i,!0);a.write(Cn.encode(o)),e.sharedMap.set("qData",i),a.close()}function kd(e){if(e.startsWith("/")){if(!e.includes(Gt)){const t=new URL(e,"http://localhost");return(t.pathname.endsWith("/")?t.pathname.slice(0,-1):t.pathname)+Gt+t.search}return e}else return}function na(){return typeof performance<"u"?performance.now():0}async function en(e,t,r){const n=na();try{return await r()}finally{const s=na()-n;let i=e.sharedMap.get("@serverTiming");i||e.sharedMap.set("@serverTiming",i=[]),i.push([t,s])}}function qd(e,...t){var r;const n=((r=e.get("content-type"))==null?void 0:r.split(/;/,1)[0].trim())??"";return t.includes(n)}async function Nd(e,t,r){const{render:n,qwikCityPlan:s,checkOrigin:i}=t,{pathname:a,isInternal:o}=us(e.url.pathname,s.trailingSlash),l=await sa(s,a,e.request.method,i??!0,n,o);if(l){const[c,d]=l;return cd(e,c,d,async h=>{const{pathname:p}=us(h.pathname,s.trailingSlash),v=await sa(s,p,e.request.method,i??!0,n,o);if(v){const[y,m]=v;return{loadedRoute:y,requestHandlers:m}}else return{loadedRoute:null,requestHandlers:[]}},s.trailingSlash,s.basePathname,r)}return null}async function sa(e,t,r,n,s,i){const{routes:a,serverPlugins:o,menus:l,cacheModules:c}=e,d=await id(a,l,c,t,i),u=gd(o,d,r,n,Pd(s),i);return u.length>0?[d,u]:null}var i0=Date.now();var kn=e=>function(t,...r){return e.call(null,Wp(t),...r)},Ad=!1,ge=()=>{},ft=e=>e&&typeof e.nodeType=="number",ho=e=>e.nodeType===9,ht=e=>e.nodeType===1,pt=e=>{const t=e.nodeType;return t===1||t===111},Ed=e=>{const t=e.nodeType;return t===1||t===111||t===3},ze=e=>e.nodeType===111,Fs=e=>e.nodeType===3,qr=e=>e.nodeType===8,Pt=(e,...t)=>Vs(!1,e,...t),po=(e,...t)=>{throw Vs(!1,e,...t)},Us=(e,...t)=>Vs(Ad,e,...t),ia=()=>{},Qe=()=>{},Id=()=>{},Ld=e=>e,Vs=(e,t,...r)=>{const n=t instanceof Error?t:new Error(t);return console.error("%cQWIK ERROR","",n.message,...Ld(r),n.stack),e&&setTimeout(()=>{throw n},0),n};var qn=e=>`Code(${e}) https://github.com/QwikDev/qwik/blob/main/packages/qwik/src/core/error/error.ts#L${8+e}`,ee=(e,...t)=>Us(qn(e,...t),...t),Rd=()=>({isServer:!0,importSymbol(e,t,r){{const i=Ll(r),a=globalThis.__qwik_reg_symbols?.get(i);if(a)return a}if(!t)throw ee(31,r);if(!e)throw ee(30,t,r);const n=Dd(e.ownerDocument,e,t).toString(),s=new URL(n);return s.hash="",import(s.href).then(i=>i[r])},raf:e=>new Promise(t=>{requestAnimationFrame(()=>{t(e())})}),nextTick:e=>new Promise(t=>{setTimeout(()=>{t(e())})}),chunkForSymbol:(e,t)=>[e,t??"_"]}),Dd=(e,t,r)=>{const n=e.baseURI,s=new URL(t.getAttribute("q:base")??n,n);return new URL(r,s)},Ws=Rd(),mo=e=>Ws=e,Nn=()=>Ws,qe=()=>Ws.isServer,tr=e=>{const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null},Me=e=>!!e&&typeof e=="object",G=e=>Array.isArray(e),nt=e=>typeof e=="string",Se=e=>typeof e=="function",te=e=>e&&typeof e.then=="function",Hs=(e,t,r)=>{try{const n=e();return te(n)?n.then(t,r):t(n)}catch(n){return r(n)}},F=(e,t)=>te(e)?e.then(t):t(e),Js=e=>e.some(te)?Promise.all(e):e,Mt=e=>e.length>0?Promise.all(e):e,go=e=>e!=null,Od=e=>new Promise(t=>{setTimeout(t,e)}),We=[],pe={},Nr=e=>{if(typeof document<"u")return document;if(e.nodeType===9)return e;const t=e.ownerDocument;return t},Bd="q:renderFn",Ne="q:slot",$o="q:s",An="q:style",zd="q:sstyle",vo="q:instance",yo=(e,t)=>e["qFuncs_"+t]||[],Qd="q:id",ds=Symbol("proxy target"),jt=Symbol("proxy flags"),Ie=Symbol("proxy manager"),j=Symbol("IMMUTABLE"),En="_qc_",ke=(e,t,r)=>e.setAttribute(t,r),Re=(e,t)=>e.getAttribute(t),Ks=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),Md=e=>e.replace(/-./g,t=>t[1].toUpperCase()),jd=(e,t,r,n)=>{typeof CustomEvent=="function"&&e&&e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:n,composed:n}))},Gs=(e,t,r=0)=>t.$proxyMap$.get(e)||(r!==0&&Ln(e,r),Ar(e,t,void 0)),Ar=(e,t,r)=>{Or(e),t.$proxyMap$.has(e),Me(e),tr(e)||G(e);const n=t.$subsManager$.$createManager$(r),s=new Proxy(e,new bo(t,n));return t.$proxyMap$.set(e,s),s},In=()=>{const e={};return Ln(e,2),e},Ln=(e,t)=>{Object.defineProperty(e,jt,{value:t,enumerable:!1})},Fd=(e,t)=>{const r={};for(const n in e)t.includes(n)||(r[n]=e[n]);return r},bo=class{$containerState$;$manager$;constructor(e,t){this.$containerState$=e,this.$manager$=t}deleteProperty(e,t){if(2&e[jt])throw ee(17);return typeof t=="string"&&delete e[t]&&(this.$manager$.$notifySubs$(G(e)?void 0:t),!0)}get(e,t){if(typeof t=="symbol")return t===ds?e:t===Ie?this.$manager$:e[t];const r=e[jt]??0;const n=me(),s=!!(1&r),i=e["$$"+t];let a,o;if(n&&(a=n.$subscriber$),!(2&r)||t in e&&!Ud(e[j]?.[t])||(a=null),i?(ae(i),o=i.value,a=null):o=e[t],a){const l=G(e);this.$manager$.$addSub$(a,l?void 0:t)}return s?Vd(o,this.$containerState$):o}set(e,t,r){if(typeof t=="symbol")return e[t]=r,!0;const n=e[jt]??0;if(2&n)throw ee(17);const s=1&n?Or(r):r;if(G(e))return e[t]=s,this.$manager$.$notifySubs$(),!0;const i=e[t];return e[t]=s,i!==s&&this.$manager$.$notifySubs$(t),!0}has(e,t){if(t===ds)return!0;const r=me();if(typeof t=="string"&&r){const s=r.$subscriber$;if(s){const i=G(e);this.$manager$.$addSub$(s,i?void 0:t)}}const n=Object.prototype.hasOwnProperty;return!!n.call(e,t)||!(typeof t!="string"||!n.call(e,"$$"+t))}ownKeys(e){const t=e[jt]??0;if(!(2&t)){let r=null;const n=me();n&&(r=n.$subscriber$),r&&this.$manager$.$addSub$(r)}return G(e)?Reflect.ownKeys(e):Reflect.ownKeys(e).map(r=>typeof r=="string"&&r.startsWith("$$")?r.slice(2):r)}getOwnPropertyDescriptor(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return G(e)||typeof t=="symbol"||r&&!r.configurable?r:{enumerable:!0,configurable:!0}}},Ud=e=>e===j||ae(e),Vd=(e,t)=>{if(Me(e)){if(Object.isFrozen(e))return e;const r=Or(e);if(r!==e||Nl(r))return e;if(tr(r)||G(r))return t.$proxyMap$.get(r)||Gs(r,t,1)}return e},Wd=/^(on|window:|document:)/,wo="preventdefault:",Ys=e=>e.endsWith("$")&&Wd.test(e),Xs=e=>{if(e.length===0)return We;if(e.length===1){const r=e[0];return[[r[0],[r[1]]]]}const t=[];for(let r=0;r<e.length;r++){const n=e[r][0];t.includes(n)||t.push(n)}return t.map(r=>[r,e.filter(n=>n[0]===r).map(n=>n[1])])},Zs=(e,t,r,n)=>{if(t.endsWith("$"),t=fs(t.slice(0,-1)),r)if(G(r)){const s=r.flat(1/0).filter(i=>i!=null).map(i=>[t,oa(i,n)]);e.push(...s)}else e.push([t,oa(r,n)]);return t},aa=["on","window:on","document:on"],Hd=["on","on-window","on-document"],fs=e=>{let t="on";for(let r=0;r<aa.length;r++){const n=aa[r];if(e.startsWith(n)){t=Hd[r],e=e.slice(n.length);break}}return t+":"+(e=e.startsWith("-")?Ks(e.slice(1)):e.toLowerCase())},oa=(e,t)=>(e.$setContainer$(t),e),Jd=(e,t)=>{const r=e.$element$.attributes,n=[];for(let s=0;s<r.length;s++){const{name:i,value:a}=r.item(s);if(i.startsWith("on:")||i.startsWith("on-window:")||i.startsWith("on-document:")){const o=a.split(`
`);for(const l of o){const c=zn(l,t);c.$capture$&&Tl(c,e),n.push([i,c])}}}return n},Kd=(e,t=0)=>{for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return Number(Math.abs(t)).toString(36)},Gd=(e,t)=>`${Kd(e.$hash$)}-${t}`,Yd=e=>"â­ï¸"+e,So=e=>{const t=e.join("|");if(t.length>0)return t},At=()=>{const e=On(),t=$e(e.$hostElement$,e.$renderCtx$.$static$.$containerState$),r=t.$seq$||=[],n=e.$i$++;return{val:r[n],set:s=>r[n]=s,i:n,iCtx:e,elCtx:t}},Ye=e=>(/^[\w/.-]+$/.test(e),Object.freeze({id:Ks(e)})),Ze=(e,t)=>{const{val:r,set:n,elCtx:s}=At();r===void 0&&((s.$contexts$||=new Map).set(e.id,t),n(!0))},rr=(e,t)=>{const{val:r,set:n,iCtx:s,elCtx:i}=At();if(r!==void 0)return r;const a=xo(e,i,s.$renderCtx$.$static$.$containerState$);if(typeof t=="function")return n(ve(void 0,t,a));if(a!==void 0)return n(a);if(t!==void 0)return n(t);throw ee(13,e.id)},Xd=(e,t)=>{let r=e,n=1;for(;r&&!r.hasAttribute?.("q:container");){for(;r=r.previousSibling;)if(qr(r)){const s=r.__virtual;if(s){const i=s[En];if(r===s.open)return i??$e(s,t);if(i?.$parentCtx$)return i.$parentCtx$;r=s;continue}if(r.data==="/qv")n++;else if(r.data.startsWith("qv ")&&(n--,n===0))return $e(Dr(r),t)}r=e.parentElement,e=r}return null},Zd=(e,t)=>(e.$parentCtx$===void 0&&(e.$parentCtx$=Xd(e.$element$,t)),e.$parentCtx$),xo=(e,t,r)=>{const n=e.id;if(!t)return;let s=t;for(;s;){const i=s.$contexts$?.get(n);if(i)return i;s=Zd(s,r)}},ef=Ye("qk-error"),ei=(e,t,r)=>{const n=Ae(t);if(qe())throw e;{const s=xo(ef,n,r.$static$.$containerState$);if(s===void 0)throw e;s.error=e}},tf=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexShrink","gridArea","gridRow","gridRowEnd","gridRowStart","gridColumn","gridColumnEnd","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","MozAnimationIterationCount","MozBoxFlex","msFlex","msFlexPositive","WebkitAnimationIterationCount","WebkitBoxFlex","WebkitBoxOrdinalGroup","WebkitColumnCount","WebkitColumns","WebkitFlex","WebkitFlexGrow","WebkitFlexShrink","WebkitLineClamp"]),rf=e=>tf.has(e),tn=(e,t,r)=>{t.$flags$&=~Yt,t.$flags$|=fi,t.$slots$=[],t.li.length=0;const n=t.$element$,s=t.$componentQrl$,i=t.$props$,a=xe(e.$static$.$locale$,n,void 0,"qRender"),o=a.$waitOn$=[];const l=Er(e);l.$cmpCtx$=t,l.$slotCtx$=void 0,a.$subscriber$=[0,n],a.$renderCtx$=e,s.$setContainer$(e.$static$.$containerState$.$containerEl$);const c=s.getFn(a);return Hs(()=>c(i),d=>F(qe()?F(Mt(o),()=>F(Mf(e.$static$.$containerState$,e),()=>Mt(o))):Mt(o),()=>{if(t.$flags$&Yt){if(!(r&&r>100))return tn(e,t,r?r+1:1);Qe(`Infinite loop detected. Element: ${t.$componentQrl$?.$symbol$}`)}return{node:d,rCtx:l}}),d=>{if(d===il){if(!(r&&r>100))return F(Mt(o),()=>tn(e,t,r?r+1:1));Qe(`Infinite loop detected. Element: ${t.$componentQrl$?.$symbol$}`)}return ei(d,n,e),{node:ii,rCtx:l}})},_o=(e,t)=>{const r={$static$:{$doc$:e,$locale$:t.$serverData$.locale,$containerState$:t,$hostElements$:new Set,$operations$:[],$postOperations$:[],$roots$:[],$addSlots$:[],$rmSlots$:[],$visited$:[]},$cmpCtx$:null,$slotCtx$:void 0};return ge(),ge(),r},Er=e=>({$static$:e.$static$,$cmpCtx$:e.$cmpCtx$,$slotCtx$:e.$slotCtx$}),ti=(e,t)=>t?.$scopeIds$?.length?t.$scopeIds$.join(" ")+" "+rn(e):rn(e),rn=e=>{if(!e)return"";if(nt(e))return e.trim();const t=[];if(G(e))for(const r of e){const n=rn(r);n&&t.push(n)}else for(const[r,n]of Object.entries(e))n&&t.push(r.trim());return t.join(" ")},Rn=e=>{if(e==null)return"";if(typeof e=="object"){if(G(e))throw ee(0,e,"style");{const t=[];for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];n!=null&&typeof n!="function"&&(r.startsWith("--")?t.push(r+":"+n):t.push(Ks(r)+":"+nf(r,n)))}return t.join(";")}}return String(e)},nf=(e,t)=>typeof t!="number"||t===0||rf(e)?t:t+"px",br=e=>ot(e.$static$.$containerState$.$elementIndex$++),Po=(e,t)=>{t.$id$=br(e)},wr=e=>ae(e)?wr(e.value):e==null||typeof e=="boolean"?"":String(e);function To(e){return e.startsWith("aria-")}var Co=(e,t)=>!!t.key&&(!Et(e)||!Se(e.type)&&e.key!=t.key),ye="dangerouslySetInnerHTML",Hr="<!--qkssr-f-->",ko=class{nodeType;[En]=null;constructor(e){this.nodeType=e,ge()}},sf=()=>new ko(9),af=async(e,t)=>{const r=t.containerTagName,n=nn(1).$element$,s=gi(n,t.base??"/");s.$serverData$.locale=t.serverData?.locale;const i=_o(sf(),s),a=t.beforeContent??[],o={$static$:{$contexts$:[],$headNodes$:r==="html"?a:[],$locale$:t.serverData?.locale,$textNodes$:new Map},$projectedChildren$:void 0,$projectedCtxs$:void 0,$invocationContext$:void 0};ge();const l=t.serverData?.locale,c=t.containerAttributes,d=c["q:render"];c["q:container"]="paused",c["q:version"]="1.18.0",c["q:render"]=(d?d+"-":"")+"ssr",c["q:base"]=t.base||"",c["q:locale"]=l,c["q:manifest-hash"]=t.manifestHash,c["q:instance"]=of();const u=r==="html"?[e]:[a,e];r!=="html"&&(c.class="qcðŸ“¦"+(c.class?" "+c.class:""));const h=s.$serverData$={...s.$serverData$,...t.serverData};h.containerAttributes={...h.containerAttributes,...c},(o.$invocationContext$=xe(l)).$renderCtx$=i;const p=P(r,null,c,u,Yt|at,null);s.$hostsRendering$=new Set,await Promise.resolve().then(()=>lf(p,i,o,t.stream,s,t))},of=()=>Math.random().toString(36).slice(2),lf=async(e,t,r,n,s,i)=>{const a=i.beforeClose;return await ni(e,t,r,n,0,a?o=>Le(a(r.$static$.$contexts$,s,!1,r.$static$.$textNodes$),t,r,o,0,void 0):void 0),t},cf=async(e,t,r,n,s)=>{n.write(Hr);const i=e.props.children;let a;if(Se(i)){const o=i({write(l){n.write(l),n.write(Hr)}});if(te(o))return o;a=o}else a=i;for await(const o of a)await Le(o,t,r,n,s,void 0),n.write(Hr)},qo=(e,t,r,n,s,i,a,o)=>{const l=e.props,c=l["q:renderFn"];if(c)return t.$componentQrl$=c,ff(n,s,i,t,e,a,o);let d="<!--qv"+df(l);const u="q:s"in l,h=e.key!=null?String(e.key):null;u&&(n.$cmpCtx$?.$id$,d+=" q:sref="+n.$cmpCtx$.$id$),h!=null&&(d+=" q:key="+h),d+="-->",i.write(d);const p=e.props[ye];if(p){i.write(p),i.write(Zn);return}if(r)for(const v of r)ri(v.type,v.props,i);return F(No(e.children,n,s,i,a),()=>{if(!u&&!o){i.write(Zn);return}let v;if(u){const y=s.$projectedChildren$?.[h];if(y){const[m,$]=s.$projectedCtxs$,x=Er(m);x.$slotCtx$=t,s.$projectedChildren$[h]=void 0,v=Le(y,x,$,i,a)}}return o&&(v=F(v,()=>o(i))),F(v,()=>{i.write(Zn)})})},Zn="<!--/qv-->",uf=e=>{let t="";for(const r in e){if(r===ye)continue;const n=e[r];n!=null&&(t+=" "+(n===""?r:r+'="'+n+'"'))}return t},df=e=>{let t="";for(const r in e){if(r==="children"||r===ye)continue;const n=e[r];n!=null&&(t+=" "+(n===""?r:r+"="+n))}return t},ri=(e,t,r)=>{if(r.write("<"+e+uf(t)+">"),Io[e])return;const n=t[ye];n!=null&&r.write(n),r.write(`</${e}>`)},ff=(e,t,r,n,s,i,a)=>(pf(e,n,s.props.props),F(tn(e,n),o=>{const l=n.$element$,c=o.rCtx,d=xe(t.$static$.$locale$,l,void 0);d.$subscriber$=[0,l],d.$renderCtx$=c;const u={$static$:t.$static$,$projectedChildren$:hf(s.children,t),$projectedCtxs$:[e,t],$invocationContext$:d},h=[];if(n.$appendStyles$){const m=4&i?t.$static$.$headNodes$:h;for(const $ of n.$appendStyles$)m.push(P("style",{[An]:$.styleId,[ye]:$.content,hidden:""},null,null,0,null))}const p=br(e),v=n.$scopeIds$?So(n.$scopeIds$):void 0,y=W(s.type,{[zd]:v,[Qd]:p,children:o.node},0,s.key);return n.$id$=p,t.$static$.$contexts$.push(n),qo(y,n,h,c,u,r,i,m=>{if(n.$flags$&at){const b=nn(1),T=b.li;T.push(...n.li),n.$flags$&=~at,b.$id$=br(e);const k={hidden:"","q:id":b.$id$};t.$static$.$contexts$.push(b);const S=Xs(T);for(const _ of S){const A=Lo(_[0]);k[A]=Pi(_[1],e.$static$.$containerState$,b),hs(A,e.$static$.$containerState$)}ri("script",k,m)}const $=u.$projectedChildren$;let x;if($){const b=Object.keys($).map(_=>{const A=$[_];if(A)return P("q:template",{[Ne]:_||!0,hidden:!0,"aria-hidden":"true"},null,A,0,null)}),[T,k]=u.$projectedCtxs$,S=Er(T);S.$slotCtx$=n,x=Le(b,S,k,m,0,void 0)}return a?F(x,()=>a(m)):x})})),hf=(e,t)=>{const r=Ao(e,t);if(r===null)return;const n={};for(const s of r){let i="";Et(s)&&(i=s.props[Ne]||""),(n[i]||=[]).push(s)}return n},nn=e=>Dn(new ko(e)),ni=(e,t,r,n,s,i)=>{const a=e.type,o=t.$cmpCtx$;if(typeof a=="string"){const c=e.key,d=e.props,u=e.immutableProps||pe,h=nn(1),p=h.$element$,v=a==="head";let y="<"+a,m=!1,$=!1,x="",b=null;const T=(S,_,A)=>{if(S==="ref"){_!==void 0&&($i(_,p),$=!0);return}if(Ys(S)){Zs(h.li,S,_,void 0);return}if(ae(_)&&(_=Ge(_,A?[1,p,_,o.$element$,S]:[2,o.$element$,_,p,S]),m=!0),S===ye){b=_;return}let O;S.startsWith(wo)&&hs(S.slice(15),t.$static$.$containerState$);const B=S==="htmlFor"?"for":S;B==="class"||B==="className"?x=rn(_):B==="style"?O=Rn(_):To(B)||B==="draggable"||B==="spellcheck"?(O=_!=null?String(_):null,_=O):O=_===!1||_==null?null:String(_),O!=null&&(B==="value"&&a==="textarea"?b=Ft(O):yf(B)||(y+=" "+(_===!0?B:B+'="'+Ft(O)+'"')))};for(const S in d){let _=!1,A;S in u?(_=!0,A=u[S],A===j&&(A=d[S])):A=d[S],T(S,A,_)}for(const S in u){if(S in d)continue;const _=u[S];_!==j&&T(S,_,!0)}const k=h.li;if(o){if(o.$scopeIds$?.length){const S=o.$scopeIds$.join(" ");x=x?`${S} ${x}`:S}o.$flags$&at&&(k.push(...o.li),o.$flags$&=~at)}if(v&&(s|=1),a in mf&&(s|=16),a in gf&&(s|=8),x&&(y+=' class="'+Ft(x)+'"'),k.length>0){const S=Xs(k),_=!!(16&s);for(const A of S){const O=_?Lo(A[0]):A[0];y+=" "+O+'="'+Pi(A[1],t.$static$.$containerState$,h)+'"',hs(O,t.$static$.$containerState$)}}if(c!=null&&(y+=' q:key="'+Ft(c)+'"'),$||m||k.length>0){if($||m||bf(k)){const S=br(t);y+=' q:id="'+S+'"',h.$id$=S}r.$static$.$contexts$.push(h)}if(1&s&&(y+=" q:head"),y+=">",n.write(y),a in Io)return;if(b!=null){n.write(String(b)),n.write(`</${a}>`);return}return a==="html"?s|=4:s&=-5,2&e.flags&&(s|=1024),F(Le(e.children,t,r,n,s),()=>{if(v){for(const S of r.$static$.$headNodes$)ri(S.type,S.props,n);r.$static$.$headNodes$.length=0}if(i)return F(i(n),()=>{n.write(`</${a}>`)});n.write(`</${a}>`)})}if(a===st){const c=nn(111);return t.$slotCtx$?(c.$parentCtx$=t.$slotCtx$,c.$realParentCtx$=t.$cmpCtx$):c.$parentCtx$=t.$cmpCtx$,o&&o.$flags$&hi&&wf(o,c),qo(e,c,void 0,t,r,n,s,i)}if(a===Ro){n.write(e.props.data);return}if(a===Do)return cf(e,t,r,n,s);const l=ve(r.$invocationContext$,a,e.props,e.key,e.flags,e.dev);return Co(l,e)?ni(W(st,{children:l},0,e.key),t,r,n,s,i):Le(l,t,r,n,s,i)},Le=(e,t,r,n,s,i)=>{if(e!=null&&typeof e!="boolean"){if(!nt(e)&&typeof e!="number"){if(Et(e))return ni(e,t,r,n,s,i);if(G(e))return No(e,t,r,n,s);if(ae(e)){const a=8&s,o=t.$cmpCtx$?.$element$;let l;if(o){if(!a){const c=br(t);if(l=Ge(e,1024&s?[3,"#"+c,e,"#"+c]:[4,o,e,"#"+c]),nt(l)){const d=wr(l);r.$static$.$textNodes$.set(d,c)}n.write(`<!--t=${c}-->`),Le(l,t,r,n,s,i),n.write("<!---->");return}l=ve(r.$invocationContext$,()=>e.value)}n.write(Ft(wr(l)));return}return te(e)?(n.write(Hr),e.then(a=>Le(a,t,r,n,s,i))):void Qe("A unsupported value was passed to the JSX, skipping render. Value:",e)}n.write(Ft(String(e)))}},No=(e,t,r,n,s)=>{if(e==null)return;if(!G(e))return Le(e,t,r,n,s);const i=e.length;if(i===1)return Le(e[0],t,r,n,s);if(i===0)return;let a=0;const o=[];return e.reduce((l,c,d)=>{const u=[];o.push(u);const h=Le(c,t,r,l?{write(p){a===d?n.write(p):u.push(p)}}:n,s);if(l||te(h)){const p=()=>{a++,o.length>a&&o[a].forEach(v=>n.write(v))};return te(h)?l?Promise.all([h,l]).then(p):h.then(p):l.then(p)}a++},void 0)},Ao=(e,t)=>{if(e==null)return null;const r=Eo(e,t),n=G(r)?r:[r];return n.length===0?null:n},Eo=(e,t)=>e==null?null:G(e)?e.flatMap(r=>Eo(r,t)):Et(e)&&Se(e.type)&&e.type!==Ro&&e.type!==Do&&e.type!==st?Ao(ve(t.$invocationContext$,e.type,e.props,e.key,e.flags),t):e,pf=(e,t,r)=>{const n=Object.keys(r),s=In();if(t.$props$=Ar(s,e.$static$.$containerState$),n.length===0)return;const i=s[j]=r[j]??pe;for(const a of n)a!=="children"&&a!==Ne&&(ae(i[a])?s["$$"+a]=i[a]:s[a]=r[a])},mf={head:!0,style:!0,script:!0,link:!0,meta:!0},gf={title:!0,style:!0,script:!0,noframes:!0,textarea:!0},Io={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},$f=/[&<>'"]/g,hs=(e,t)=>{t.$events$.add(ll(e))},Ft=e=>e.replace($f,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return""}}),vf=/[>/="'\u0009\u000a\u000c\u0020]/,yf=e=>vf.test(e),bf=e=>e.some(t=>t[1].$captureRef$&&t[1].$captureRef$.length>0),wf=(e,t)=>{const r=e.$dynamicSlots$||=[];r.includes(t)||r.push(t)},Lo=e=>e==="on:qvisible"?"on-document:qinit":e,Ee=(e,t,r)=>new gs(e,t,r),Sf=e=>{const t=e.$funcStr$;let r="";for(let n=0;n<e.$args$.length;n++)r+=`p${n},`;return`(${r})=>(${t})`},P=(e,t,r,n,s,i)=>{const a=new nr(e,t||pe,r,n,s,i==null?null:String(i));return si(a),ge(),a},Oe=(e,t,r,n,s,i)=>{let a=null;return t&&"children"in t&&(a=t.children,delete t.children),P(e,t,r,a,n,s,i)},W=(e,t,r,n,s)=>{const i=n==null?null:String(n),a=t??{};if(typeof e=="string"&&j in a){const l=a[j];delete a[j];const c=a.children;delete a.children;for(const[d,u]of Object.entries(l))u!==j&&(delete a[d],a[d]=u);return P(e,null,a,c,r,n,s)}const o=new nr(e,a,null,a.children,r,i);return typeof e=="string"&&t&&delete t.children,si(o),ge(),o},de=(e,t,r)=>{const n=r==null?null:String(r),s=tl(()=>{const a=t.children;return typeof e=="string"&&delete t.children,a});nt(e)&&"className"in t&&(t.class=t.className,delete t.className);const i=new nr(e,t,null,s,0,n);return si(i),ge(),i},nr=class{type;props;immutableProps;children;flags;key;dev;constructor(e,t,r,n,s,i=null){this.type=e,this.props=t,this.immutableProps=r,this.children=n,this.flags=s,this.key=i}},st=e=>e.children,si=()=>{},Et=e=>e instanceof nr,Be=e=>e.children,ii=Symbol("skip render"),Ro=()=>null,Do=()=>null,ai=(e,t,r)=>{const n=!(t.$flags$&fi),s=t.$element$,i=e.$static$.$containerState$;return i.$hostsStaging$.delete(t),i.$subsManager$.$clearSub$(s),F(tn(e,t),a=>{const o=e.$static$,l=a.rCtx,c=xe(e.$static$.$locale$,s);if(o.$hostElements$.add(s),c.$subscriber$=[0,s],c.$renderCtx$=l,n&&t.$appendStyles$)for(const d of t.$appendStyles$)Ch(o,d);return F(it(a.node,c),d=>{const u=xf(s,d);return F(un(l,oi(t),u,r),()=>{t.$vdom$=u})})})},oi=e=>(e.$vdom$||(e.$vdom$=dn(e.$element$)),e.$vdom$),He=class{$type$;$props$;$immutableProps$;$children$;$flags$;$key$;$elm$=null;$text$="";$signal$=null;$id$;$dev$;constructor(e,t,r,n,s,i){this.$type$=e,this.$props$=t,this.$immutableProps$=r,this.$children$=n,this.$flags$=s,this.$key$=i,this.$id$=e+(i?":"+i:""),ge()}},Oo=(e,t)=>{const{key:r,type:n,props:s,children:i,flags:a,immutableProps:o}=e;let l="";if(nt(n))l=n;else{if(n!==st){if(Se(n)){const d=ve(t,n,s,r,a,e.dev);return Co(d,e)?Oo(W(st,{children:d},0,r),t):it(d,t)}throw ee(25,n)}l=Xt}let c=We;return i!=null?F(it(i,t),d=>(d!==void 0&&(c=G(d)?d:[d]),new He(l,s,o,c,a,r))):new He(l,s,o,c,a,r)},xf=(e,t)=>{const r=new He(":virtual",{},null,t===void 0?We:G(t)?t:[t],0,null);return r.$elm$=e,r},it=(e,t)=>{if(e!=null&&typeof e!="boolean"){if(Bo(e)){const r=new He("#text",pe,null,We,0,null);return r.$text$=String(e),r}if(Et(e))return Oo(e,t);if(ae(e)){const r=new He("#signal",pe,null,We,0,null);return r.$signal$=e,r}return G(e)?F(Js(e.flatMap(r=>it(r,t))),r=>r.flat(100).filter(go)):te(e)?e.then(r=>it(r,t)):e===ii?new He(":skipRender",pe,null,We,0,null):void Qe("A unsupported value was passed to the JSX, skipping render. Value:",e)}},Bo=e=>nt(e)||typeof e=="number",zo=e=>{Re(e,"q:container")==="paused"&&(Tf(e),Af(e))},_f=e=>{const t=Nr(e),r=qf(e===t.documentElement?t.body:e,"type");if(r)return JSON.parse(kf(r.firstChild.data)||"{}")},Pf=(e,t)=>{const r=JSON.parse(e);if(typeof r!="object")return null;const{_objs:n,_entry:s}=r;if(n===void 0||s===void 0)return null;let i={},a={};if(ft(t)&&pt(t)){const c=pi(t);c&&(a=sr(c),i=c.ownerDocument)}const o=kl(a,i);for(let c=0;c<n.length;c++){const d=n[c];nt(d)&&(n[c]=d===Qn?void 0:o.prepare(d))}const l=c=>n[De(c)];for(const c of n)Qo(c,l,o);return l(s)},Tf=e=>{if(!lh(e)){Qe("Skipping resuming because parent element is not q:container");return}const t=e._qwikjson_??_f(e);if(e._qwikjson_=null,!t){Qe("Skipping resuming qwik/json metadata was not found.");return}const r=Nr(e),n=yo(r,e.getAttribute(vo)),s=sr(e),i=new Map,a=new Map;let o=null,l=0;const c=r.createTreeWalker(e,ol);for(;o=c.nextNode();){const m=o.data;if(l===0){if(m.startsWith("qv ")){const $=Ef(m);$>=0&&i.set($,o)}else if(m.startsWith("t=")){const $=De(m.slice(2)),x=Nf(o);i.set($,x),a.set($,x.data)}}m==="cq"?l++:m==="/cq"&&l--}const d=e.getElementsByClassName("qcðŸ“¦").length!==0;e.querySelectorAll("[q\\:id]").forEach(m=>{if(d&&m.closest("[q\\:container]")!==e)return;const $=Re(m,"q:id");const x=De($);i.set(x,m)});const u=kl(s,r),h=new Map,p=new Set,v=m=>(typeof m=="string"&&m.length>0,h.has(m)?h.get(m):y(m)),y=m=>{if(m.startsWith("#")){const k=m.slice(1),S=De(k);i.has(S);const _=i.get(S);if(qr(_)){if(!_.isConnected){h.set(m,void 0);return}const A=Dr(_);return h.set(m,A),$e(A,s),A}return ht(_)?(h.set(m,_),$e(_,s),_):(h.set(m,_),_)}if(m.startsWith("@")){const k=m.slice(1),S=n[De(k)];return S}if(m.startsWith("*")){const k=m.slice(1),S=De(k);i.has(S);const _=a.get(S);return h.set(m,_),_}const $=De(m),x=t.objs;x.length>$;let b=x[$];nt(b)&&(b=b===Qn?void 0:u.prepare(b));let T=b;for(let k=m.length-1;k>=0;k--){const S=Np[m[k]];if(!S)break;T=S(T,s)}return h.set(m,T),Bo(b)||p.has($)||(p.add($),Cf(b,$,t.subs,v,s,u),Qo(b,v,u)),T};s.$elementIndex$=1e5,s.$pauseCtx$={getObject:v,meta:t.ctx,refs:t.refs},ke(e,"q:container","resumed"),Id(),jd(e,"qresume",void 0,!0)},Cf=(e,t,r,n,s,i)=>{const a=r[t];if(a){const o=[];let l=0;for(const c of a)if(c.startsWith("_"))l=parseInt(c.slice(1),10);else{const d=Op(c,n);d&&o.push(d)}if(l>0&&Ln(e,l),!i.subs(e,o)){const c=s.$proxyMap$.get(e);c?be(c).$addSubs$(o):Ar(e,s,o)}}},Qo=(e,t,r)=>{if(!r.fill(e,t)&&e&&typeof e=="object"){if(G(e))for(let n=0;n<e.length;n++)e[n]=t(e[n]);else if(tr(e))for(const n in e)e[n]=t(e[n])}},kf=e=>e.replace(/\\x3C(\/?script)/gi,"<$1"),qf=(e,t)=>{let r=e.lastElementChild;for(;r;){if(r.tagName==="SCRIPT"&&Re(r,t)==="qwik/json")return r;r=r.previousElementSibling}},Nf=e=>{const t=e.nextSibling;if(Fs(t))return t;{const r=e.ownerDocument.createTextNode("");return e.parentElement.insertBefore(r,e),r}},Af=e=>{e.qwik={pause:()=>Uh(e),state:sr(e)}},Ef=e=>{const t=e.indexOf("q:id=");return t>0?De(e.slice(t+5)):-1},oe=()=>{const e=nh();let t=e.$qrl$;if(t)t.$captureRef$;else{const r=e.$element$;const n=pi(r);t=zn(decodeURIComponent(String(e.$url$)),n),zo(n);const s=$e(r,sr(n));Tl(t,s)}return t.$captureRef$},If=(e,t)=>{try{const r=t[0],n=e.$static$;switch(r){case 1:case 2:{let s,i;r===1?(s=t[1],i=t[3]):(s=t[3],i=t[1]);const a=Ae(s);if(a==null)return;const o=t[4],l=s.namespaceURI===Rr;n.$containerState$.$subsManager$.$clearSignal$(t);let c=Ge(t[2],t.slice(0,-1));o==="class"?c=ti(c,Ae(i)):o==="style"&&(c=Rn(c));const d=oi(a);return o in d.$props$&&d.$props$[o]===c?void 0:(d.$props$[o]=c,yi(n,s,o,c,l))}case 3:case 4:{const s=t[3];if(!n.$visited$.includes(s)){n.$containerState$.$subsManager$.$clearSignal$(t);const i=void 0;let a=Ge(t[2],t.slice(0,-1));const o=Qp();Array.isArray(a)&&(a=new nr(st,{},null,a,0,null));let l=it(a,i);if(te(l))Pt("Rendering promises in JSX signals is not supported");else{l===void 0&&(l=it("",i));const c=ul(s);if(e.$cmpCtx$=$e(Lf(t[1]),e.$static$.$containerState$),c.$type$==l.$type$&&c.$key$==l.$key$&&c.$id$==l.$id$)zt(e,c,l,0);else{const d=[],u=c.$elm$,h=xt(e,l,0,d);d.length&&Pt("Rendering promises in JSX signals is not supported"),o[3]=h,Vt(e.$static$,s.parentElement,h,u),u&&wi(n,u)}}}}}}catch{}};function Lf(e){for(;e;){if(pt(e))return e;e=e.parentElement}throw new Error("Not found")}var Rf=(e,t)=>{if(e[0]===0){const r=e[1];di(r)?li(r,t):Df(r,t)}else Of(e,t)},Df=(e,t)=>{const r=qe();r||zo(t.$containerEl$);const n=$e(e,t);if(n.$componentQrl$,!(n.$flags$&Yt))if(n.$flags$|=Yt,t.$hostsRendering$!==void 0)t.$hostsStaging$.add(n);else{if(r){Qe("Can not rerender in server platform");return}t.$hostsNext$.add(n),ci(t)}},Of=(e,t)=>{const r=t.$hostsRendering$!==void 0;t.$opsNext$.add(e),r||ci(t)},li=(e,t)=>{e.$flags$&Tt||(e.$flags$|=Tt,t.$hostsRendering$!==void 0?t.$taskStaging$.add(e):(t.$taskNext$.add(e),ci(t)))},ci=e=>(e.$renderPromise$===void 0&&(e.$renderPromise$=Nn().nextTick(()=>Mo(e))),e.$renderPromise$),Bf=()=>{const[e]=oe();li(e,sr(pi(e.$el$)))},Mo=async e=>{const t=e.$containerEl$,r=Nr(t);try{const n=_o(r,e),s=n.$static$,i=e.$hostsRendering$=new Set(e.$hostsNext$);e.$hostsNext$.clear(),await Qf(e,n),e.$hostsStaging$.forEach(l=>{i.add(l)}),e.$hostsStaging$.clear();const a=Array.from(e.$opsNext$);e.$opsNext$.clear();const o=Array.from(i);Ff(o),!e.$styleMoved$&&o.length>0&&(e.$styleMoved$=!0,(t===r.documentElement?r.body:t).querySelectorAll("style[q\\:style]").forEach(l=>{e.$styleIds$.add(Re(l,An)),vl(s,r.head,l)}));for(const l of o){const c=l.$element$;if(!s.$hostElements$.has(c)&&l.$componentQrl$){c.isConnected,s.$roots$.push(l);try{await ai(n,l,zf(c.parentElement))}catch(d){Pt(d)}}}return a.forEach(l=>{If(n,l)}),s.$operations$.push(...s.$postOperations$),s.$operations$.length===0?(va(s),void await la(e,n)):(await bh(s),va(s),la(e,n))}catch(n){Pt(n)}},zf=e=>{let t=0;return e&&(e.namespaceURI===Rr&&(t|=Pe),e.tagName==="HEAD"&&(t|=ln)),t},la=async(e,t)=>{const r=t.$static$.$hostElements$;await jf(e,t,(n,s)=>(n.$flags$&Vo)!==0&&(!s||r.has(n.$el$))),e.$hostsStaging$.forEach(n=>{e.$hostsNext$.add(n)}),e.$hostsStaging$.clear(),e.$hostsRendering$=void 0,e.$renderPromise$=void 0,e.$hostsNext$.size+e.$taskNext$.size+e.$opsNext$.size>0&&(e.$renderPromise$=Mo(e))},ps=e=>(e.$flags$&ui)!==0,ca=e=>(e.$flags$&Wo)!==0,Qf=async(e,t)=>{const r=e.$containerEl$,n=[],s=[];e.$taskNext$.forEach(i=>{ps(i)&&(s.push(F(i.$qrl$.$resolveLazy$(r),()=>i)),e.$taskNext$.delete(i)),ca(i)&&(n.push(F(i.$qrl$.$resolveLazy$(r),()=>i)),e.$taskNext$.delete(i))});do if(e.$taskStaging$.forEach(i=>{ps(i)?s.push(F(i.$qrl$.$resolveLazy$(r),()=>i)):ca(i)?n.push(F(i.$qrl$.$resolveLazy$(r),()=>i)):e.$taskNext$.add(i)}),e.$taskStaging$.clear(),s.length>0){const i=await Promise.all(s);sn(i),await Promise.all(i.map(a=>on(a,e,t))),s.length=0}while(e.$taskStaging$.size>0);if(n.length>0){const i=await Promise.all(n);sn(i);for(const a of i)on(a,e,t)}},Mf=(e,t)=>{const r=e.$containerEl$,n=e.$taskStaging$;if(!n.size)return;const s=[];let i=20;const a=()=>{if(n.forEach(o=>{ps(o)&&s.push(F(o.$qrl$.$resolveLazy$(r),()=>o))}),n.clear(),s.length>0)return Promise.all(s).then(async o=>{if(sn(o),await Promise.all(o.map(l=>on(l,e,t))),s.length=0,--i&&n.size>0)return a();i||Qe(`Infinite task loop detected. Tasks:
${Array.from(n).map(l=>`  ${l.$qrl$.$symbol$}`).join(`
`)}`)})};return a()},jf=async(e,t,r)=>{const n=[],s=e.$containerEl$;e.$taskNext$.forEach(i=>{r(i,!1)&&(i.$el$.isConnected&&n.push(F(i.$qrl$.$resolveLazy$(s),()=>i)),e.$taskNext$.delete(i))});do if(e.$taskStaging$.forEach(i=>{i.$el$.isConnected&&(r(i,!0)?n.push(F(i.$qrl$.$resolveLazy$(s),()=>i)):e.$taskNext$.add(i))}),e.$taskStaging$.clear(),n.length>0){const i=await Promise.all(n);sn(i);for(const a of i)on(a,e,t);n.length=0}while(e.$taskStaging$.size>0)},Ff=e=>{e.sort((t,r)=>2&t.$element$.compareDocumentPosition(hn(r.$element$))?1:-1)},sn=e=>{const t=qe();e.sort((r,n)=>t||r.$el$===n.$el$?r.$index$<n.$index$?-1:1:2&r.$el$.compareDocumentPosition(hn(n.$el$))?1:-1)},Uf=(e,t)=>{Fo(jo(e,void 0),t)},ua=(e,t)=>{Fo(jo(e,"document"),t)},jo=(e,t)=>{const r=t!==void 0?t+":":"";return Array.isArray(e)?e.map(n=>`${r}on-${n}`):`${r}on-${e}`},Fo=(e,t)=>{if(t){const r=On(),n=$e(r.$hostElement$,r.$renderCtx$.$static$.$containerState$);typeof e=="string"?n.li.push([fs(e),t]):n.li.push(...e.map(s=>[fs(s),t])),n.$flags$|=at}},Vf=e=>{const t=sh();return nl(Se(e)&&!ki(e)?ve(void 0,e):e,t,0)},Uo=e=>{const{val:t,set:r}=At();return t??r(e=Se(e)&&!ki(e)?e():e)},ue=e=>Uo(()=>Vf(e)),Vo=1,ui=2,Wo=4,Tt=16,an=(e,t)=>{const{val:r,set:n,iCtx:s,i,elCtx:a}=At();if(r)return;const o=s.$renderCtx$.$static$.$containerState$,l=new Ir(Tt|ui,i,a.$element$,e,void 0);n(!0),e.$resolveLazy$(o.$containerEl$),a.$tasks$||(a.$tasks$=[]),a.$tasks$.push(l),Zo(s,()=>Ko(l,o,s.$renderCtx$)),qe()&&ms(l,t?.eagerness)},Ho=e=>{const t=On(),r=t.$renderCtx$.$static$.$containerState$,n=$e(t.$hostElement$,r),s=nl(void 0,r,mi|sl,void 0),i=new Ir(ui|24,0,n.$element$,e,s);return e.$resolveLazy$(r.$containerEl$),(n.$tasks$||=[]).push(i),Zo(t,()=>Go(i,r,t.$renderCtx$)),s},Wf=e=>Uo(()=>Ho(e)),a0=kn(Wf),o0=kn(Ho),Hf=(e,t)=>{const{val:r,set:n,i:s,iCtx:i,elCtx:a}=At(),o=t?.strategy??"intersection-observer";if(r){qe()&&ms(r,o);return}const l=new Ir(Vo,s,a.$element$,e,void 0),c=i.$renderCtx$.$static$.$containerState$;a.$tasks$||(a.$tasks$=[]),a.$tasks$.push(l),n(l),ms(l,o),qe()||(e.$resolveLazy$(c.$containerEl$),li(l,c))},Jo=e=>(e.$flags$&Wo)!==0,Jf=e=>!!(8&e.$flags$),on=async(e,t,r)=>(e.$flags$&Tt,Jo(e)?Kf(e,t,r):Jf(e)?Go(e,t,r):Ko(e,t,r)),Kf=(e,t,r,n)=>{e.$flags$&=~Tt,Sr(e);const s=xe(r.$static$.$locale$,e.$el$,void 0,"qTask"),{$subsManager$:i}=t;s.$renderCtx$=r;const a=e.$qrl$.getFn(s,()=>{i.$clearSub$(e)}),o=[],l=e.$state$;const c=Or(l),d={track:($,x)=>{if(Se($)){const T=xe();return T.$renderCtx$=r,T.$subscriber$=[0,e],ve(T,$)}const b=be($);return b?b.$addSub$([0,e],x):Us(qn(26),$),x?$[x]:ae($)?$.value:$},cleanup($){o.push($)},cache($){let x=0;x=$==="immutable"?1/0:$,l._cache=x},previous:c._resolved};let u,h,p=!1;const v=($,x)=>!p&&(p=!0,$?(p=!0,l.loading=!1,l._state="resolved",l._resolved=x,l._error=void 0,u(x)):(p=!0,l.loading=!1,l._state="rejected",l._error=x,h(x)),!0);ve(s,()=>{l._state="pending",l.loading=!qe(),l.value=new Promise(($,x)=>{u=$,h=x})}),e.$destroy$=jn(()=>{p=!0,o.forEach($=>$())});const y=Hs(()=>F(n,()=>a(d)),$=>{v(!0,$)},$=>{v(!1,$)}),m=c._timeout;return m>0?Promise.race([y,Od(m).then(()=>{v(!1,new Error("timeout"))&&Sr(e)})]):y},Ko=(e,t,r)=>{e.$flags$&=~Tt,Sr(e);const n=e.$el$,s=xe(r.$static$.$locale$,n,void 0,"qTask");s.$renderCtx$=r;const{$subsManager$:i}=t,a=e.$qrl$.getFn(s,()=>{i.$clearSub$(e)}),o=[];e.$destroy$=jn(()=>{o.forEach(c=>c())});const l={track:(c,d)=>{if(Se(c)){const h=xe();return h.$subscriber$=[0,e],ve(h,c)}const u=be(c);return u?u.$addSub$([0,e],d):Us(qn(26),c),d?c[d]:ae(c)?c.value:c},cleanup(c){o.push(c)}};return Hs(()=>a(l),c=>{Se(c)&&o.push(c)},c=>{ei(c,n,r)})},Go=(e,t,r)=>{e.$state$,e.$flags$&=~Tt,Sr(e);const n=e.$el$,s=xe(r.$static$.$locale$,n,void 0,"qComputed");s.$subscriber$=[0,e],s.$renderCtx$=r;const{$subsManager$:i}=t,a=e.$qrl$.getFn(s,()=>{i.$clearSub$(e)}),o=c=>{tl(()=>{const d=e.$state$;d[pr]&=~mi,d.untrackedValue!==c&&(d.untrackedValue=c,d[Ie].$notifySubs$())})},l=c=>{ei(c,n,r)};try{return F(e.$qrl$.$resolveLazy$(t.$containerEl$),()=>{const c=a();if(te(c)){const d=new Error("useComputed$: Async functions in computed tasks are deprecated and will stop working in v2. Use useTask$ or useResource$ instead.").stack;return d&&d.replace(/^Error:\s*/,""),ia(),c.then(o,l)}o(c)})}catch(c){l(c)}},Sr=e=>{const t=e.$destroy$;if(t){e.$destroy$=void 0;try{t()}catch(r){Pt(r)}}},Yo=e=>{32&e.$flags$?(e.$flags$&=-33,(0,e.$qrl$)()):Sr(e)},ms=(e,t)=>{t==="visible"||t==="intersection-observer"?Uf("qvisible",es(e)):t==="load"||t==="document-ready"?ua("qinit",es(e)):t!=="idle"&&t!=="document-idle"||ua("qidle",es(e))},es=e=>{const t=e.$qrl$,r=ir(t.$chunk$,"_hW",Bf,null,null,[e],t.$symbol$);return t.dev&&(r.dev=t.dev),r},di=e=>Me(e)&&e instanceof Ir,Gf=(e,t)=>{let r=`${ot(e.$flags$)} ${ot(e.$index$)} ${t(e.$qrl$)} ${t(e.$el$)}`;return e.$state$&&(r+=` ${t(e.$state$)}`),r},Yf=e=>{const[t,r,n,s,i]=e.split(" ");return new Ir(De(t),De(r),s,n,i)},Ir=class{$flags$;$index$;$el$;$qrl$;$state$;constructor(e,t,r,n,s){this.$flags$=e,this.$index$=t,this.$el$=r,this.$qrl$=n,this.$state$=s}};function Xf(e){return Zf(e)&&e.nodeType===1}function Zf(e){return e&&typeof e.nodeType=="number"}var Yt=1,at=2,fi=4,hi=8,Ae=e=>e[En],$e=(e,t)=>{const r=Ae(e);if(r)return r;const n=Dn(e),s=Re(e,"q:id");if(s){const i=t.$pauseCtx$;if(n.$id$=s,i){const{getObject:a,meta:o,refs:l}=i;if(Xf(e)){const c=l[s];c&&(n.$refMap$=c.split(" ").map(a),n.li=Jd(n,t.$containerEl$))}else{const c=e.getAttribute("q:sstyle");n.$scopeIds$=c?c.split("|"):null;const d=o[s];if(d){const u=d.s,h=d.h,p=d.c,v=d.w;if(u&&(n.$seq$=u.split(" ").map(a)),v&&(n.$tasks$=v.split(" ").map(a)),p){n.$contexts$=new Map;for(const y of p.split(" ")){const[m,$]=y.split("=");n.$contexts$.set(m,a($))}}if(h){const[y,m]=h.split(" ");if(n.$flags$=fi,y&&(n.$componentQrl$=a(y)),m){const $=a(m);n.$props$=$,Ln($,2),$[j]=eh($)}else n.$props$=Ar(In(),t)}}}}}return n},eh=e=>{const t={},r=It(e);for(const n in r)n.startsWith("$$")&&(t[n.slice(2)]=r[n]);return t},Dn=e=>{const t={$flags$:0,$id$:"",$element$:e,$refMap$:[],li:[],$tasks$:null,$seq$:null,$slots$:null,$scopeIds$:null,$appendStyles$:null,$props$:null,$vdom$:null,$componentQrl$:null,$contexts$:null,$dynamicSlots$:null,$parentCtx$:void 0,$realParentCtx$:void 0};return ge(),e[En]=t,t},th=(e,t)=>{e.$tasks$?.forEach(r=>{t.$clearSub$(r),Yo(r)}),e.$componentQrl$=null,e.$seq$=null,e.$tasks$=null},Ht;function Xo(e){if(Ht===void 0){const t=me();if(t&&t.$locale$)return t.$locale$;if(e!==void 0)return e;throw new Error("Reading `locale` outside of context.")}return Ht}function da(e,t){const r=Ht;try{return Ht=e,t()}finally{Ht=r}}function rh(e){Ht=e}var hr,me=()=>{if(!hr){const e=typeof document<"u"&&document&&document.__q_context__;return e?G(e)?document.__q_context__=el(e):e:void 0}return hr},nh=()=>{const e=me();if(!e)throw ee(14);return e},On=()=>{const e=me();if(!e||e.$event$!=="qRender")throw ee(20);return e.$hostElement$,e.$waitOn$,e.$renderCtx$,e.$subscriber$,e},sh=()=>On().$renderCtx$.$static$.$containerState$;function ve(e,t,...r){return ih.call(this,e,t,r)}function ih(e,t,r){const n=hr;let s;try{hr=e,s=t.apply(this,r)}finally{hr=n}return s}var Zo=(e,t)=>{const r=e.$waitOn$;if(r.length===0){const n=t();te(n)&&r.push(n)}else r.push(Promise.all(r).then(t))},el=([e,t,r])=>{const n=e.closest("[q\\:container]")?.getAttribute("q:locale")||void 0;return n&&rh(n),xe(n,void 0,e,t,r)},xe=(e,t,r,n,s)=>{const i={$url$:s,$i$:0,$hostElement$:t,$element$:r,$event$:n,$qrl$:void 0,$waitOn$:void 0,$subscriber$:void 0,$renderCtx$:void 0,$locale$:e||(typeof n=="object"&&n&&"locale"in n?n.locale:void 0)};return ge(),i},pi=e=>e.closest("[q\\:container]"),tl=e=>ve(void 0,e),fa=xe(void 0,void 0,void 0,"qRender"),Ge=(e,t)=>(fa.$subscriber$=t,ve(fa,()=>e.value)),ah=()=>{const e=me();if(e)return e.$element$??e.$hostElement$??e.$qrl$?.$setContainer$(void 0)},oh=()=>{const e=me();if(e)return e.$event$},rl=e=>{const t=me();return t&&t.$hostElement$&&t.$renderCtx$&&($e(t.$hostElement$,t.$renderCtx$.$static$.$containerState$).$flags$|=hi),e},nl=(e,t,r,n)=>new xr(e,t.$subsManager$.$createManager$(n),r),pr=Symbol("proxy manager"),sl=1,mi=2,il=Symbol("unassigned signal"),Lr=class{},xr=class extends Lr{untrackedValue;[Ie];[pr]=0;constructor(e,t,r){super(),this.untrackedValue=e,this[Ie]=t,this[pr]=r}valueOf(){}toString(){return`[Signal ${String(this.value)}]`}toJSON(){return{value:this.value}}get value(){if(this[pr]&mi)throw il;const e=me()?.$subscriber$;return e&&this[Ie].$addSub$(e),this.untrackedValue}set value(e){const t=this[Ie];t&&this.untrackedValue!==e&&(this.untrackedValue=e,t.$notifySubs$())}},gs=class extends Lr{$func$;$args$;$funcStr$;constructor(e,t,r){super(),this.$func$=e,this.$args$=t,this.$funcStr$=r}get value(){return this.$func$.apply(void 0,this.$args$)}},$s=class extends Lr{ref;prop;constructor(e,t){super(),this.ref=e,this.prop=t}get[Ie](){return be(this.ref)}get value(){return this.ref[this.prop]}set value(e){this.ref[this.prop]=e}},ae=e=>e instanceof Lr,al=(e,t)=>{if(!Me(e))return e[t];if(e instanceof Lr)return e;const r=It(e);if(r){const s=r["$$"+t];if(s)return ae(s),s;if(r[j]?.[t]!==!0)return new $s(e,t)}const n=e[j]?.[t];return ae(n)?n:j},Ce=(e,t)=>{const r=al(e,t);return r===j?e[t]:r},ha=Symbol("ContainerState"),sr=e=>{let t=e[ha];return t||(e[ha]=t=gi(e,Re(e,"q:base")??"/")),t},gi=(e,t)=>{const r={};if(e){const s=e.attributes;if(s)for(let i=0;i<s.length;i++){const a=s[i];r[a.name]=a.value}}const n={$containerEl$:e,$elementIndex$:0,$styleMoved$:!1,$proxyMap$:new WeakMap,$opsNext$:new Set,$taskNext$:new Set,$taskStaging$:new Set,$hostsNext$:new Set,$hostsStaging$:new Set,$styleIds$:new Set,$events$:new Set,$serverData$:{containerAttributes:r},$base$:t,$renderPromise$:void 0,$hostsRendering$:void 0,$pauseCtx$:void 0,$subsManager$:null,$inlineFns$:new Map};return ge(),n.$subsManager$=Bp(n),n},$i=(e,t)=>{if(Se(e))return e(t);if(ae(e))return qe()?e.untrackedValue=t:e.value=t;throw ee(32,e)},ol=128,lh=e=>ht(e)&&e.hasAttribute("q:container"),ot=e=>e.toString(36),De=e=>parseInt(e,36),ll=e=>{const t=e.indexOf(":");return e&&Md(e.slice(t+1))},Rr="http://www.w3.org/2000/svg",Pe=1,ln=2,cn=[],un=(e,t,r,n)=>{t.$elm$;const s=r.$children$;if(s.length===1&&s[0].$type$===":skipRender"){r.$children$=t.$children$;return}const i=t.$elm$;let a=fn;t.$children$===cn&&i.nodeName==="HEAD"&&(a=dh,n|=ln);const o=ch(t,a);return o.length>0&&s.length>0?uh(e,i,o,s,n):o.length>0&&s.length===0?vi(e.$static$,o,0,o.length-1):s.length>0?fl(e,i,null,s,0,s.length-1,n):void 0},ch=(e,t)=>{const r=e.$children$;return r===cn?e.$children$=cl(e.$elm$,t):r},uh=(e,t,r,n,s)=>{let i=0,a=0,o=r.length-1,l=r[0],c=r[o],d=n.length-1,u=n[0],h=n[d],p,v,y;const m=[],$=e.$static$;for(;i<=o&&a<=d;)l==null?l=r[++i]:c==null?c=r[--o]:u==null?u=n[++a]:h==null?h=n[--d]:l.$id$===u.$id$?(m.push(zt(e,l,u,s)),l=r[++i],u=n[++a]):c.$id$===h.$id$?(m.push(zt(e,c,h,s)),c=r[--o],h=n[--d]):l.$key$&&l.$id$===h.$id$?(l.$elm$,c.$elm$,m.push(zt(e,l,h,s)),Th($,t,l.$elm$,c.$elm$),l=r[++i],h=n[--d]):c.$key$&&c.$id$===u.$id$?(l.$elm$,c.$elm$,m.push(zt(e,c,u,s)),Vt($,t,c.$elm$,l.$elm$),c=r[--o],u=n[++a]):(p===void 0&&(p=xh(r,i,o)),v=p[u.$key$],v===void 0?Vt($,t,xt(e,u,s,m),l?.$elm$):(y=r[v],y.$type$!==u.$type$?F(xt(e,u,s,m),b=>{Vt($,t,b,l?.$elm$)}):(m.push(zt(e,y,u,s)),r[v]=void 0,y.$elm$,Vt($,t,y.$elm$,l.$elm$))),u=n[++a]);a<=d&&m.push(fl(e,t,n[d+1]==null?null:n[d+1].$elm$,n,a,d,s));let x=Js(m);return i<=o&&(x=F(x,()=>{vi($,r,i,o)})),x},Ut=(e,t)=>{const r=ze(e)?e.close:null,n=[];let s=e.firstChild;for(;(s=Si(s))&&(t(s)&&n.push(s),s=s.nextSibling,s!==r););return n},cl=(e,t)=>Ut(e,t).map(ul),ul=e=>ht(e)?Ae(e)?.$vdom$??dn(e):dn(e),dn=e=>{if(pt(e)){const t=new He(e.localName,{},null,cn,0,ys(e));return t.$elm$=e,t}if(Fs(e)){const t=new He(e.nodeName,pe,null,cn,0,null);return t.$text$=e.data,t.$elm$=e,t}},dh=e=>{const t=e.nodeType;return t===1?e.hasAttribute("q:head"):t===111},vs=e=>e.nodeName==="Q:TEMPLATE",fn=e=>{const t=e.nodeType;if(t===3||t===111)return!0;if(t!==1)return!1;const r=e.nodeName;return r!=="Q:TEMPLATE"&&(r==="HEAD"?e.hasAttribute("q:head"):r!=="STYLE"||!e.hasAttribute(An))},dl=e=>{const t={};for(const r of e){const n=fh(r);(t[n]??(t[n]=new He(Xt,{[$o]:""},null,[],0,n))).$children$.push(r)}return t},zt=(e,t,r,n)=>{t.$type$,r.$type$,t.$key$,r.$key$,t.$id$,r.$id$;const s=t.$elm$,i=r.$type$,a=e.$static$,o=a.$containerState$,l=e.$cmpCtx$;if(r.$elm$=s,i==="#text"){a.$visited$.push(s);const h=r.$signal$;h&&(r.$text$=wr(Ge(h,[4,l.$element$,h,s]))),lt(a,s,"data",r.$text$);return}if(i==="#signal")return;const c=r.$props$,d=r.$flags$,u=$e(s,o);if(i!==Xt){let h=(n&Pe)!==0;if(h||i!=="svg"||(n|=Pe,h=!0),c!==pe){1&d||(u.li.length=0);const p=t.$props$;r.$props$=p;for(const v in c){let y=c[v];if(v!=="ref"){if(Ys(v)){ml(a,s,Zs(u.li,v,y,o.$containerEl$));continue}ae(y)&&(y=Ge(y,[1,l.$element$,y,s,v])),v==="class"?y=ti(y,l):v==="style"&&(y=Rn(y)),p[v]!==y&&(p[v]=y,yi(a,s,v,y,h))}else y!==void 0&&$i(y,s)}}return 2&d||(h&&i==="foreignObject"&&(n&=~Pe),c[ye]!==void 0)||i==="textarea"?void 0:un(e,t,r,n)}if("q:renderFn"in c){const h=c.props;yh(o,u,h);let p=!!(u.$flags$&Yt);return p||u.$componentQrl$||u.$element$.hasAttribute("q:id")||(Po(e,u),u.$componentQrl$=h["q:renderFn"],u.$componentQrl$,p=!0),p?F(ai(e,u,n),()=>pa(e,u,r,n)):pa(e,u,r,n)}if("q:s"in c){l.$slots$,l.$slots$.push(r);return}if(ye in c)lt(a,s,"innerHTML",c[ye]);else if(!(2&d))return un(e,t,r,n)},pa=(e,t,r,n)=>{if(2&r.$flags$)return;const s=e.$static$,i=dl(r.$children$),a=pl(t);for(const o in a.slots)if(!i[o]){const l=a.slots[o],c=cl(l,fn);if(c.length>0){const d=Ae(l);d&&d.$vdom$&&(d.$vdom$.$children$=[]),vi(s,c,0,c.length-1)}}for(const o in a.templates){const l=a.templates[o];l&&!i[o]&&(a.templates[o]=void 0,wi(s,l))}return Js(Object.keys(i).map(o=>{const l=i[o],c=hl(s,a,t,o,e.$static$.$containerState$),d=oi(c),u=Er(e),h=c.$element$;u.$slotCtx$=c,c.$vdom$=l,l.$elm$=h;let p=n&~Pe;h.isSvg&&(p|=Pe);const v=s.$addSlots$.findIndex(y=>y[0]===h);return v>=0&&s.$addSlots$.splice(v,1),un(u,d,l,p)}))},fl=(e,t,r,n,s,i,a)=>{const o=[];for(;s<=i;++s){const l=n[s];const c=xt(e,l,a,o);Vt(e.$static$,t,c,r)}return Mt(o)},vi=(e,t,r,n)=>{for(;r<=n;++r){const s=t[r];s&&(s.$elm$,wi(e,s.$elm$))}},hl=(e,t,r,n,s)=>{const i=t.slots[n];if(i)return $e(i,s);const a=t.templates[n];if(a)return $e(a,s);const o=yl(e.$doc$,n),l=Dn(o);return l.$parentCtx$=r,qh(e,r.$element$,o),t.templates[n]=o,l},fh=e=>e.$props$[Ne]??"",xt=(e,t,r,n)=>{const s=t.$type$,i=e.$static$.$doc$,a=e.$cmpCtx$;if(s==="#text")return t.$elm$=i.createTextNode(t.$text$);if(s==="#signal"){const m=t.$signal$;const $=m.value;if(Et($)){const x=it($);if(ae(x))throw new Error("NOT IMPLEMENTED: Promise");if(Array.isArray(x))throw new Error("NOT IMPLEMENTED: Array");{const b=xt(e,x,r,n);return Ge(m,4&r?[3,b,m,b]:[4,a.$element$,m,b]),t.$elm$=b}}{const x=i.createTextNode(t.$text$);return x.data=t.$text$=wr($),Ge(m,4&r?[3,x,m,x]:[4,a.$element$,m,x]),t.$elm$=x}}let o,l=!!(r&Pe);l||s!=="svg"||(r|=Pe,l=!0);const c=s===Xt,d=t.$props$,u=e.$static$,h=u.$containerState$;c?o=Rh(i,l):s==="head"?(o=i.head,r|=ln):(o=bi(i,s,l),r&=~ln),2&t.$flags$&&(r|=4),t.$elm$=o;const p=Dn(o);if(e.$slotCtx$?(p.$parentCtx$=e.$slotCtx$,p.$realParentCtx$=e.$cmpCtx$):p.$parentCtx$=e.$cmpCtx$,c){if("q:renderFn"in d){const m=d["q:renderFn"];const $=In(),x=h.$subsManager$.$createManager$(),b=new Proxy($,new bo(h,x)),T=d.props;if(h.$proxyMap$.set($,b),p.$props$=b,T!==pe){const S=$[j]=T[j]??pe;for(const _ in T)if(_!=="children"&&_!==Ne){const A=S[_];ae(A)?$["$$"+_]=A:$[_]=T[_]}}Po(e,p),p.$componentQrl$=m;const k=F(ai(e,p,r),()=>{let S=t.$children$;if(S.length===0)return;S.length===1&&S[0].$type$===":skipRender"&&(S=S[0].$children$);const _=pl(p),A=[],O=dl(S);for(const B in O){const Q=O[B],C=hl(u,_,p,B,u.$containerState$),q=Er(e),R=C.$element$;q.$slotCtx$=C,C.$vdom$=Q,Q.$elm$=R;let U=r&~Pe;R.isSvg&&(U|=Pe);for(const Z of Q.$children$){const le=xt(q,Z,U,A);Z.$elm$,Z.$elm$,vl(u,R,le)}}return Mt(A)});return te(k)&&n.push(k),o}if("q:s"in d)a.$slots$,Ih(o,t.$key$),ke(o,"q:sref",a.$id$),ke(o,"q:s",""),a.$slots$.push(t),u.$addSlots$.push([o,a.$element$]);else if(ye in d)return lt(u,o,"innerHTML",d[ye]),o}else{if(t.$immutableProps$&&$a(u,p,a,d!==pe?Object.fromEntries(Object.entries(t.$immutableProps$).map(([m,$])=>[m,$===j?d[m]:$])):t.$immutableProps$,l,!0),d!==pe&&(p.$vdom$=t,t.$props$=$a(u,p,a,t.$immutableProps$?Object.fromEntries(Object.entries(d).filter(([m])=>!(m in t.$immutableProps$))):d,l,!1)),l&&s==="foreignObject"&&(l=!1,r&=~Pe),a){const m=a.$scopeIds$;m&&m.forEach($=>{o.classList.add($)}),a.$flags$&at&&(p.li.push(...a.li),a.$flags$&=~at)}for(const m of p.li)ml(u,o,m[0]);if(d[ye]!==void 0)return o;l&&s==="foreignObject"&&(l=!1,r&=~Pe)}let v=t.$children$;if(v.length===0)return o;v.length===1&&v[0].$type$===":skipRender"&&(v=v[0].$children$);const y=v.map(m=>xt(e,m,r,n));for(const m of y)_r(o,m);return o},hh=e=>{const t=e.$slots$;return t||(e.$element$.parentElement,e.$slots$=ph(e))},pl=e=>{const t=hh(e),r={},n={},s=Array.from(e.$element$.childNodes).filter(vs);for(const i of t)i.$elm$,r[i.$key$??""]=i.$elm$;for(const i of s)n[Re(i,Ne)??""]=i;return{slots:r,templates:n}},ph=e=>{const t=e.$element$.parentElement;return zh(t,"q:sref",e.$id$).map(dn)},mh=(e,t,r)=>(lt(e,t.style,"cssText",r),!0),ma=(e,t,r)=>(r==null,t.namespaceURI===Rr?Pr(e,t,"class",r):lt(e,t,"className",r),!0),ga=(e,t,r,n)=>n in t&&((t[n]!==r||n==="value"&&!t.hasAttribute(n))&&(n==="value"&&t.tagName!=="OPTION"?Ph(e,t,n,r):lt(e,t,n,r)),!0),cr=(e,t,r,n)=>(Pr(e,t,n.toLowerCase(),r),!0),gh=(e,t,r)=>(lt(e,t,"innerHTML",r),!0),$h=()=>!0,vh={style:mh,class:ma,className:ma,value:ga,checked:ga,href:cr,list:cr,form:cr,tabIndex:cr,download:cr,innerHTML:$h,[ye]:gh},yi=(e,t,r,n,s)=>{if(To(r)){Pr(e,t,r,n!=null?String(n):n);return}const i=vh[r];i&&i(e,t,n,r)||(s||!(r in t)?(r.startsWith(wo)&&gl(r.slice(15)),Pr(e,t,r,n)):lt(e,t,r,n))},$a=(e,t,r,n,s,i)=>{const a={},o=t.$element$;for(const l in n){let c=n[l];if(l!=="ref")if(Ys(l))Zs(t.li,l,c,e.$containerState$.$containerEl$);else{if(ae(c)&&(c=Ge(c,i?[1,o,c,r.$element$,l]:[2,r.$element$,c,o,l])),l==="class"){if(c=ti(c,r),!c)continue}else l==="style"&&(c=Rn(c));a[l]=c,yi(e,o,l,c,s)}else c!==void 0&&$i(c,o)}return a},yh=(e,t,r)=>{let n=t.$props$;if(n||(t.$props$=n=Ar(In(),e)),r===pe)return;const s=be(n);const i=It(n);const a=i[j]=r[j]??pe;for(const o in r)if(o!=="children"&&o!==Ne&&!a[o]){const l=r[o];i[o]!==l&&(i[o]=l,s.$notifySubs$(o))}},mr=(e,t,r,n,s=!1)=>{if(r.$clearSub$(e),pt(e)){if(!s&&n&&e.hasAttribute("q:s")){t.$rmSlots$.push(e);return}const i=Ae(e);i&&th(i,r);const a=ze(e)?e.close:null;let o=e.firstChild;for(;(o=Si(o))&&(mr(o,t,r,!0,s),o=o.nextSibling,o!==a););}};var bh=async e=>{Eh(e)},_r=(e,t)=>{ze(t)?t.appendTo(e):e.appendChild(t)},wh=(e,t)=>{ze(t)?t.remove():e.removeChild(t)},Sh=(e,t,r)=>{ze(t)?t.insertBeforeTo(e,r?.nextSibling??null):e.insertBefore(t,r?.nextSibling??null)},Bn=(e,t,r)=>{ze(t)?t.insertBeforeTo(e,hn(r)):e.insertBefore(t,hn(r))},xh=(e,t,r)=>{const n={};for(let s=t;s<=r;++s){const i=e[s].$key$;i!=null&&(n[i]=s)}return n},ml=(e,t,r)=>{r.startsWith("on:")||Pr(e,t,r,""),gl(r)},gl=e=>{{const t=ll(e);try{(globalThis.qwikevents||=[]).push(t)}catch(r){Qe(r)}}},Pr=(e,t,r,n)=>{e.$operations$.push({$operation$:_h,$args$:[t,r,n]})},_h=(e,t,r)=>{r==null||r===!1?e.removeAttribute(t):ke(e,t,r===!0?"":String(r))},lt=(e,t,r,n)=>{e.$operations$.push({$operation$:$l,$args$:[t,r,n]})},Ph=(e,t,r,n)=>{e.$postOperations$.push({$operation$:$l,$args$:[t,r,n]})},$l=(e,t,r)=>{try{e[t]=r??"",r==null&&ft(e)&&ht(e)&&e.removeAttribute(t)}catch(n){Pt(qn(6),t,{node:e,value:r},n)}},bi=(e,t,r)=>r?e.createElementNS(Rr,t):e.createElement(t),Vt=(e,t,r,n)=>(e.$operations$.push({$operation$:Bn,$args$:[t,r,n||null]}),r),Th=(e,t,r,n)=>(e.$operations$.push({$operation$:Sh,$args$:[t,r,n||null]}),r),vl=(e,t,r)=>(e.$operations$.push({$operation$:_r,$args$:[t,r]}),r),Ch=(e,t)=>{e.$containerState$.$styleIds$.add(t.styleId),e.$postOperations$.push({$operation$:kh,$args$:[e.$containerState$,t]})},kh=(e,t)=>{const r=e.$containerEl$,n=Nr(r),s=n.documentElement===r,i=n.head,a=n.createElement("style");s&&!i&&Qe("document.head is undefined"),ke(a,An,t.styleId),ke(a,"hidden",""),a.textContent=t.content,s&&i?_r(i,a):Bn(r,a,r.firstChild)},qh=(e,t,r)=>{e.$operations$.push({$operation$:Nh,$args$:[t,r]})},Nh=(e,t)=>{Bn(e,t,e.firstChild)},wi=(e,t)=>{pt(t)&&mr(t,e,e.$containerState$.$subsManager$,!0),e.$operations$.push({$operation$:Ah,$args$:[t,e]})},Ah=e=>{const t=e.parentElement;t&&wh(t,e)},yl=(e,t)=>{const r=bi(e,"q:template",!1);return ke(r,Ne,t),ke(r,"hidden",""),ke(r,"aria-hidden","true"),r},Eh=e=>{for(const t of e.$operations$)t.$operation$.apply(void 0,t.$args$);Lh(e)},ys=e=>Re(e,"q:key"),Ih=(e,t)=>{t!==null&&ke(e,"q:key",t)},Lh=e=>{const t=e.$containerState$.$subsManager$;for(const r of e.$rmSlots$){const n=ys(r);const s=Ut(r,fn);if(s.length>0){const i=r.getAttribute("q:sref"),a=e.$roots$.find(o=>o.$id$===i);if(a){const o=a.$element$;if(o.isConnected)if(Ut(o,vs).some(l=>Re(l,Ne)===n))mr(r,e,t,!1);else{const l=yl(e.$doc$,n);for(const c of s)_r(l,c);Bn(o,l,o.firstChild)}else mr(r,e,t,!1)}else mr(r,e,t,!1)}}for(const[r,n]of e.$addSlots$){const s=ys(r);const i=Ut(n,vs).find(a=>a.getAttribute(Ne)===s);i&&(Ut(i,fn).forEach(a=>{_r(r,a)}),i.remove())}},va=()=>{},Rh=(e,t)=>new bl(e.createComment("qv "),e.createComment("/qv"),t),Dh=e=>{if(!e)return{};const t=e.split(" ");return Object.fromEntries(t.map(r=>{const n=r.indexOf("=");return n>=0?[r.slice(0,n),Mh(r.slice(n+1))]:[r,""]}))},Oh=e=>{const t=[];return Object.entries(e).forEach(([r,n])=>{t.push(n?`${r}=${Qh(n)}`:`${r}`)}),t.join(" ")},Bh=(e,t,r)=>e.ownerDocument.createTreeWalker(e,128,{acceptNode(n){const s=Dr(n);return s&&Re(s,t)===r?1:2}}),zh=(e,t,r)=>{const n=Bh(e,t,r),s=[];let i=null;for(;i=n.nextNode();)s.push(Dr(i));return s},Qh=e=>e.replace(/ /g,"+"),Mh=e=>e.replace(/\+/g," "),Xt=":virtual",bl=class{open;close;isSvg;ownerDocument;_qc_=null;nodeType=111;localName=Xt;nodeName=Xt;$attributes$;$template$;constructor(e,t,r){this.open=e,this.close=t,this.isSvg=r,this.$template$=bi(this.ownerDocument=e.ownerDocument,"template",!1),this.$attributes$=Dh(e.data.slice(3)),e.data.startsWith("qv "),e.__virtual=this,t.__virtual=this,ge()}insertBefore(e,t){const r=this.parentElement;return r?r.insertBefore(e,t||this.close):this.$template$.insertBefore(e,t),e}remove(){const e=this.parentElement;if(e){const t=this.childNodes;this.$template$.childElementCount,e.removeChild(this.open);for(let r=0;r<t.length;r++)this.$template$.appendChild(t[r]);e.removeChild(this.close)}}appendChild(e){return this.insertBefore(e,null)}insertBeforeTo(e,t){const r=this.childNodes;e.insertBefore(this.open,t);for(const n of r)e.insertBefore(n,t);e.insertBefore(this.close,t),this.$template$.childElementCount}appendTo(e){this.insertBeforeTo(e,null)}get namespaceURI(){return this.parentElement?.namespaceURI??""}removeChild(e){this.parentElement?this.parentElement.removeChild(e):this.$template$.removeChild(e)}getAttribute(e){return this.$attributes$[e]??null}hasAttribute(e){return e in this.$attributes$}setAttribute(e,t){this.$attributes$[e]=t,this.open.data=ya(this.$attributes$)}removeAttribute(e){delete this.$attributes$[e],this.open.data=ya(this.$attributes$)}matches(e){return!1}compareDocumentPosition(e){return this.open.compareDocumentPosition(e)}closest(e){const t=this.parentElement;return t?t.closest(e):null}querySelectorAll(e){const t=[];return Ut(this,Ed).forEach(r=>{pt(r)&&(r.matches(e)&&t.push(r),t.concat(Array.from(r.querySelectorAll(e))))}),t}querySelector(e){for(const t of this.childNodes)if(ht(t)){if(t.matches(e))return t;const r=t.querySelector(e);if(r!==null)return r}return null}get innerHTML(){return""}set innerHTML(e){const t=this.parentElement;t?(this.childNodes.forEach(r=>this.removeChild(r)),this.$template$.innerHTML=e,t.insertBefore(this.$template$.content,this.close)):this.$template$.innerHTML=e}get firstChild(){if(this.parentElement){const e=this.open.nextSibling;return e===this.close?null:e}return this.$template$.firstChild}get nextSibling(){return this.close.nextSibling}get previousSibling(){return this.open.previousSibling}get childNodes(){if(!this.parentElement)return Array.from(this.$template$.childNodes);const e=[];let t=this.open;for(;(t=t.nextSibling)&&t!==this.close;)e.push(t);return e}get isConnected(){return this.open.isConnected}get parentElement(){return this.open.parentElement}},ya=e=>`qv ${Oh(e)}`,Si=e=>{if(e==null)return null;if(qr(e)){const t=Dr(e);if(t)return t}return e},jh=e=>{let t=e,r=1;for(;t=t.nextSibling;)if(qr(t)){const n=t.__virtual;if(n)t=n;else if(t.data.startsWith("qv "))r++;else if(t.data==="/qv"&&(r--,r===0))return t}},Dr=e=>{const t=e.__virtual;return t||(e.data.startsWith("qv ")?new bl(e,jh(e),e.parentElement?.namespaceURI===Rr):null)},hn=e=>e==null?null:ze(e)?e.open:e,Fh=async e=>{const t=gi(null,null),r=Sl(t);let n;for(V(e,r,!1);(n=r.$promises$).length>0;){r.$promises$=[];const c=await Promise.allSettled(n);for(const d of c)d.status==="rejected"&&console.error(d.reason)}const s=Array.from(r.$objSet$.keys());let i=0;const a=new Map;for(const c of s)a.set(c,ot(i)),i++;if(r.$noSerialize$.length>0){const c=a.get(void 0);for(const d of r.$noSerialize$)a.set(d,c)}const o=c=>{let d="";if(te(c)){const h=xl(c);if(!h)throw ee(27,c);c=h.value,d+=h.resolved?"~":"_"}if(Me(c)){const h=It(c);h&&(d+="!",c=h)}const u=a.get(c);if(u===void 0)throw ee(27,c);return u+d},l=Pl(s,o,null,r,t);return JSON.stringify({_entry:o(e),_objs:l})},Uh=async e=>{const t=Nr(e),r=t.documentElement,n=ho(e)?r:e;if(Re(n,"q:container")==="paused")throw ee(21);const s=n===t.documentElement?t.body:n,i=sr(n),a=Vh(n,Xh);ke(n,"q:container","paused");for(const u of a){const h=u.$element$,p=u.li;if(u.$scopeIds$){const v=So(u.$scopeIds$);v&&h.setAttribute("q:sstyle",v)}if(u.$id$&&h.setAttribute("q:id",u.$id$),ht(h)&&p.length>0){const v=Xs(p);for(const y of v)h.setAttribute(y[0],Pi(y[1],i,u))}}const o=await wl(a,i,u=>ft(u)&&Fs(u)?tp(u,i):null),l=t.createElement("script");ke(l,"type","qwik/json"),l.textContent=Kh(JSON.stringify(o.state,void 0,void 0)),s.appendChild(l);const c=Array.from(i.$events$,u=>JSON.stringify(u)),d=t.createElement("script");return d.textContent=`(window.qwikevents||=[]).push(${c.join(", ")})`,s.appendChild(d),o},wl=async(e,t,r,n)=>{const s=Sl(t);n?.forEach((b,T)=>{s.$seen$.add(T)});let i=!1;for(const b of e)if(b.$tasks$)for(const T of b.$tasks$)Jo(T)&&s.$resources$.push(T.$state$),Yo(T);for(const b of e){const T=b.$element$,k=b.li;for(const S of k)if(ht(T)){const _=S[1],A=_.$captureRef$;if(A)for(const O of A)V(O,s,!0);s.$qrls$.push(_),i=!0}}if(!i)return{state:{refs:{},ctx:{},objs:[],subs:[]},objs:[],funcs:[],qrls:[],resources:s.$resources$,mode:"static"};let a;for(;(a=s.$promises$).length>0;)s.$promises$=[],await Promise.all(a);const o=s.$elements$.length>0;if(o){for(const b of s.$deferElements$)xi(b,s,b.$element$);for(const b of e)Wh(b,s)}for(;(a=s.$promises$).length>0;)s.$promises$=[],await Promise.all(a);const l=new Map,c=Array.from(s.$objSet$.keys()),d=new Map,u=b=>{let T="";if(te(b)){const _=xl(b);if(!_)return null;b=_.value,T+=_.resolved?"~":"_"}if(Me(b)){const _=It(b);if(_)T+="!",b=_;else if(pt(b)){const A=(O=>{let B=l.get(O);return B===void 0&&(B=ep(O),B||console.warn("Missing ID",O),l.set(O,B)),B})(b);return A?"#"+A+T:null}}const k=d.get(b);if(k)return k+T;const S=n?.get(b);return S?"*"+S:r?r(b):null},h=b=>{const T=u(b);if(T===null){if(Ci(b)){const k=ot(d.size);return d.set(b,k),k}throw ee(27,b)}return T},p=new Map;for(const b of c){const T=Zh(b,t)?.$subs$;if(!T)continue;const k=El(b)??0,S=[];1&k&&S.push(k);for(const _ of T){const A=_[1];_[0]===0&&ft(A)&&ze(A)&&!s.$elements$.includes(Ae(A))||S.push(_)}S.length>0&&p.set(b,S)}c.sort((b,T)=>(p.has(b)?0:1)-(p.has(T)?0:1));let v=0;for(const b of c)d.set(b,ot(v)),v++;if(s.$noSerialize$.length>0){const b=d.get(void 0);for(const T of s.$noSerialize$)d.set(T,b)}const y=[];for(const b of c){const T=p.get(b);if(T==null)break;y.push(T.map(k=>typeof k=="number"?`_${k}`:Dp(k,u)).filter(go))}y.length,p.size;const m=Pl(c,h,u,s,t),$={},x={};for(const b of e){const T=b.$element$,k=b.$id$,S=b.$refMap$,_=b.$props$,A=b.$contexts$,O=b.$tasks$,B=b.$componentQrl$,Q=b.$seq$,C={},q=ze(T)&&s.$elements$.includes(b);if(S.length>0){const R=_t(S,h," ");R&&(x[k]=R)}else if(o){let R=!1;if(q){const U=u(_);C.h=h(B)+(U?" "+U:""),R=!0}else{const U=u(_);U&&(C.h=" "+U,R=!0)}if(O&&O.length>0){const U=_t(O,u," ");U&&(C.w=U,R=!0)}if(q&&Q&&Q.length>0&&(C.s=_t(Q,h," "),R=!0),A){const U=[];A.forEach((le,Kn)=>{const or=u(le);or&&U.push(`${Kn}=${or}`)});const Z=U.join(" ");Z&&(C.c=Z,R=!0)}R&&($[k]=C)}}return{state:{refs:x,ctx:$,objs:m,subs:y},objs:c,funcs:s.$inlinedFunctions$,resources:s.$resources$,qrls:s.$qrls$,mode:o?"render":"listeners"}},_t=(e,t,r)=>{let n="";for(const s of e){const i=t(s);i!==null&&(n!==""&&(n+=r),n+=i)}return n},Vh=(e,t)=>{const r=[],n=t(e);n!==void 0&&r.push(n);const s=e.ownerDocument.createTreeWalker(e,1|ol,{acceptNode(i){if(Yh(i))return 2;const a=t(i);return a!==void 0&&r.push(a),3}});for(;s.nextNode(););return r},Wh=(e,t)=>{const r=e.$realParentCtx$||e.$parentCtx$,n=e.$props$;if(r&&n&&!_l(n)&&t.$elements$.includes(r)){const s=be(n)?.$subs$,i=e.$element$;if(s)for(const[a,o]of s)a===0?(o!==i&&Zt(be(n),t,!1),ft(o)?Jh(o,t):V(o,t,!0)):(V(n,t,!1),Zt(be(n),t,!1))}},Sl=e=>{const t=[];return e.$inlineFns$.forEach((r,n)=>{for(;t.length<=r;)t.push("");t[r]=n}),{$containerState$:e,$seen$:new Set,$objSet$:new Set,$prefetch$:0,$noSerialize$:[],$inlinedFunctions$:t,$resources$:[],$elements$:[],$qrls$:[],$deferElements$:[],$promises$:[]}},Hh=(e,t)=>{const r=Ae(e);t.$elements$.includes(r)||(t.$elements$.push(r),r.$flags$&hi?(t.$prefetch$++,xi(r,t,!0),t.$prefetch$--):t.$deferElements$.push(r))},Jh=(e,t)=>{const r=Ae(e);if(r){if(t.$elements$.includes(r))return;t.$elements$.push(r),xi(r,t,e)}},xi=(e,t,r)=>{if(e.$props$&&!_l(e.$props$)&&(V(e.$props$,t,r),Zt(be(e.$props$),t,r)),e.$componentQrl$&&V(e.$componentQrl$,t,r),e.$seq$)for(const n of e.$seq$)V(n,t,r);if(e.$tasks$){const n=t.$containerState$.$subsManager$.$groupToManagers$;for(const s of e.$tasks$)n.has(s)&&V(s,t,r)}if(r===!0&&(ba(e,t),e.$dynamicSlots$))for(const n of e.$dynamicSlots$)ba(n,t)},ba=(e,t)=>{for(;e;){if(e.$contexts$)for(const r of e.$contexts$.values())V(r,t,!0);e=e.$parentCtx$}},Kh=e=>e.replace(/<(\/?script)/gi,"\\x3C$1"),Zt=(e,t,r)=>{if(t.$seen$.has(e))return;t.$seen$.add(e);const n=e.$subs$;for(const s of n)if(s[0]>0&&V(s[2],t,r),r===!0){const i=s[1];ft(i)&&ze(i)?s[0]===0&&Hh(i,t):V(i,t,!0)}},bs=Symbol(),Gh=e=>e.then(t=>(e[bs]={resolved:!0,value:t},t),t=>(e[bs]={resolved:!1,value:t},t)),xl=e=>e[bs],V=(e,t,r)=>{if(e!=null){const n=typeof e;switch(n){case"function":case"object":{if(t.$seen$.has(e))return;if(t.$seen$.add(e),Nl(e)){t.$objSet$.add(void 0),t.$noSerialize$.push(e);return}const s=e,i=It(e);if(i){const a=!(2&El(e=i));if(r&&a&&Zt(be(s),t,r),Al(s)){t.$objSet$.add(e);return}}if(kp(e,t,r)){t.$objSet$.add(e);return}if(te(e)){t.$promises$.push(Gh(e).then(a=>{V(a,t,r)}));return}if(n==="object"){if(ft(e))return;if(G(e))for(let a=0;a<e.length;a++)V(s[a],t,r);else if(tr(e))for(const a in e)V(s[a],t,r)}break}}}t.$objSet$.add(e)},Yh=e=>ht(e)&&e.hasAttribute("q:container"),Xh=e=>{const t=Si(e);if(pt(t)){const r=Ae(t);if(r&&r.$id$)return r}},Zh=(e,t)=>{if(!Me(e))return;if(e instanceof xr)return be(e);const r=t.$proxyMap$.get(e);return r?be(r):void 0},ep=e=>{const t=Ae(e);return t?t.$id$:null},tp=(e,t)=>{const r=e.previousSibling;if(r&&qr(r)&&r.data.startsWith("t="))return"#"+r.data.slice(2);const n=e.ownerDocument,s=ot(t.$elementIndex$++),i=n.createComment(`t=${s}`),a=n.createComment(""),o=e.parentElement;return o.insertBefore(i,e),o.insertBefore(a,e.nextSibling),"#"+s},_l=e=>Object.keys(e).length===0;function Pl(e,t,r,n,s){return e.map(i=>{if(i===null)return null;const a=typeof i;switch(a){case"undefined":return Qn;case"number":if(!Number.isFinite(i))break;return i;case"string":if(i.charCodeAt(0)<32)break;return i;case"boolean":return i}const o=qp(i,t,n,s);if(o!==void 0)return o;if(a==="object"){if(G(i))return i.map(t);if(tr(i)){const l={};for(const c in i)if(r){const d=r(i[c]);d!==null&&(l[c]=d)}else l[c]=t(i[c]);return l}}throw ee(3,i)})}var z=(e,t,r=We)=>ir(null,t,e,null,null,r,null),Ct=(e,t=We)=>ir(null,e,null,null,null,t,null),_i=(e,t={})=>{let r=e.$symbol$,n=e.$chunk$;const s=e.$refSymbol$??r,i=Nn();if(i){const c=i.chunkForSymbol(s,n,e.dev?.file);c?(n=c[1],e.$refSymbol$||(r=c[0])):console.error("serializeQRL: Cannot resolve symbol",r,"in",n,e.dev?.file)}if(n==null)throw ee(31,e.$symbol$);if(n.startsWith("./")&&(n=n.slice(2)),Mp(e))if(t.$containerState$){const c=e.resolved,d=t.$containerState$,u=c.serialized||c.toString();let h=d.$inlineFns$.get(u);h===void 0&&(h=d.$inlineFns$.size,d.$inlineFns$.set(u,h)),r=String(h)}else po("Sync QRL without containerState");let a=`${n}#${r}`;const o=e.$capture$,l=e.$captureRef$;return l&&l.length?t.$getObjId$?a+=`[${_t(l,t.$getObjId$," ")}]`:t.$addRefMap$&&(a+=`[${_t(l,t.$addRefMap$," ")}]`):o&&o.length>0&&(a+=`[${o.join(" ")}]`),a},Pi=(e,t,r)=>{r.$element$;const n={$containerState$:t,$addRefMap$:s=>rp(r.$refMap$,s)};return _t(e,s=>_i(s,n),`
`)},zn=(e,t)=>{const r=e.length,n=wa(e,0,"#"),s=wa(e,n,"["),i=Math.min(n,s),a=e.substring(0,i),o=n==r?n:n+1,l=ir(a,o==s?"default":e.substring(o,s),null,null,s===r?We:e.substring(s+1,r-1).split(" "),null,null);return t&&l.$setContainer$(t),l},wa=(e,t,r)=>{const n=e.length,s=e.indexOf(r,t==n?0:t);return s==-1?n:s},rp=(e,t)=>{const r=e.indexOf(t);return r===-1?(e.push(t),String(e.length-1)):String(r)},Tl=(e,t)=>(e.$capture$,e.$captureRef$=e.$capture$.map(r=>{const n=parseInt(r,10),s=t.$refMap$[n];return t.$refMap$.length>n,s})),np=(e,t)=>(globalThis.__qwik_reg_symbols===void 0&&(globalThis.__qwik_reg_symbols=new Map),globalThis.__qwik_reg_symbols.set(t,e),e),sp=e=>({__brand:"resource",value:void 0,loading:!qe(),_resolved:void 0,_error:void 0,_state:"pending",_timeout:e?.timeout??-1,_cache:0}),ip=e=>Me(e)&&e.__brand==="resource",ap=(e,t)=>{const r=e._state;return r==="resolved"?`0 ${t(e._resolved)}`:r==="pending"?"1":`2 ${t(e._error)}`},op=e=>{const[t,r]=e.split(" "),n=sp(void 0);return n.value=Promise.resolve(),t==="0"?(n._state="resolved",n._resolved=r,n.loading=!1):t==="1"?(n._state="pending",n.value=new Promise(()=>{}),n.loading=!0):t==="2"&&(n._state="rejected",n._error=r,n.loading=!1),n},kt=e=>W(st,{[$o]:""},0,e.name??""),Qn="";function Y(e){return{$prefixCode$:e.$prefix$.charCodeAt(0),$prefixChar$:e.$prefix$,$test$:e.$test$,$serialize$:e.$serialize$,$prepare$:e.$prepare$,$fill$:e.$fill$,$collect$:e.$collect$,$subs$:e.$subs$}}var lp=Y({$prefix$:"",$test$:e=>Ci(e),$collect$:(e,t,r)=>{if(e.$captureRef$)for(const n of e.$captureRef$)V(n,t,r);t.$prefetch$===0&&t.$qrls$.push(e)},$serialize$:(e,t)=>_i(e,{$getObjId$:t}),$prepare$:(e,t)=>zn(e,t.$containerEl$),$fill$:(e,t)=>{e.$capture$&&e.$capture$.length>0&&(e.$captureRef$=e.$capture$.map(t),e.$capture$=null)}}),cp=Y({$prefix$:"",$test$:e=>di(e),$collect$:(e,t,r)=>{V(e.$qrl$,t,r),e.$state$&&(V(e.$state$,t,r),r===!0&&e.$state$ instanceof xr&&Zt(e.$state$[Ie],t,!0))},$serialize$:(e,t)=>Gf(e,t),$prepare$:e=>Yf(e),$fill$:(e,t)=>{e.$el$=t(e.$el$),e.$qrl$=t(e.$qrl$),e.$state$&&(e.$state$=t(e.$state$))}}),up=Y({$prefix$:"",$test$:e=>ip(e),$collect$:(e,t,r)=>{V(e.value,t,r),V(e._resolved,t,r)},$serialize$:(e,t)=>ap(e,t),$prepare$:e=>op(e),$fill$:(e,t)=>{if(e._state==="resolved")e._resolved=t(e._resolved),e.value=Promise.resolve(e._resolved);else if(e._state==="rejected"){const r=Promise.reject(e._error);r.catch(()=>null),e._error=t(e._error),e.value=r}}}),dp=Y({$prefix$:"",$test$:e=>e instanceof URL,$serialize$:e=>e.href,$prepare$:e=>new URL(e)}),fp=Y({$prefix$:"",$test$:e=>e instanceof Date,$serialize$:e=>e.toISOString(),$prepare$:e=>new Date(e)}),hp=Y({$prefix$:"\x07",$test$:e=>e instanceof RegExp,$serialize$:e=>`${e.flags} ${e.source}`,$prepare$:e=>{const t=e.indexOf(" "),r=e.slice(t+1),n=e.slice(0,t);return new RegExp(r,n)}}),pp=Y({$prefix$:"",$test$:e=>e instanceof Error,$serialize$:e=>e.message,$prepare$:e=>{const t=new Error(e);return t.stack=void 0,t}}),mp=Y({$prefix$:"",$test$:e=>!!e&&typeof e=="object"&&ho(e),$prepare$:(e,t,r)=>r}),pn=Symbol("serializable-data"),gp=Y({$prefix$:"",$test$:e=>ki(e),$serialize$:(e,t)=>{const[r]=e[pn];return _i(r,{$getObjId$:t})},$prepare$:(e,t)=>se(zn(e,t.$containerEl$)),$fill$:(e,t)=>{const[r]=e[pn];r.$capture$?.length&&(r.$captureRef$=r.$capture$.map(t),r.$capture$=null)}}),$p=Y({$prefix$:"",$test$:e=>e instanceof gs,$collect$:(e,t,r)=>{if(e.$args$)for(const n of e.$args$)V(n,t,r)},$serialize$:(e,t,r)=>{const n=Sf(e);let s=r.$inlinedFunctions$.indexOf(n);return s<0&&(s=r.$inlinedFunctions$.length,r.$inlinedFunctions$.push(n)),_t(e.$args$,t," ")+" @"+ot(s)},$prepare$:e=>{const t=e.split(" "),r=t.slice(0,-1),n=t[t.length-1];return new gs(n,r,n)},$fill$:(e,t)=>{e.$func$,e.$func$=t(e.$func$),e.$args$=e.$args$.map(t)}}),vp=Y({$prefix$:"",$test$:e=>e instanceof xr,$collect$:(e,t,r)=>(V(e.untrackedValue,t,r),r===!0&&(e[pr]&sl)===0&&Zt(e[Ie],t,!0),e),$serialize$:(e,t)=>t(e.untrackedValue),$prepare$:(e,t)=>new xr(e,t?.$subsManager$?.$createManager$(),0),$subs$:(e,t)=>{e[Ie].$addSubs$(t)},$fill$:(e,t)=>{e.untrackedValue=t(e.untrackedValue)}}),yp=Y({$prefix$:"",$test$:e=>e instanceof $s,$collect$(e,t,r){if(V(e.ref,t,r),Al(e.ref)){const n=be(e.ref);Ap(t.$containerState$.$subsManager$,n,r)&&V(e.ref[e.prop],t,r)}return e},$serialize$:(e,t)=>`${t(e.ref)} ${e.prop}`,$prepare$:e=>{const[t,r]=e.split(" ");return new $s(t,r)},$fill$:(e,t)=>{e.ref=t(e.ref)}}),bp=Y({$prefix$:"",$test$:e=>typeof e=="number",$serialize$:e=>String(e),$prepare$:e=>Number(e)}),wp=Y({$prefix$:"",$test$:e=>e instanceof URLSearchParams,$serialize$:e=>e.toString(),$prepare$:e=>new URLSearchParams(e)}),Sp=Y({$prefix$:"",$test$:e=>typeof FormData<"u"&&e instanceof globalThis.FormData,$serialize$:e=>{const t=[];return e.forEach((r,n)=>{t.push(typeof r=="string"?[n,r]:[n,r.name])}),JSON.stringify(t)},$prepare$:e=>{const t=JSON.parse(e),r=new FormData;for(const[n,s]of t)r.append(n,s);return r}}),xp=Y({$prefix$:"",$test$:e=>Et(e),$collect$:(e,t,r)=>{V(e.children,t,r),V(e.props,t,r),V(e.immutableProps,t,r),V(e.key,t,r);let n=e.type;n===kt?n=":slot":n===Be&&(n=":fragment"),V(n,t,r)},$serialize$:(e,t)=>{let r=e.type;return r===kt?r=":slot":r===Be&&(r=":fragment"),`${t(r)} ${t(e.props)} ${t(e.immutableProps)} ${t(e.key)} ${t(e.children)} ${e.flags}`},$prepare$:e=>{const[t,r,n,s,i,a]=e.split(" ");return new nr(t,r,n,i,parseInt(a,10),s)},$fill$:(e,t)=>{e.type=Ep(t(e.type)),e.props=t(e.props),e.immutableProps=t(e.immutableProps),e.key=t(e.key),e.children=t(e.children)}}),_p=Y({$prefix$:"",$test$:e=>typeof e=="bigint",$serialize$:e=>e.toString(),$prepare$:e=>BigInt(e)}),Pp=Y({$prefix$:"",$test$:e=>e instanceof Uint8Array,$serialize$:e=>{let t="";for(const r of e)t+=String.fromCharCode(r);return btoa(t).replace(/=+$/,"")},$prepare$:e=>{const t=atob(e),r=new Uint8Array(t.length);let n=0;for(const s of t)r[n++]=s.charCodeAt(0);return r},$fill$:void 0}),Dt=Symbol(),Mn=[lp,cp,up,dp,fp,hp,pp,mp,gp,$p,vp,yp,bp,wp,Sp,xp,_p,Y({$prefix$:"",$test$:e=>e instanceof Set,$collect$:(e,t,r)=>{e.forEach(n=>V(n,t,r))},$serialize$:(e,t)=>Array.from(e).map(t).join(" "),$prepare$:e=>{const t=new Set;return t[Dt]=e,t},$fill$:(e,t)=>{const r=e[Dt];e[Dt]=void 0;const n=r.length===0?[]:r.split(" ");for(const s of n)e.add(t(s))}}),Y({$prefix$:"",$test$:e=>e instanceof Map,$collect$:(e,t,r)=>{e.forEach((n,s)=>{V(n,t,r),V(s,t,r)})},$serialize$:(e,t)=>{const r=[];return e.forEach((n,s)=>{r.push(t(s)+" "+t(n))}),r.join(" ")},$prepare$:e=>{const t=new Map;return t[Dt]=e,t},$fill$:(e,t)=>{const r=e[Dt];e[Dt]=void 0;const n=r.length===0?[]:r.split(" ");n.length%2;for(let s=0;s<n.length;s+=2)e.set(t(n[s]),t(n[s+1]))}}),Y({$prefix$:"\x1B",$test$:e=>!!Cl(e)||e===Qn,$serialize$:e=>e,$prepare$:e=>e}),Pp],Sa=(()=>{const e=[];return Mn.forEach(t=>{const r=t.$prefixCode$;for(;e.length<r;)e.push(void 0);e.push(t)}),e})();function Cl(e){if(typeof e=="string"){const t=e.charCodeAt(0);if(t<Sa.length)return Sa[t]}}var Tp=Mn.filter(e=>e.$collect$),Cp=e=>{for(const t of Mn)if(t.$test$(e))return!0;return!1},kp=(e,t,r)=>{for(const n of Tp)if(n.$test$(e))return n.$collect$(e,t,r),!0;return!1},qp=(e,t,r,n)=>{for(const s of Mn)if(s.$test$(e)){let i=s.$prefixChar$;return s.$serialize$&&(i+=s.$serialize$(e,t,r,n)),i}if(typeof e=="string")return e},kl=(e,t)=>{const r=new Map,n=new Map;return{prepare(s){const i=Cl(s);if(i){const a=i.$prepare$(s.slice(1),e,t);return i.$fill$&&r.set(a,i),i.$subs$&&n.set(a,i),a}return s},subs(s,i){const a=n.get(s);return!!a&&(a.$subs$(s,i,e),!0)},fill(s,i){const a=r.get(s);return!!a&&(a.$fill$(s,i,e),!0)}}},Np={"!":(e,t)=>t.$proxyMap$.get(e)??Gs(e,t),"~":e=>Promise.resolve(e),_:e=>Promise.reject(e)},Ap=(e,t,r)=>{if(typeof r=="boolean")return r;const n=e.$groupToManagers$.get(r);return!!(n&&n.length>0)&&(n.length!==1||n[0]!==t)},Ep=e=>e===":slot"?kt:e===":fragment"?Be:e,Ip=(e,t)=>ws(e,new Set,"_",t),ws=(e,t,r,n)=>{const s=Or(e);if(s==null)return e;if(Lp(s)){if(t.has(s)||(t.add(s),Cp(s)))return e;const i=typeof s;switch(i){case"object":if(te(s)||ft(s))return e;if(G(s)){let o=0;return s.forEach((l,c)=>{if(c!==o)throw ee(3,s);ws(l,t,r+"["+c+"]"),o=c+1}),e}if(tr(s)){for(const[o,l]of Object.entries(s))ws(l,t,r+"."+o);return e}break;case"boolean":case"string":case"number":return e}let a="";if(a=n||"Value cannot be serialized",r!=="_"&&(a+=` in ${r},`),i==="object")a+=` because it's an instance of "${e?.constructor.name}". You might need to use 'noSerialize()' or use an object literal instead. Check out https://qwik.dev/docs/advanced/dollar/`;else if(i==="function"){const o=e.name;a+=` because it's a function named "${o}". You might need to convert it to a QRL using $(fn):

const ${o} = $(${String(e)});

Please check out https://qwik.dev/docs/advanced/qrl/ for more information.`}console.error("Trying to serialize",e),po(a)}return e},Ti=new WeakSet,ql=new WeakSet,Lp=e=>!Me(e)&&!Se(e)||!Ti.has(e),Nl=e=>Ti.has(e),Al=e=>ql.has(e),jn=e=>((typeof e=="object"&&e!==null||typeof e=="function")&&Ti.add(e),e),Rp=e=>(ql.add(e),e),Or=e=>Me(e)?It(e)??e:e,It=e=>e[ds],be=e=>e[Ie],El=e=>e[jt],Dp=(e,t)=>{const r=e[0],n=typeof e[1]=="string"?e[1]:t(e[1]);if(!n)return;let s=r+" "+n,i;if(r===0)i=e[2];else{const a=t(e[2]);if(!a)return;r<=2?(i=e[5],s+=` ${a} ${xa(t(e[3]))} ${e[4]}`):r<=4?(i=e[4],s+=` ${a} ${typeof e[3]=="string"?e[3]:xa(t(e[3]))}`):void 0}return i&&(s+=` ${encodeURI(i)}`),s},Op=(e,t)=>{const r=e.split(" "),n=parseInt(r[0],10);r.length>=2;const s=t(r[1]);if(!s||di(s)&&!s.$el$)return;const i=[n,s];return n===0?(r.length<=3,i.push(ts(r[2]))):n<=2?(r.length===5||r.length,i.push(t(r[2]),t(r[3]),r[4],ts(r[5]))):n<=4&&(r.length===4||r.length,i.push(t(r[2]),t(r[3]),ts(r[4]))),i},ts=e=>{if(e!==void 0)return decodeURI(e)},Bp=e=>{const t=new Map,r={$groupToManagers$:t,$createManager$:n=>new zp(t,e,n),$clearSub$:n=>{const s=t.get(n);if(s){for(const i of s)i.$unsubGroup$(n);t.delete(n),s.length=0}},$clearSignal$:n=>{const s=t.get(n[1]);if(s)for(const i of s)i.$unsubEntry$(n)}};return ge(),r},zp=class{$groupToManagers$;$containerState$;$subs$;constructor(e,t,r){this.$groupToManagers$=e,this.$containerState$=t,this.$subs$=[],r&&this.$addSubs$(r),ge()}$addSubs$(e){this.$subs$.push(...e);for(const t of this.$subs$)this.$addToGroup$(t[1],this)}$addToGroup$(e,t){let r=this.$groupToManagers$.get(e);r||this.$groupToManagers$.set(e,r=[]),r.includes(t)||r.push(t)}$unsubGroup$(e){const t=this.$subs$;for(let r=0;r<t.length;r++)t[r][1]===e&&(t.splice(r,1),r--)}$unsubEntry$(e){const[t,r,n,s]=e,i=this.$subs$;if(t===1||t===2){const a=e[4];for(let o=0;o<i.length;o++){const l=i[o];l[0]===t&&l[1]===r&&l[2]===n&&l[3]===s&&l[4]===a&&(i.splice(o,1),o--)}}else if(t===3||t===4)for(let a=0;a<i.length;a++){const o=i[a];o[0]===t&&o[1]===r&&o[2]===n&&o[3]===s&&(i.splice(a,1),a--)}}$addSub$(e,t){const r=this.$subs$,n=e[1];e[0]===0&&r.some(([s,i,a])=>s===0&&i===n&&a===t)||(r.push(Il=[...e,t]),this.$addToGroup$(n,this))}$notifySubs$(e){const t=this.$subs$;for(const r of t){const n=r[r.length-1];e&&n&&n!==e||Rf(r,this.$containerState$)}}},Il;function Qp(){return Il}var xa=e=>{if(e==null)throw Pt("must be non null",e);return e},Ci=e=>typeof e=="function"&&typeof e.getSymbol=="function",Mp=e=>Ci(e)&&e.$symbol$=="<sync>",ir=(e,t,r,n,s,i,a)=>{let o;const l=async function(...$){return await p.call(this,me())(...$)},c=$=>(o||(o=$),o),d=$=>typeof $!="function"||!s?.length&&!i?.length?$:function(...x){let b=me();if(b){const T=b.$qrl$;b.$qrl$=l;const k=b.$event$;b.$event$===void 0&&(b.$event$=this);try{return $.apply(this,x)}finally{b.$qrl$=T,b.$event$=k}}return b=xe(),b.$qrl$=l,b.$event$=this,ve.call(this,b,$,...x)},u=async $=>{if(r!==null)return r;if($&&c($),e===""){const T=o.getAttribute(vo);return l.resolved=r=yo(o.ownerDocument,T)[Number(t)]}const x=Up(),b=me();return n!==null?r=n().then(T=>l.resolved=r=d(T[t])):r=F(Nn().importSymbol(o,e,t),T=>l.resolved=r=d(T)),typeof r=="object"&&te(r)&&r.then(()=>jp(t,b?.$element$,x),T=>{console.error(`qrl ${t} failed to load`,T),r=null}),r},h=$=>r!==null?r:u($);function p($,x){return(...b)=>F(h(),T=>{if(!Se(T))throw ee(10);if(x&&x()===!1)return;const k=v($);return ve.call(this,k,T,...b)})}const v=$=>$==null?xe():G($)?el($):$,y=a??t,m=Ll(y);return Object.assign(l,{getSymbol:()=>y,getHash:()=>m,getCaptured:()=>i,resolve:u,$resolveLazy$:h,$setContainer$:c,$chunk$:e,$symbol$:t,$refSymbol$:a,$hash$:m,getFn:p,$capture$:s,$captureRef$:i,dev:null,resolved:void 0}),r&&(r=F(r,$=>l.resolved=r=d($))),l},Ll=e=>{const t=e.lastIndexOf("_");return t>-1?e.slice(t+1):e};var _a=new Set,jp=(e,t,r)=>{_a.has(e)||(_a.add(e),Fp("qsymbol",{symbol:e,element:t,reqTime:r}))},Fp=(e,t)=>{qe()||typeof document!="object"||document.dispatchEvent(new CustomEvent(e,{bubbles:!1,detail:t}))},Up=()=>qe()?0:typeof performance=="object"?performance.now():0,Vp=0,Wp=e=>ir(null,"s"+Vp++,e,null,null,null,null),Rl=e=>e,l0=kn(Rl),Hp=function(e,t){return t===void 0&&(t=e.toString()),e.serialized=t,ir("","<sync>",e,null,null,null,null)},se=e=>{function t(r,n,s){const i=e.$hash$.slice(0,4)+":"+(n||"");return W(st,{[Bd]:e,[Ne]:r[Ne],[j]:r[j],children:r.children,props:r},s,i)}return t[pn]=[e],t},ki=e=>typeof e=="function"&&e[pn]!==void 0,ur=(e,t)=>{const{val:r,set:n,iCtx:s}=At();if(r!=null)return r;const i=Se(e)?ve(void 0,e):e;if(t?.reactive===!1)return n(i),i;{const a=Gs(i,s.$renderCtx$.$static$.$containerState$,t?.deep??!0?1:0);return n(a),a}};function qi(e,t){return me()?.$renderCtx$?.$static$.$containerState$.$serverData$[e]??t}var Pa=new Map,Jp=(e,t)=>{let r=Pa.get(t);return r||Pa.set(t,r=Kp(e,t)),r},Kp=(e,t)=>{const r=e.length,n=[],s=[];let i=0,a=i,o=Jt,l=0;for(;i<r;){const p=i;let v=e.charCodeAt(i++);v===sm&&(i++,v=Ml);const y=cm[o];for(let m=0;m<y.length;m++){const $=y[m],[x,b,T]=$;if((x===l||x===D||x===mn&&Jr(l)||x===Ss&&Ca(l))&&(b===v||b===D||b===mn&&Jr(v)||b===Fe&&!Jr(v)&&v!==Ai||b===Ss&&Ca(v))&&($.length==3||u($))){if($.length>3&&(v=e.charCodeAt(i-1)),T===ce||T==yt){T===yt&&(o!==Dl||h()?Ta(v)||d(i-(b==Fe?1:b==xs?2:0)):(Ta(v)?c(i-2):d(i-2),a++)),b===Fe&&(i--,v=l);do o=s.pop()||Jt,o===wt&&(c(i-1),a++);while(Gp(o))}else s.push(o),o===wt&&T===Jt?(c(i-8),a=i):T===Ol&&d(p),o=T;break}}l=v}return c(i),n.join("");function c(p){n.push(e.substring(a,p)),a=p}function d(p){o===wt||h()||(c(p),n.push(".","â­ï¸",t))}function u(p){let v=0;if(e.charCodeAt(i)===_s){for(let y=1;y<10;y++)if(e.charCodeAt(i+y)===_s){v=y+1;break}}e:for(let y=3;y<p.length;y++){const m=p[y];for(let $=0;$<m.length;$++)if((e.charCodeAt(i+$+v)|am)!==m.charCodeAt($))continue e;return i+=m.length+v,!0}return!1}function h(){return s.indexOf(wt)!==-1||s.indexOf(Ni)!==-1}},Jr=e=>e>=tm&&e<=rm||e>=Ml&&e<=nm||e>=om&&e<=lm||e>=128||e===im||e===_s,Ta=e=>e===Qt||e===Ai||e===jl||e===Ql||Jr(e),Gp=e=>e===Bl||e===Ni||e===zl||e===wt,Ca=e=>e===em||e===Yp||e===Xp||e===Zp,Jt=0,Dl=2,wt=5,Ol=6,Ni=10,Bl=11,zl=12,ce=17,yt=18,D=0,mn=1,Fe=2,Ss=3,Yp=9,Xp=10,Zp=13,em=32,Ql=35,xs=41,_s=45,Ai=46,tm=48,rm=57,Qt=58,Ml=65,nm=90,jl=91,sm=92,im=95,am=32,om=97,lm=122,$t=[[D,39,14],[D,34,15],[D,47,16,"*"]],cm=[[[D,42,Dl],[D,jl,7],[D,Qt,Ol,":","before","after","first-letter","first-line"],[D,Qt,wt,"global"],[D,Qt,3,"has","host-context","not","where","is","matches","any"],[D,Qt,4],[D,mn,1],[D,Ai,1],[D,Ql,1],[D,64,Ni,"keyframe"],[D,64,Bl,"media","supports","container"],[D,64,zl],[D,123,13],[47,42,16],[D,59,ce],[D,125,ce],[D,xs,ce],...$t],[[D,Fe,yt]],[[D,Fe,yt]],[[D,40,Jt],[D,Fe,yt]],[[D,40,8],[D,Fe,yt]],[[D,40,Jt],[D,Fe,ce]],[[D,Fe,ce]],[[D,93,yt],[D,39,14],[D,34,15]],[[D,xs,ce],...$t],[[D,125,ce],...$t],[[D,125,ce],[Ss,mn,1],[D,Qt,wt,"global"],[D,123,13],...$t],[[D,123,Jt],[D,59,ce],...$t],[[D,59,ce],[D,123,9],...$t],[[D,125,ce],[D,123,13],[D,40,8],...$t],[[D,39,ce]],[[D,34,ce]],[[42,47,ce]]],um=e=>{Fl(e,t=>t,!1)},Br=e=>({scopeId:"â­ï¸"+Fl(e,Jp,!0)}),Fl=(e,t,r)=>{const{val:n,set:s,iCtx:i,i:a,elCtx:o}=At();if(n)return n;const l=Gd(e,a),c=i.$renderCtx$.$static$.$containerState$;if(s(l),o.$appendStyles$||(o.$appendStyles$=[]),o.$scopeIds$||(o.$scopeIds$=[]),r&&o.$scopeIds$.push(Yd(l)),c.$styleIds$.has(l))return l;c.$styleIds$.add(l);const d=e.$resolveLazy$(c.$containerEl$),u=h=>{o.$appendStyles$,o.$appendStyles$.push({styleId:l,content:t(h,l)})};return te(d)?i.$waitOn$.push(d.then(u)):u(d),l};const gn={manifestHash:"oozvym",core:"q-BqT2WLNK.js",preloader:"q-SQQ8q1CN.js",qwikLoader:"q-rQu-oRvM.js",bundleGraphAsset:"assets/Dn2oLSLf-bundle-graph.json",injections:[{tag:"style",location:"head",attributes:{"data-src":"/assets/BVKV-qxQ-style.css",dangerouslySetInnerHTML:`*,:before,:after,::backdrop,*,:before,:after,::backdrop{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-ring-offset-shadow:0 0 #0000;--un-ring-shadow:0 0 #0000;--un-shadow-inset: ;--un-shadow:0 0 #0000;--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:#93c5fd80;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }.app-shell{--un-bg-opacity:1;background-color:rgb(2 6 23/var(--un-bg-opacity));--un-text-opacity:1;min-height:100vh;color:rgb(241 245 249/var(--un-text-opacity));-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.surface{--un-border-opacity:1;border-width:1px;border-color:rgb(30 41 59/var(--un-border-opacity));--un-shadow:var(--un-shadow-inset)0 10px 15px -3px var(--un-shadow-color,#0000001a),var(--un-shadow-inset)0 4px 6px -4px var(--un-shadow-color,#0000001a);box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow);--un-backdrop-blur:blur(8px);backdrop-filter:var(--un-backdrop-blur)var(--un-backdrop-brightness)var(--un-backdrop-contrast)var(--un-backdrop-grayscale)var(--un-backdrop-hue-rotate)var(--un-backdrop-invert)var(--un-backdrop-opacity)var(--un-backdrop-saturate)var(--un-backdrop-sepia);background-color:#0f172a99;border-radius:.75rem}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.sticky{position:sticky}.top-0{top:0}.z-20{z-index:20}.grid{display:grid}.mx-auto{margin-left:auto;margin-right:auto}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.mt-6{margin-top:1.5rem}.inline{display:inline}.hidden{display:none}.h1{height:.25rem}.h2{height:.5rem}.max-w-2xl{max-width:42rem}.max-w-5xl{max-width:64rem}.min-h-screen{min-height:100vh}.w-full{width:100%}.flex{display:flex}.shrink-0{flex-shrink:0}.flex-col{flex-direction:column}.transform{transform:translateX(var(--un-translate-x))translateY(var(--un-translate-y))translateZ(var(--un-translate-z))rotate(var(--un-rotate))rotateX(var(--un-rotate-x))rotateY(var(--un-rotate-y))rotateZ(var(--un-rotate-z))skewX(var(--un-skew-x))skewY(var(--un-skew-y))scaleX(var(--un-scale-x))scaleY(var(--un-scale-y))scaleZ(var(--un-scale-z))}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.overflow-auto{overflow:auto}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-emerald-500\\/40{border-color:#10b98166}.border-slate-700{--un-border-opacity:1;border-color:rgb(51 65 85/var(--un-border-opacity))}.border-slate-800{--un-border-opacity:1;border-color:rgb(30 41 59/var(--un-border-opacity))}.hover\\:border-emerald-500\\/40:hover{border-color:#10b98166}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.bg-emerald-500{--un-bg-opacity:1;background-color:rgb(16 185 129/var(--un-bg-opacity))}.bg-emerald-500\\/10{background-color:#10b9811a}.bg-slate-800{--un-bg-opacity:1;background-color:rgb(30 41 59/var(--un-bg-opacity))}.bg-slate-900{--un-bg-opacity:1;background-color:rgb(15 23 42/var(--un-bg-opacity))}.bg-slate-900\\/60{background-color:#0f172a99}.bg-slate-900\\/80{background-color:#0f172acc}.bg-slate-950{--un-bg-opacity:1;background-color:rgb(2 6 23/var(--un-bg-opacity))}.bg-slate-950\\/80{background-color:#020617cc}.hover\\:bg-emerald-400:hover{--un-bg-opacity:1;background-color:rgb(52 211 153/var(--un-bg-opacity))}.hover\\:bg-rose-500\\/10:hover{background-color:#f43f5e1a}.hover\\:bg-slate-700:hover{--un-bg-opacity:1;background-color:rgb(51 65 85/var(--un-bg-opacity))}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.text-amber-300{--un-text-opacity:1;color:rgb(252 211 77/var(--un-text-opacity))}.text-emerald-200{--un-text-opacity:1;color:rgb(167 243 208/var(--un-text-opacity))}.text-emerald-300{--un-text-opacity:1;color:rgb(110 231 183/var(--un-text-opacity))}.text-emerald-950{--un-text-opacity:1;color:rgb(2 44 34/var(--un-text-opacity))}.text-rose-300{--un-text-opacity:1;color:rgb(253 164 175/var(--un-text-opacity))}.text-slate-100{--un-text-opacity:1;color:rgb(241 245 249/var(--un-text-opacity))}.text-slate-200{--un-text-opacity:1;color:rgb(226 232 240/var(--un-text-opacity))}.text-slate-300{--un-text-opacity:1;color:rgb(203 213 225/var(--un-text-opacity))}.text-slate-400{--un-text-opacity:1;color:rgb(148 163 184/var(--un-text-opacity))}.text-slate-50{--un-text-opacity:1;color:rgb(248 250 252/var(--un-text-opacity))}.text-slate-500{--un-text-opacity:1;color:rgb(100 116 139/var(--un-text-opacity))}.hover\\:text-emerald-200:hover{--un-text-opacity:1;color:rgb(167 243 208/var(--un-text-opacity))}.hover\\:text-emerald-300:hover{--un-text-opacity:1;color:rgb(110 231 183/var(--un-text-opacity))}.hover\\:text-rose-200:hover{--un-text-opacity:1;color:rgb(254 205 211/var(--un-text-opacity))}.font-medium{font-weight:500}.font-semibold{font-weight:600}.tracking-wide{letter-spacing:.025em}.disabled\\:opacity-60:disabled{opacity:.6}.disabled\\:opacity-70:disabled{opacity:.7}.ring-1{--un-ring-width:1px;--un-ring-offset-shadow:var(--un-ring-inset)0 0 0 var(--un-ring-offset-width)var(--un-ring-offset-color);--un-ring-shadow:var(--un-ring-inset)0 0 0 calc(var(--un-ring-width) + var(--un-ring-offset-width))var(--un-ring-color);box-shadow:var(--un-ring-offset-shadow),var(--un-ring-shadow),var(--un-shadow)}.ring-slate-700{--un-ring-opacity:1;--un-ring-color:rgb(51 65 85/var(--un-ring-opacity))}.hover\\:ring-rose-500:hover{--un-ring-opacity:1;--un-ring-color:rgb(244 63 94/var(--un-ring-opacity))}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.space-y-1>:not([hidden])~:not([hidden]){--un-space-y-reverse:0;margin-top:calc(.25rem*calc(1 - var(--un-space-y-reverse)));margin-bottom:calc(.25rem*var(--un-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--un-space-y-reverse:0;margin-top:calc(.5rem*calc(1 - var(--un-space-y-reverse)));margin-bottom:calc(.5rem*var(--un-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--un-space-y-reverse:0;margin-top:calc(.75rem*calc(1 - var(--un-space-y-reverse)));margin-bottom:calc(.75rem*var(--un-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--un-space-y-reverse:0;margin-top:calc(1rem*calc(1 - var(--un-space-y-reverse)));margin-bottom:calc(1rem*var(--un-space-y-reverse))}.from-slate-950{--un-gradient-from-position:0%;--un-gradient-from:rgb(2 6 23/var(--un-from-opacity,1))var(--un-gradient-from-position);--un-gradient-to-position:100%;--un-gradient-to:#02061700 var(--un-gradient-to-position);--un-gradient-stops:var(--un-gradient-from),var(--un-gradient-to)}.via-slate-900{--un-gradient-via-position:50%;--un-gradient-to:#0f172a00;--un-gradient-stops:var(--un-gradient-from),rgb(15 23 42/var(--un-via-opacity,1))var(--un-gradient-via-position),var(--un-gradient-to)}.to-slate-950{--un-gradient-to-position:100%;--un-gradient-to:rgb(2 6 23/var(--un-to-opacity,1))var(--un-gradient-to-position)}.bg-gradient-to-b{--un-gradient-shape:to bottom in oklch;--un-gradient:var(--un-gradient-shape),var(--un-gradient-stops);background-image:linear-gradient(var(--un-gradient))}.uppercase{text-transform:uppercase}.backdrop-blur{--un-backdrop-blur:blur(8px);backdrop-filter:var(--un-backdrop-blur)var(--un-backdrop-brightness)var(--un-backdrop-contrast)var(--un-backdrop-grayscale)var(--un-backdrop-hue-rotate)var(--un-backdrop-invert)var(--un-backdrop-opacity)var(--un-backdrop-saturate)var(--un-backdrop-sepia)}@media (width>=768px){.md\\:grid-cols-\\[1\\.2fr_1fr\\]{grid-template-columns:1.2fr 1fr}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}*,:before,:after{box-sizing:border-box;border-style:solid;border-width:0;border-color:var(--un-default-border-color,#e5e7eb)}:before,:after{--un-content:""}html,:host{-webkit-text-size-adjust:100%;tab-size:4;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{line-height:inherit;margin:0}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-feature-settings:normal;font-variation-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-feature-settings:inherit;font-variation-settings:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:#0000;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{margin:0;padding:0;list-style:none}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}:root{--lightningcss-light:initial;--lightningcss-dark: ;color-scheme:light dark}@media (prefers-color-scheme:dark){:root{--lightningcss-light: ;--lightningcss-dark:initial}}:root[data-theme=light],:root.light{--lightningcss-light:initial;--lightningcss-dark: ;color-scheme:light}:root[data-theme=dark],:root.dark{--lightningcss-light: ;--lightningcss-dark:initial;color-scheme:dark}body{color:#e2e8f0;background-color:#020617;min-height:100vh;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}
/*$vite$:1*/`}}],mapping:{s_DoKYoyvM41g:"q-BQSEAl3x.js",s_YrRlW66gD5Y:"q-BQh0nDug.js",s_hgk47q7YSmg:"q-Cq9E7uts.js",s_08qeP0eGH6U:"q-D1II1x08.js",s_ELa2ERJwGkM:"q-By2fgoO6.js",s_KajC5HmFCP4:"q-Xgb3HgIu.js",s_QOX90pOt9sA:"q-DtBRKgXW.js",s_fap9umrX08E:"q-BsHVoV0d.js",s_h70dBAjCmqY:"q-BRUzF6dz.js",s_uohfw9Om5Kc:"q-CZd0ZpKo.js",s_MOrqpWxCcpA:"q-DFC4ksBv.js",s_TVD7erg9zpo:"q-n20x_v1S.js",s_00eYrYyi6VA:"q-Be4Zg7n2.js",s_0ZAFccQi4aM:"q-3xPH6S4B.js",s_2aWAOZ0c5GI:"q-Du_hAiZi.js",s_54i2tFOIwmo:"q-D0BVs9q1.js",s_6AcQXlwaGPM:"q-BluGZcO8.js",s_8txvw3enrrU:"q-BH7SR6cR.js",s_Gldlln7E01E:"q-Byk9nq4v.js",s_KrBf14t5ejM:"q-DGTraU6y.js",s_X8xIQqUjebE:"q-DobRZofO.js",s_bZ8kc5UlLx4:"q-aJHZ6-Rc.js",s_e7mxYERDQJw:"q-B5Xzl9vI.js",s_f9dB8OruyWc:"q-BECic655.js",s_mLjU5QE56DA:"q-DSvqDP9_.js",s_q5fBwayRpzo:"q-DVCT4DNS.js",s_uFxaifyy6KQ:"q-C90ZYmTV.js",s_w6dmeDadJmA:"q-y3irAow6.js",s_wqKL2Up903o:"q-CpOQgJS8.js",s_xSYg098z8dQ:"q-CDGYhytV.js",s_zWSCrnQoP0Q:"q-DvhVgpeI.js",s_uWFoRnS0UbQ:"q-Bw3HaXPm.js",s_RIE80aAOC7Q:"q-BuvTFyGZ.js",s_S5uQY9BGXbM:"q-CY-M1WAg.js",s_cOQoV5jD0Q4:"q-CVvpVVZp.js",s_hNgJ6QruKFA:"q-JDGIMqz2.js",s_ovuN5RMiUy0:"q-DjOZcHQE.js",s_Ip7fHOIzWcw:"q-DKZ5YRgJ.js",s_MCuta9P3G2k:"q--tSVJ8ek.js",s_QMG80xm3a8I:"q-L35gAuIr.js",s_nN3CgsmW9VM:"q-C3kbwjCh.js",s_0P85XrqKCfY:"q-DSfbiq_S.js",s_2wc47ngFWgg:"q-BkQFll-e.js",s_69ywUjDxRgU:"q-BMtR6Odd.js",s_CskzXQBKCjQ:"q-gMJd5X77.js",s_Ezi1aHl5EA8:"q-BNq3b43n.js",s_ICWqw4qus5s:"q-xxE8xN0i.js",s_Ks63hY0BCGU:"q-DmmRyw_A.js",s_OYiK83S2tvQ:"q-CQXStMYJ.js",s_U0pgwr815JE:"q-p8z-XSaP.js",s_V0EST5LSEAU:"q-C7dYJ5uX.js",s_ZF5ox75ncAY:"q-DFs7_o-i.js",s_c6nIBzCshBg:"q-Bd5RSncx.js",s_dQlMqeLWpD0:"q-BZXmAUTP.js",s_i5YbwZ5sHVc:"q-Cmprfxw4.js",s_rGtr6P02y5w:"q-CPKKFgis.js",s_yzT72jTL9gE:"q-ApF7WJvn.js"}};var dm=(e=>typeof Lt<"u"?Lt:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof Lt<"u"?Lt:t)[r]}):e)(function(e){if(typeof Lt<"u")return Lt.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),fm="<sync>";function Ul(e,t){const r=t?.mapper,n=e.symbolMapper?e.symbolMapper:(s,i,a)=>{if(r){const o=$n(s),l=r[o];if(!l){if(o===fm)return[o,""];if(globalThis.__qwik_reg_symbols?.has(o))return[s,"_"];if(a)return[s,`${a}?qrl=${s}`];console.error("Cannot resolve symbol",s,"in",r,a)}return l}};return{isServer:!0,async importSymbol(s,i,a){const o=$n(a),l=globalThis.__qwik_reg_symbols?.get(o);if(l)return l;let c=String(i);c.endsWith(".js")||(c+=".js");const d=dm(c);if(!(a in d))throw new Error(`Q-ERROR: missing symbol '${a}' in module '${c}'.`);return d[a]},raf:()=>(console.error("server can not rerender"),Promise.resolve()),nextTick:s=>new Promise(i=>{setTimeout(()=>{i(s())})}),chunkForSymbol(s,i,a){return n(s,r,a)}}}async function hm(e,t){mo(Ul(e,t))}var $n=e=>{const t=e.lastIndexOf("_");return t>-1?e.slice(t+1):e},pm="q:instance";var Ps={$DEBUG$:!1,$maxIdlePreloads$:25,$invPreloadProbability$:.65};var mm=Date.now(),gm=/\.[mc]?js$/,Vl=0,$m=1,vm=2,ym=3;var Ts,Cs,bm=(e,t)=>({$name$:e,$state$:gm.test(e)?Vl:ym,$deps$:Hl?t?.map(r=>({...r,$factor$:1})):t,$inverseProbability$:1,$createdTs$:Date.now(),$waitedMs$:0,$loadedMs$:0}),wm=e=>{const t=new Map;let r=0;for(;r<e.length;){const n=e[r++],s=[];let i,a=1;for(;i=e[r],typeof i=="number";)i<0?a=-i/10:s.push({$name$:e[i],$importProbability$:a,$factor$:1}),r++;t.set(n,s)}return t},Wl=e=>{let t=ks.get(e);if(!t){let r;if(Cs){if(r=Cs.get(e),!r)return;r.length||(r=void 0)}t=bm(e,r),ks.set(e,t)}return t},Sm=(e,t)=>{t&&("debug"in t&&(Ps.$DEBUG$=!!t.debug),typeof t.preloadProbability=="number"&&(Ps.$invPreloadProbability$=1-t.preloadProbability)),!(Ts!=null||!e)&&(Ts="",Cs=wm(e))},ks=new Map,Hl,vn,Jl=0,zr=[],xm=(...e)=>{console.log(`Preloader ${Date.now()-mm}ms ${Jl}/${zr.length} queued>`,...e)},_m=()=>{ks.clear(),vn=!1,Hl=!0,Jl=0,zr.length=0},Pm=()=>{vn&&(zr.sort((e,t)=>e.$inverseProbability$-t.$inverseProbability$),vn=!1)},Tm=()=>{Pm();let e=.4;const t=[];for(const r of zr){const n=Math.round((1-r.$inverseProbability$)*10);n!==e&&(e=n,t.push(e)),t.push(r.$name$)}return t};var Kl=(e,t,r)=>{if(r?.has(e))return;const n=e.$inverseProbability$;if(e.$inverseProbability$=t,!(n-e.$inverseProbability$<.01)&&(Ts!=null&&e.$state$<vm&&(e.$state$===Vl&&(e.$state$=$m,zr.push(e),Ps.$DEBUG$&&xm(`queued ${Math.round((1-e.$inverseProbability$)*100)}%`,e.$name$)),vn=!0),e.$deps$)){r||(r=new Set),r.add(e);const s=1-e.$inverseProbability$;for(const i of e.$deps$){const a=Wl(i.$name$);if(a.$inverseProbability$===0)continue;let o;if(s===1||s>=.99&&qs<100)qs++,o=Math.min(.01,1-i.$importProbability$);else{const l=(1-i.$importProbability$*s)/i.$factor$;o=Math.max(.02,a.$inverseProbability$*l),i.$factor$=l}Kl(a,o,r)}}},ka=(e,t)=>{const r=Wl(e);r&&r.$inverseProbability$>t&&Kl(r,t)},qs,Cm=(e,t)=>{if(!e?.length)return;qs=0;let r=t?1-t:.4;if(Array.isArray(e))for(let n=e.length-1;n>=0;n--){const s=e[n];typeof s=="number"?r=1-s/10:ka(s,r)}else ka(e,r)};function km(e){const t=[],r=n=>{if(n)for(const s of n)t.includes(s.url)||(t.push(s.url),s.imports&&r(s.imports))};return r(e),t}var qm=e=>{const t=Nn();return e?.qrls?.map(r=>{const n=r.$refSymbol$||r.$symbol$,s=r.$chunk$,i=t.chunkForSymbol(n,s,r.dev?.file);return i?i[1]:s}).filter(Boolean)};function Nm(e,t,r){const n=t.prefetchStrategy;if(n===null)return[];if(!r?.manifest.bundleGraph)return qm(e);if(typeof n?.symbolsToPrefetch=="function")try{return km(n.symbolsToPrefetch({manifest:r.manifest}))}catch(i){console.error("getPrefetchUrls, symbolsToPrefetch()",i)}const s=new Set;for(const i of e?.qrls||[]){const a=$n(i.$refSymbol$||i.$symbol$);a&&a.length>=10&&s.add(a)}return[...s]}var Am=(e,t)=>{if(!t?.manifest.bundleGraph)return[...new Set(e)];_m();let r=.99;for(const n of e.slice(0,15))Cm(n,r),r*=.85;return Tm()},Ns=(e,t)=>{if(t==null)return null;const r=`${e}${t}`.split("/"),n=[];for(const s of r)s===".."&&n.length>0?n.pop():n.push(s);return n.join("/")},Em=(e,t,r,n,s)=>{const i=Ns(e,t?.manifest?.preloader),a="/"+t?.manifest.bundleGraphAsset;if(i&&a&&r!==!1){const l=typeof r=="object"?{debug:r.debug,preloadProbability:r.ssrPreloadProbability}:void 0;Sm(t?.manifest.bundleGraph,l);const c=[];r?.debug&&c.push("d:1"),r?.maxIdlePreloads&&c.push(`P:${r.maxIdlePreloads}`),r?.preloadProbability&&c.push(`Q:${r.preloadProbability}`);const d=c.length?`,{${c.join(",")}}`:"",u=`let b=fetch("${a}");import("${i}").then(({l})=>l(${JSON.stringify(e)},b${d}));`;n.push(de("link",{rel:"modulepreload",href:i,nonce:s,crossorigin:"anonymous"}),de("link",{rel:"preload",href:a,as:"fetch",crossorigin:"anonymous",nonce:s}),de("script",{type:"module",async:!0,dangerouslySetInnerHTML:u,nonce:s}))}const o=Ns(e,t?.manifest.core);o&&n.push(de("link",{rel:"modulepreload",href:o,nonce:s}))},Im=(e,t,r,n,s)=>{if(n.length===0||r===!1)return null;const{ssrPreloads:i,ssrPreloadProbability:a}=Rm(typeof r=="boolean"?void 0:r);let o=i;const l=[],c=[],d=t?.manifest.manifestHash;if(o){const p=t?.manifest.preloader,v=t?.manifest.core,y=Am(n,t);let m=4;const $=a*10;for(const x of y)if(typeof x=="string"){if(m<$)break;if(x===p||x===v)continue;if(c.push(x),--o===0)break}else m=x}const u=Ns(e,d&&t?.manifest.preloader);let h=c.length?`${JSON.stringify(c)}.map((l,e)=>{e=document.createElement('link');e.rel='modulepreload';e.href=${JSON.stringify(e)}+l;document.head.appendChild(e)});`:"";return u&&(h+=`window.addEventListener('load',f=>{f=_=>import("${u}").then(({p})=>p(${JSON.stringify(n)}));try{requestIdleCallback(f,{timeout:2000})}catch(e){setTimeout(f,200)}})`),h&&l.push(de("script",{type:"module","q:type":"preload",async:!0,dangerouslySetInnerHTML:h,nonce:s})),l.length>0?de(Be,{children:l}):null},Lm=(e,t,r,n,s)=>{if(r.preloader!==!1){const i=Nm(t,r,n);if(i.length>0){const a=Im(e,n,r.preloader,i,r.serverData?.nonce);a&&s.push(a)}}};function Rm(e){return{...Dm,...e}}var Dm={ssrPreloads:7,ssrPreloadProbability:.5,debug:!1,maxIdlePreloads:25,preloadProbability:.35},Om='const t=document,e=window,n=new Set,o=new Set([t]);let r;const s=(t,e)=>Array.from(t.querySelectorAll(e)),a=t=>{const e=[];return o.forEach(n=>e.push(...s(n,t))),e},i=t=>{w(t),s(t,"[q\\\\:shadowroot]").forEach(t=>{const e=t.shadowRoot;e&&i(e)})},c=t=>t&&"function"==typeof t.then,l=(t,e,n=e.type)=>{a("[on"+t+"\\\\:"+n+"]").forEach(o=>{b(o,t,e,n)})},f=e=>{if(void 0===e._qwikjson_){let n=(e===t.documentElement?t.body:e).lastElementChild;for(;n;){if("SCRIPT"===n.tagName&&"qwik/json"===n.getAttribute("type")){e._qwikjson_=JSON.parse(n.textContent.replace(/\\\\x3C(\\/?script)/gi,"<$1"));break}n=n.previousElementSibling}}},p=(t,e)=>new CustomEvent(t,{detail:e}),b=async(e,n,o,r=o.type)=>{const s="on"+n+":"+r;e.hasAttribute("preventdefault:"+r)&&o.preventDefault(),e.hasAttribute("stoppropagation:"+r)&&o.stopPropagation();const a=e._qc_,i=a&&a.li.filter(t=>t[0]===s);if(i&&i.length>0){for(const t of i){const n=t[1].getFn([e,o],()=>e.isConnected)(o,e),r=o.cancelBubble;c(n)&&await n,r&&o.stopPropagation()}return}const l=e.getAttribute(s);if(l){const n=e.closest("[q\\\\:container]"),r=n.getAttribute("q:base"),s=n.getAttribute("q:version")||"unknown",a=n.getAttribute("q:manifest-hash")||"dev",i=new URL(r,t.baseURI);for(const p of l.split("\\n")){const l=new URL(p,i),b=l.href,h=l.hash.replace(/^#?([^?[|]*).*$/,"$1")||"default",q=performance.now();let _,d,y;const w=p.startsWith("#"),g={qBase:r,qManifest:a,qVersion:s,href:b,symbol:h,element:e,reqTime:q};if(w){const e=n.getAttribute("q:instance");_=(t["qFuncs_"+e]||[])[Number.parseInt(h)],_||(d="sync",y=Error("sym:"+h))}else{u("qsymbol",g);const t=l.href.split("#")[0];try{const e=import(t);f(n),_=(await e)[h],_||(d="no-symbol",y=Error(`${h} not in ${t}`))}catch(t){d||(d="async"),y=t}}if(!_){u("qerror",{importError:d,error:y,...g}),console.error(y);break}const m=t.__q_context__;if(e.isConnected)try{t.__q_context__=[e,o,l];const n=_(o,e);c(n)&&await n}catch(t){u("qerror",{error:t,...g})}finally{t.__q_context__=m}}}},u=(e,n)=>{t.dispatchEvent(p(e,n))},h=t=>t.replace(/([A-Z])/g,t=>"-"+t.toLowerCase()),q=async t=>{let e=h(t.type),n=t.target;for(l("-document",t,e);n&&n.getAttribute;){const o=b(n,"",t,e);let r=t.cancelBubble;c(o)&&await o,r||(r=r||t.cancelBubble||n.hasAttribute("stoppropagation:"+t.type)),n=t.bubbles&&!0!==r?n.parentElement:null}},_=t=>{l("-window",t,h(t.type))},d=()=>{const s=t.readyState;if(!r&&("interactive"==s||"complete"==s)&&(o.forEach(i),r=1,u("qinit"),(e.requestIdleCallback??e.setTimeout).bind(e)(()=>u("qidle")),n.has("qvisible"))){const t=a("[on\\\\:qvisible]"),e=new IntersectionObserver(t=>{for(const n of t)n.isIntersecting&&(e.unobserve(n.target),b(n.target,"",p("qvisible",n)))});t.forEach(t=>e.observe(t))}},y=(t,e,n,o=!1)=>{t.addEventListener(e,n,{capture:o,passive:!1})},w=(...t)=>{for(const r of t)"string"==typeof r?n.has(r)||(o.forEach(t=>y(t,r,q,!0)),y(e,r,_,!0),n.add(r)):o.has(r)||(n.forEach(t=>y(r,t,q,!0)),o.add(r))};if(!("__q_context__"in t)){t.__q_context__=0;const r=e.qwikevents;r&&(Array.isArray(r)?w(...r):w("click","input")),e.qwikevents={events:n,roots:o,push:w},y(t,"readystatechange",d),d()}',Bm=`const doc = document;
const win = window;
const events = /* @__PURE__ */ new Set();
const roots = /* @__PURE__ */ new Set([doc]);
let hasInitialized;
const nativeQuerySelectorAll = (root, selector) => Array.from(root.querySelectorAll(selector));
const querySelectorAll = (query) => {
  const elements = [];
  roots.forEach((root) => elements.push(...nativeQuerySelectorAll(root, query)));
  return elements;
};
const findShadowRoots = (fragment) => {
  processEventOrNode(fragment);
  nativeQuerySelectorAll(fragment, "[q\\\\:shadowroot]").forEach((parent) => {
    const shadowRoot = parent.shadowRoot;
    shadowRoot && findShadowRoots(shadowRoot);
  });
};
const isPromise = (promise) => promise && typeof promise.then === "function";
const broadcast = (infix, ev, type = ev.type) => {
  querySelectorAll("[on" + infix + "\\\\:" + type + "]").forEach((el) => {
    dispatch(el, infix, ev, type);
  });
};
const resolveContainer = (containerEl) => {
  if (containerEl._qwikjson_ === void 0) {
    const parentJSON = containerEl === doc.documentElement ? doc.body : containerEl;
    let script = parentJSON.lastElementChild;
    while (script) {
      if (script.tagName === "SCRIPT" && script.getAttribute("type") === "qwik/json") {
        containerEl._qwikjson_ = JSON.parse(
          script.textContent.replace(/\\\\x3C(\\/?script)/gi, "<$1")
        );
        break;
      }
      script = script.previousElementSibling;
    }
  }
};
const createEvent = (eventName, detail) => new CustomEvent(eventName, {
  detail
});
const dispatch = async (element, onPrefix, ev, eventName = ev.type) => {
  const attrName = "on" + onPrefix + ":" + eventName;
  if (element.hasAttribute("preventdefault:" + eventName)) {
    ev.preventDefault();
  }
  if (element.hasAttribute("stoppropagation:" + eventName)) {
    ev.stopPropagation();
  }
  const ctx = element._qc_;
  const relevantListeners = ctx && ctx.li.filter((li) => li[0] === attrName);
  if (relevantListeners && relevantListeners.length > 0) {
    for (const listener of relevantListeners) {
      const results = listener[1].getFn([element, ev], () => element.isConnected)(ev, element);
      const cancelBubble = ev.cancelBubble;
      if (isPromise(results)) {
        await results;
      }
      if (cancelBubble) {
        ev.stopPropagation();
      }
    }
    return;
  }
  const attrValue = element.getAttribute(attrName);
  if (attrValue) {
    const container = element.closest("[q\\\\:container]");
    const qBase = container.getAttribute("q:base");
    const qVersion = container.getAttribute("q:version") || "unknown";
    const qManifest = container.getAttribute("q:manifest-hash") || "dev";
    const base = new URL(qBase, doc.baseURI);
    for (const qrl of attrValue.split("\\n")) {
      const url = new URL(qrl, base);
      const href = url.href;
      const symbol = url.hash.replace(/^#?([^?[|]*).*$/, "$1") || "default";
      const reqTime = performance.now();
      let handler;
      let importError;
      let error;
      const isSync = qrl.startsWith("#");
      const eventData = {
        qBase,
        qManifest,
        qVersion,
        href,
        symbol,
        element,
        reqTime
      };
      if (isSync) {
        const hash = container.getAttribute("q:instance");
        handler = (doc["qFuncs_" + hash] || [])[Number.parseInt(symbol)];
        if (!handler) {
          importError = "sync";
          error = new Error("sym:" + symbol);
        }
      } else {
        emitEvent("qsymbol", eventData);
        const uri = url.href.split("#")[0];
        try {
          const module = import(
                        uri
          );
          resolveContainer(container);
          handler = (await module)[symbol];
          if (!handler) {
            importError = "no-symbol";
            error = new Error(\`\${symbol} not in \${uri}\`);
          }
        } catch (err) {
          importError || (importError = "async");
          error = err;
        }
      }
      if (!handler) {
        emitEvent("qerror", {
          importError,
          error,
          ...eventData
        });
        console.error(error);
        break;
      }
      const previousCtx = doc.__q_context__;
      if (element.isConnected) {
        try {
          doc.__q_context__ = [element, ev, url];
          const results = handler(ev, element);
          if (isPromise(results)) {
            await results;
          }
        } catch (error2) {
          emitEvent("qerror", { error: error2, ...eventData });
        } finally {
          doc.__q_context__ = previousCtx;
        }
      }
    }
  }
};
const emitEvent = (eventName, detail) => {
  doc.dispatchEvent(createEvent(eventName, detail));
};
const camelToKebab = (str) => str.replace(/([A-Z])/g, (a) => "-" + a.toLowerCase());
const processDocumentEvent = async (ev) => {
  let type = camelToKebab(ev.type);
  let element = ev.target;
  broadcast("-document", ev, type);
  while (element && element.getAttribute) {
    const results = dispatch(element, "", ev, type);
    let cancelBubble = ev.cancelBubble;
    if (isPromise(results)) {
      await results;
    }
    cancelBubble || (cancelBubble = cancelBubble || ev.cancelBubble || element.hasAttribute("stoppropagation:" + ev.type));
    element = ev.bubbles && cancelBubble !== true ? element.parentElement : null;
  }
};
const processWindowEvent = (ev) => {
  broadcast("-window", ev, camelToKebab(ev.type));
};
const processReadyStateChange = () => {
  const readyState = doc.readyState;
  if (!hasInitialized && (readyState == "interactive" || readyState == "complete")) {
    roots.forEach(findShadowRoots);
    hasInitialized = 1;
    emitEvent("qinit");
    const riC = win.requestIdleCallback ?? win.setTimeout;
    riC.bind(win)(() => emitEvent("qidle"));
    if (events.has("qvisible")) {
      const results = querySelectorAll("[on\\\\:qvisible]");
      const observer = new IntersectionObserver((entries) => {
        for (const entry of entries) {
          if (entry.isIntersecting) {
            observer.unobserve(entry.target);
            dispatch(entry.target, "", createEvent("qvisible", entry));
          }
        }
      });
      results.forEach((el) => observer.observe(el));
    }
  }
};
const addEventListener = (el, eventName, handler, capture = false) => {
  el.addEventListener(eventName, handler, { capture, passive: false });
};
const processEventOrNode = (...eventNames) => {
  for (const eventNameOrNode of eventNames) {
    if (typeof eventNameOrNode === "string") {
      if (!events.has(eventNameOrNode)) {
        roots.forEach(
          (root) => addEventListener(root, eventNameOrNode, processDocumentEvent, true)
        );
        addEventListener(win, eventNameOrNode, processWindowEvent, true);
        events.add(eventNameOrNode);
      }
    } else {
      if (!roots.has(eventNameOrNode)) {
        events.forEach(
          (eventName) => addEventListener(eventNameOrNode, eventName, processDocumentEvent, true)
        );
        roots.add(eventNameOrNode);
      }
    }
  }
};
if (!("__q_context__" in doc)) {
  doc.__q_context__ = 0;
  const qwikevents = win.qwikevents;
  if (qwikevents) {
    if (Array.isArray(qwikevents)) {
      processEventOrNode(...qwikevents);
    } else {
      processEventOrNode("click", "input");
    }
  }
  win.qwikevents = {
    events,
    roots,
    push: processEventOrNode
  };
  addEventListener(doc, "readystatechange", processReadyStateChange);
  processReadyStateChange();
}`;function zm(e={}){return e.debug?Bm:Om}var c0=globalThis.QWIK_PREFETCH_MINIFIED,u0=globalThis.QWIK_PREFETCH_DEBUG;function rs(){if(typeof performance>"u")return()=>0;const e=performance.now();return()=>(performance.now()-e)/1e6}function Qm(e){let t=e.base;return typeof e.base=="function"&&(t=e.base(e)),typeof t=="string"?(t.endsWith("/")||(t+="/"),t):"/build/"}var Mm="<!DOCTYPE html>";async function jm(e,t){let r=t.stream,n=0,s=0,i=0,a=0,o="",l;const c=t.streaming?.inOrder??{strategy:"auto",maximunInitialChunk:5e4,maximunChunk:3e4},d=t.containerTagName??"html",u=t.containerAttributes??{},h=r,p=rs(),v=Qm(t),y=Gl(t.manifest),m=t.serverData?.nonce;function $(){o&&(h.write(o),o="",n=0,i++,i===1&&(a=p()))}function x(C){const q=C.length;n+=q,s+=q,o+=C}switch(c.strategy){case"disabled":r={write:x};break;case"direct":r=h;break;case"auto":let C=0,q=!1;const R=c.maximunChunk??0,U=c.maximunInitialChunk??0;r={write(Z){Z==="<!--qkssr-f-->"?q||(q=!0):Z==="<!--qkssr-pu-->"?C++:Z==="<!--qkssr-po-->"?C--:x(Z),C===0&&(q||n>=(i===0?U:R))&&(q=!1,$())}};break}d==="html"?r.write(Mm):r.write("<!--cq-->"),y||console.warn("Missing client manifest, loading symbols in the client might 404. Please ensure the client build has run and generated the manifest for the server build."),await hm(t,y);const b=y?.manifest.injections,T=b?b.map(C=>de(C.tag,C.attributes??{})):[];let k=t.qwikLoader?typeof t.qwikLoader=="object"?t.qwikLoader.include==="never"?2:0:t.qwikLoader==="inline"?1:t.qwikLoader==="never"?2:0:0;const S=y?.manifest.qwikLoader;if(k===0&&!S&&(k=1),k===0)T.unshift(de("link",{rel:"modulepreload",href:`${v}${S}`,nonce:m}),de("script",{type:"module",async:!0,src:`${v}${S}`,nonce:m}));else if(k===1){const C=zm({debug:t.debug});T.unshift(de("script",{id:"qwikloader",type:"module",async:!0,nonce:m,dangerouslySetInnerHTML:C}))}Em(v,y,t.preloader,T,m);const _=rs(),A=[];let O=0,B=0;await af(e,{stream:r,containerTagName:d,containerAttributes:u,serverData:t.serverData,base:v,beforeContent:T,beforeClose:async(C,q,R,U)=>{O=_();const Z=rs();l=await wl(C,q,void 0,U);const le=[];Lm(v,l,t,y,le);const Kn=JSON.stringify(l.state,void 0,void 0);if(le.push(de("script",{type:"qwik/json",dangerouslySetInnerHTML:Um(Kn),nonce:m})),l.funcs.length>0){const lr=u[pm];le.push(de("script",{"q:func":"qwik/json",dangerouslySetInnerHTML:Hm(lr,l.funcs),nonce:m}))}const or=Array.from(q.$events$,lr=>JSON.stringify(lr));if(or.length>0){const lr=`(window.qwikevents||(window.qwikevents=[])).push(${or.join(",")})`;le.push(de("script",{dangerouslySetInnerHTML:lr,nonce:m}))}return Vm(A,C),B=Z(),de(Be,{children:le})},manifestHash:y?.manifest.manifestHash||"dev"+Fm()}),d!=="html"&&r.write("<!--/cq-->"),$();const Q=l.resources.some(C=>C._cache!==1/0);return{prefetchResources:void 0,snapshotResult:l,flushes:i,manifest:y?.manifest,size:s,isStatic:!Q,timing:{render:O,snapshot:B,firstFlush:a}}}function Fm(){return Math.random().toString(36).slice(2)}function Gl(e){const t=e?{...gn,...e}:gn;if(!t||"mapper"in t)return t;if(t.mapping){const r={};return Object.entries(t.mapping).forEach(([n,s])=>{r[$n(n)]=[n,s]}),{mapper:r,manifest:t,injections:t.injections||[]}}}var Um=e=>e.replace(/<(\/?script)/gi,"\\x3C$1");function Vm(e,t){for(const r of t){const n=r.$componentQrl$?.getSymbol();n&&!e.includes(n)&&e.push(n)}}var Wm='document["qFuncs_HASH"]=';function Hm(e,t){return Wm.replace("HASH",e)+`[${t.join(`,
`)}]`}async function Jm(e){mo(Ul({manifest:e},Gl(e)))}function ns(e,t){var r;return((r=t?.getOrigin)==null?void 0:r.call(t,e))??t?.origin??process.env.ORIGIN??Km(e)}function Km(e){const{PROTOCOL_HEADER:t,HOST_HEADER:r}=process.env,n=e.headers;return`${t&&n[t]||(e.socket.encrypted||e.connection.encrypted?"https":"http")}://${n[r??(e instanceof Au?":authority":"host")]}`}function ss(e,t){return Ym(e.originalUrl||e.url||"/",t)}function Gm(e=""){return["The stream has been destroyed","write after end"].some(t=>e.includes(t))}var qa=/^:(method|scheme|authority|path)$/i;function Ym(e,t){return new URL(e.replace(/\/\/|\\\\/g,"/"),t)}async function Xm(e,t,r,n,s){const i=new Headers,a=t.headers;try{for(const[u,h]of Object.entries(a))if(!qa.test(u)){if(typeof h=="string")i.set(u,h);else if(Array.isArray(h))for(const p of h)i.append(u,p)}}catch(u){console.error(u)}const o=async function*(){for await(const u of t)yield u},l=t.method==="HEAD"||t.method==="GET"?void 0:o(),c=new AbortController,d={method:t.method,headers:i,body:l,signal:c.signal,duplex:"half"};return r.on("close",()=>{c.abort()}),{mode:n,url:e,request:new Request(e.href,d),env:{get(u){return process.env[u]}},getWritableStream:(u,h,p)=>{r.statusCode=u;try{for(const[y,m]of h)qa.test(y)||r.setHeader(y,m);const v=p.headers();v.length>0&&r.setHeader("Set-Cookie",v)}catch(v){console.error(v)}return new WritableStream({write(v){r.closed||r.destroyed||r.write(v,y=>{y&&!Gm(y.message)&&console.error(y)})},close(){r.end()}})},getClientConn:()=>s?s(t):{ip:t.socket.remoteAddress},platform:{ssr:!0,incomingMessage:t,node:process.versions.node},locale:void 0}}var Zm={"3gp":"video/3gpp","3gpp":"video/3gpp",asf:"video/x-ms-asf",asx:"video/x-ms-asf",avi:"video/x-msvideo",avif:"image/avif",bmp:"image/x-ms-bmp",css:"text/css",flv:"video/x-flv",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",jng:"image/x-jng",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",kar:"audio/midi",m4a:"audio/x-m4a",m4v:"video/x-m4v",mid:"audio/midi",midi:"audio/midi",mng:"video/x-mng",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",ogg:"audio/ogg",pdf:"application/pdf",png:"image/png",rar:"application/x-rar-compressed",shtml:"text/html",svg:"image/svg+xml",svgz:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",txt:"text/plain",wbmp:"image/vnd.wap.wbmp",webm:"video/webm",webp:"image/webp",wmv:"video/x-ms-wmv",woff:"font/woff",woff2:"font/woff2",xml:"text/xml",zip:"application/zip"};function eg(){typeof global<"u"&&typeof globalThis.fetch!="function"&&typeof process<"u"&&process.versions.node&&(globalThis.fetch=Qu,globalThis.Headers=Ou,globalThis.Request=Bu,globalThis.Response=zu,globalThis.FormData=Du),typeof globalThis.TextEncoderStream>"u"&&(globalThis.TextEncoderStream=Lu,globalThis.TextDecoderStream=Iu),typeof globalThis.WritableStream>"u"&&(globalThis.WritableStream=Ru,globalThis.ReadableStream=Eu),typeof globalThis.crypto>"u"&&(globalThis.crypto=Mu.webcrypto)}function tg(e){var t;eg();const r={_deserializeData:Pf,_serializeData:Fh,_verifySerializable:Ip};e.manifest&&Jm(e.manifest);const n=((t=e.static)==null?void 0:t.root)??jr(Nu(import.meta.url),"..","..","dist");return{router:async(o,l,c)=>{try{const d=await Nd(await Xm(ss(o,ns(o,e)),o,l,"server",e.getClientConn),e,r);if(d){const u=await d.completion;if(u)throw u;if(d.requestEv.headersSent)return}c()}catch(d){console.error(d),c(d)}},notFound:async(o,l,c)=>{try{if(!l.headersSent){const d=ss(o,ns(o,e)),u=Fi(o.method||"GET",d)?"Not Found":Tu(d.pathname);l.writeHead(404,{"Content-Type":"text/html; charset=utf-8","X-Not-Found":d.pathname}),l.end(u)}}catch(d){console.error(d),c(d)}},staticFile:async(o,l,c)=>{var d;try{const u=ss(o,ns(o,e));if(Fi(o.method||"GET",u)){const h=u.pathname;let p;ku(h).includes(".")?p=jr(n,h):e.qwikCityPlan.trailingSlash?p=jr(n,h+"index.html"):p=jr(n,h,"index.html");const v=qu(p).replace(/^\./,""),y=Cu(p);y.on("error",c);const m=Zm[v];m&&l.setHeader("Content-Type",m),(d=e.static)!=null&&d.cacheControl&&l.setHeader("Cache-Control",e.static.cacheControl),y.pipe(l);return}return c()}catch(u){console.error(u),c(u)}}}}const As=["en","ko"],Ei={en:"English",ko:"í•œêµ­ì–´"};let Fn="en",vt,Yl=()=>{if(vt)return vt;if(typeof document<"u"){const e=document.documentElement.lang;e&&e in Ei&&(vt=e)}return vt||(vt=Fn),vt};var rg=e=>Ei[e]?e:(console.error(`unknown locale ${e}`),Fn);const ng=e=>{Yl=()=>vt=rg(e())};var sg=(e,t=[])=>{for(let r=0;typeof e=="object";r++){let n=e[t[r]]??e["*"];typeof n=="number"&&(n=e[n]),e=n}return typeof e=="string"?e.replace(/\$([\d$])/g,(r,n)=>n==="$"?"$":String(t[Number(n)-1]??"")):""},ig=e=>e.map((t,r)=>`${r}${t.replace(/\$/g,()=>"$$")}`).join("$").slice(1);const ag="English",og={"Performance Lab":"Performance Lab",Home:"Home",Store:"Store",Chat:"Chat",AI:"AI","Performance first":"Performance first","Microscopic first load, big capability":"Microscopic first load, big capability","Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.":"Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.","- Ultra-thin home route with immutable caching":"- Ultra-thin home route with immutable caching","- Lazy feature routes for store, chat, and AI":"- Lazy feature routes for store, chat, and AI","- Optional Partytown for third-party isolation":"- Optional Partytown for third-party isolation","Latency budget":"Latency budget","Server render: sub-50ms target with streaming enabled":"Server render: sub-50ms target with streaming enabled","Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny":"Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny","Speculative nav: prerender store, prefetch chat":"Speculative nav: prerender store, prefetch chat","Sample adapter (offline)":"Sample adapter (offline)","Edge cache pack (offline)":"Edge cache pack (offline)","Invalid id.":"Invalid id.","Item not found.":"Item not found.","Unable to delete item right now.":"Unable to delete item right now.","Name and positive price required.":"Name and positive price required.","Unable to create item right now.":"Unable to create item right now.","Database offline: showing fallback inventory.":"Database offline: showing fallback inventory.","Unable to load inventory right now.":"Unable to load inventory right now.","Fast browsing with tiny payloads":"Fast browsing with tiny payloads",cached:"cached","Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Data only wakes up once the route is visible to keep initial payloads microscopic.":"Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Data only wakes up once the route is visible to keep initial payloads microscopic.",Inventory:"Inventory",Refresh:"Refresh","Showing fallback data while the database is unavailable.":"Showing fallback data while the database is unavailable.","Inventory loads once this section is visible.":"Inventory loads once this section is visible.","SKU $1":"SKU $1","Delete $1":"Delete $1",Delete:"Delete","No items yet.":"No items yet.","Load more":"Load more","Loading...":"Loading...","Add an item":"Add an item",Name:"Name","Lightweight widget":"Lightweight widget",Price:"Price","Saving...":"Saving...","Create item":"Create item","Added $1.":"Added $1.",Realtime:"Realtime","WebSocket chat via Valkey pub/sub":"WebSocket chat via Valkey pub/sub",websocket:"websocket","The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.":"The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.",Connected:"Connected","Connect to chat":"Connect to chat","No socket opened until you opt in.":"No socket opened until you opt in.","No messages yet.":"No messages yet.","Say something quick":"Say something quick",Send:"Send","AI tools":"AI tools","Edge-friendly utilities":"Edge-friendly utilities","This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.":"This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.","Type a quick prompt":"Type a quick prompt","Send to API":"Send to API","Response: $1":"Response: $1","Prometheus | Ultra-fast starter":"Prometheus | Ultra-fast starter","Qwik City + Bun + Valkey performance stack starter.":"Qwik City + Bun + Valkey performance stack starter.","Store | Prometheus":"Store | Prometheus","Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.":"Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.","Chat | Prometheus":"Chat | Prometheus","WebSocket chat backed by Valkey pub/sub.":"WebSocket chat backed by Valkey pub/sub.","AI | Prometheus":"AI | Prometheus","Minimal AI utility route hitting Bun API.":"Minimal AI utility route hitting Bun API.","Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Interactivity wakes up only when you click.":""};var lg={locale:"en",name:ag,translations:og};const cg="í•œêµ­ì–´",ug={"Performance Lab":"í¼í¬ë¨¼ìŠ¤ ëž©",Home:"í™ˆ",Store:"ìŠ¤í† ì–´",Chat:"ì±„íŒ…",AI:"AI","Performance first":"ì„±ëŠ¥ ìš°ì„ ","Microscopic first load, big capability":"ì´ˆì†Œí˜• ì²« ë¡œë“œ, í° ì—­ëŸ‰","Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.":"Qwik City SSRì€ ì…¸ì„ ê°€ë³ê²Œ ìœ ì§€í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ View Transitionsì™€ Speculation Rulesë¥¼ ì§€ì›í•˜ë©´ íƒìƒ‰ì´ ê°•í™”ë˜ê³ , ì„œë“œíŒŒí‹° ìŠ¤í¬ë¦½íŠ¸ëŠ” ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë²—ì–´ë‚©ë‹ˆë‹¤.","- Ultra-thin home route with immutable caching":"- ì´ˆê²½ëŸ‰ í™ˆ ë¼ìš°íŠ¸ì™€ ë¶ˆë³€ ìºì‹±","- Lazy feature routes for store, chat, and AI":"- ìŠ¤í† ì–´, ì±„íŒ…, AIë¥¼ ìœ„í•œ ì§€ì—° ë¡œë“œ ê¸°ëŠ¥ ë¼ìš°íŠ¸","- Optional Partytown for third-party isolation":"- ì„œë“œíŒŒí‹° ê²©ë¦¬ë¥¼ ìœ„í•œ Partytown ì„ íƒ ì˜µì…˜","Latency budget":"ë ˆì´í„´ì‹œ ì˜ˆì‚°","Server render: sub-50ms target with streaming enabled":"ì„œë²„ ë Œë”ë§: ìŠ¤íŠ¸ë¦¬ë° ì‚¬ìš© ì‹œ 50ms ë¯¸ë§Œ ëª©í‘œ","Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny":"í¬ë¦¬í‹°ì»¬ CSS: UnoCSS + Lightning CSSë¡œ íŽ˜ì´ë¡œë“œë¥¼ ìµœì†Œí™”","Speculative nav: prerender store, prefetch chat":"ì¶”ì¸¡ íƒìƒ‰: ìŠ¤í† ì–´ í”„ë¦¬ë Œë”, ì±„íŒ… í”„ë¦¬íŒ¨ì¹˜","Sample adapter (offline)":"ìƒ˜í”Œ ì–´ëŒ‘í„°(ì˜¤í”„ë¼ì¸)","Edge cache pack (offline)":"ì—£ì§€ ìºì‹œ íŒ©(ì˜¤í”„ë¼ì¸)","Invalid id.":"ìœ íš¨í•˜ì§€ ì•Šì€ IDìž…ë‹ˆë‹¤.","Item not found.":"í•­ëª©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","Unable to delete item right now.":"ì§€ê¸ˆì€ í•­ëª©ì„ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","Name and positive price required.":"ì´ë¦„ê³¼ ì–‘ìˆ˜ ê°€ê²©ì´ í•„ìš”í•©ë‹ˆë‹¤.","Unable to create item right now.":"ì§€ê¸ˆì€ í•­ëª©ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","Database offline: showing fallback inventory.":"ë°ì´í„°ë² ì´ìŠ¤ ì˜¤í”„ë¼ì¸: ëŒ€ì²´ ì¸ë²¤í† ë¦¬ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.","Unable to load inventory right now.":"ì§€ê¸ˆì€ ì¸ë²¤í† ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","Fast browsing with tiny payloads":"ì´ˆì†Œí˜• íŽ˜ì´ë¡œë“œë¡œ ë¹ ë¥¸ íƒìƒ‰",cached:"ìºì‹œë¨","Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Data only wakes up once the route is visible to keep initial payloads microscopic.":"í•­ëª©ì€ Drizzleì„ í†µí•´ Postgresì—ì„œ ì§ì ‘ ìŠ¤íŠ¸ë¦¬ë°ë˜ë©°, ì‘ë‹µì„ ê°€ë³ê²Œ ìœ ì§€í•˜ê¸° ìœ„í•´ ì»¤ì„œ íŽ˜ì´ì§€ë„¤ì´ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë°ì´í„°ëŠ” ë¼ìš°íŠ¸ê°€ ë³´ì¼ ë•Œë§Œ ê¹¨ì–´ë‚˜ ì´ˆê¸° íŽ˜ì´ë¡œë“œë¥¼ ê·¹ì†Œí™”í•©ë‹ˆë‹¤.",Inventory:"ì¸ë²¤í† ë¦¬",Refresh:"ìƒˆë¡œê³ ì¹¨","Showing fallback data while the database is unavailable.":"ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ ëŒ€ì²´ ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.","Inventory loads once this section is visible.":"ì´ ì„¹ì…˜ì´ ë³´ì¼ ë•Œ ì¸ë²¤í† ë¦¬ê°€ ë¡œë“œë©ë‹ˆë‹¤.","SKU $1":"SKU $1","Delete $1":"$1 ì‚­ì œ",Delete:"ì‚­ì œ","No items yet.":"ì•„ì§ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.","Load more":"ë” ë¶ˆëŸ¬ì˜¤ê¸°","Loading...":"ë¡œë”© ì¤‘...","Add an item":"í•­ëª© ì¶”ê°€",Name:"ì´ë¦„","Lightweight widget":"ê²½ëŸ‰ ìœ„ì ¯",Price:"ê°€ê²©","Saving...":"ì €ìž¥ ì¤‘...","Create item":"í•­ëª© ë§Œë“¤ê¸°","Added $1.":"$1 ì¶”ê°€ë¨.",Realtime:"ì‹¤ì‹œê°„","WebSocket chat via Valkey pub/sub":"Valkey pub/sub ê¸°ë°˜ WebSocket ì±„íŒ…",websocket:"ì›¹ì†Œì¼“","The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.":"í´ë¼ì´ì–¸íŠ¸ëŠ” í™ˆ ë¼ìš°íŠ¸ë¥¼ ê·¹ì†Œí™”í•˜ê¸° ìœ„í•´ íƒìƒ‰ í›„ì—ë§Œ ë¡œë“œë©ë‹ˆë‹¤. ì‹¤ì‹œê°„ì´ í•„ìš”í•  ë•Œê¹Œì§€ bfcache ìžê²©ì„ ìœ ì§€í•˜ë„ë¡ í•„ìš” ì‹œ ì—°ê²°í•©ë‹ˆë‹¤. ë©”ì‹œì§€ëŠ” APIì˜ Valkey ì±„ë„ì„ í†µí•´ ë¸Œë¡œë“œìºìŠ¤íŠ¸ë©ë‹ˆë‹¤.",Connected:"ì—°ê²°ë¨","Connect to chat":"ì±„íŒ…ì— ì—°ê²°","No socket opened until you opt in.":"ë™ì˜í•˜ê¸° ì „ì—ëŠ” ì†Œì¼“ì„ ì—´ì§€ ì•ŠìŠµë‹ˆë‹¤.","No messages yet.":"ë©”ì‹œì§€ê°€ ì•„ì§ ì—†ìŠµë‹ˆë‹¤.","Say something quick":"ê°„ë‹¨ížˆ ìž…ë ¥í•˜ì„¸ìš”",Send:"ë³´ë‚´ê¸°","AI tools":"AI ë„êµ¬","Edge-friendly utilities":"ì—£ì§€ ì¹œí™”ì  ìœ í‹¸ë¦¬í‹°","This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.":"ì´ ë¼ìš°íŠ¸ëŠ” ìƒí˜¸ìž‘ìš©ì„ ë‹¨ìˆœí•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤. ì¶”ê°€ í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ì„ ë³´ë‚´ì§€ ì•Šê³  Bun + Elysiaë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì™•ë³µ ì—ì½” APIìž…ë‹ˆë‹¤.","Type a quick prompt":"ê°„ë‹¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”","Send to API":"APIë¡œ ë³´ë‚´ê¸°","Response: $1":"ì‘ë‹µ: $1","Prometheus | Ultra-fast starter":"Prometheus | ì´ˆê³ ì† ìŠ¤íƒ€í„°","Qwik City + Bun + Valkey performance stack starter.":"Qwik City + Bun + Valkey ì„±ëŠ¥ ìŠ¤íƒ ìŠ¤íƒ€í„°.","Store | Prometheus":"ìŠ¤í† ì–´ | Prometheus","Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.":"Drizzle ê¸°ë°˜ ìŠ¤í† ì–´ë¡œ Postgresì—ì„œ ì»¤ì„œ íŽ˜ì´ì§€ë„¤ì´ì…˜ê³¼ ì§€ì—° ë¡œë“œë¥¼ ì‚¬ìš©í•´ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.","Chat | Prometheus":"ì±„íŒ… | Prometheus","WebSocket chat backed by Valkey pub/sub.":"Valkey pub/sub ê¸°ë°˜ WebSocket ì±„íŒ….","AI | Prometheus":"AI | Prometheus","Minimal AI utility route hitting Bun API.":"Bun APIë¥¼ í˜¸ì¶œí•˜ëŠ” ìµœì†Œ AI ìœ í‹¸ë¦¬í‹° ë¼ìš°íŠ¸.","Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Interactivity wakes up only when you click.":""};var dg={locale:"ko",fallback:"en",name:cg,translations:ug},fg={en:lg,ko:dg},hg=(e,t,r)=>{let n,s;do n=fg[e],s=n.translations[t];while(!s&&(e=n.fallback));return s||(s=t),sg(s,r)},pg=(e,...t)=>hg(Yl(),typeof e=="string"?e:ig(e),t),N=pg,Es=e=>{if(!e)return;const t=e.trim();if(!t)return;const r=t.replace(/_/g,"-").toLowerCase(),n=r==="kr"?"ko":r,s=As.find(a=>a.toLowerCase()===n);if(s)return s;const i=n.split("-")[0];if(i)return As.find(a=>a.toLowerCase()===i)},mg=e=>{if(!e)return;const t=e.split(",");for(const r of t){const n=r.split(";")[0],s=Es(n);if(s)return s}};const Ii=({queryLocale:e,cookieLocale:t,acceptLanguage:r})=>Es(e)||Es(t)||mg(r)||Fn;var gg={path:"/",sameSite:"lax",maxAge:31536e3};const $g=e=>({query:t,cookie:r,headers:n,locale:s})=>{const i=e({queryLocale:t.get("locale"),cookieLocale:r.get("locale")?.value,acceptLanguage:n.get("accept-language")});t.has("locale")&&(r.delete("locale"),r.delete("locale",{path:"/"}),r.set("locale",i,gg)),s(i)};var vg=dt({onRequest:()=>yg},1);const yg=$g(Ii);var Xl=Ye("qc-s"),bg=Ye("qc-c"),Zl=Ye("qc-ic"),ec=Ye("qc-h"),tc=Ye("qc-l"),rc=Ye("qc-n"),nc=Ye("qc-a"),wg=Ye("qc-p"),Sg=Rl(Ct("s_QMG80xm3a8I")),xg=()=>{if(!qi("containerAttributes"))throw new Error("PrefetchServiceWorker component must be rendered on the server.");rl();const e=rr(Zl);if(e.value&&e.value.length>0){const t=e.value.length;let r=null;for(let n=t-1;n>=0;n--)e.value[n].default&&(r=W(e.value[n].default,{children:r},1,"pG_0"));return W(Be,{children:[r,P("script",{"document:onQCInit$":Sg,"document:onQInit$":Hp(()=>{((n,s)=>{if(!n._qcs&&s.scrollRestoration==="manual"){n._qcs=!0;const i=s.state?._qCityScroll;i&&n.scrollTo(i.x,i.y),document.dispatchEvent(new Event("qcinit"))}})(window,history)},'()=>{((w,h)=>{if(!w._qcs&&h.scrollRestoration==="manual"){w._qcs=true;const s=h.state?._qCityScroll;if(s){w.scrollTo(s.x,s.y);}document.dispatchEvent(new Event("qcinit"));}})(window,history);}')},null,null,2,"pG_1")]},1,"pG_2")}return ii},_g=se(z(xg,"s_Gldlln7E01E")),Pg="qaction",Tg=(e,t)=>new URL(e,t.href),Na=(e,t)=>e.origin===t.origin,Aa=e=>e.endsWith("/")?e:e+"/",Cg=({pathname:e},{pathname:t})=>{const r=Math.abs(e.length-t.length);return r===0?e===t:r===1&&Aa(e)===Aa(t)},kg=(e,t)=>e.search===t.search,yn=(e,t)=>kg(e,t)&&Cg(e,t),qg=e=>e&&typeof e.then=="function",Ng=(e,t,r,n)=>{const s=sc(),a={head:s,withLocale:o=>da(n,o),resolveValue:o=>{const l=o.__id;if(o.__brand==="server_loader"&&!(l in e.loaders))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");const c=e.loaders[l];if(qg(c))throw new Error("Loaders returning a promise can not be resolved for the head function.");return c},...t};for(let o=r.length-1;o>=0;o--){const l=r[o]&&r[o].head;l&&(typeof l=="function"?Ea(s,da(n,()=>l(a))):typeof l=="object"&&Ea(s,l))}return a.head},Ea=(e,t)=>{typeof t.title=="string"&&(e.title=t.title),Ur(e.meta,t.meta),Ur(e.links,t.links),Ur(e.styles,t.styles),Ur(e.scripts,t.scripts),Object.assign(e.frontmatter,t.frontmatter)},Ur=(e,t)=>{if(Array.isArray(t))for(const r of t){if(typeof r.key=="string"){const n=e.findIndex(s=>s.key===r.key);if(n>-1){e[n]=r;continue}}e.push(r)}},sc=()=>({title:"",meta:[],links:[],styles:[],scripts:[],frontmatter:{}}),Ag=()=>rr(ec),Un=()=>rr(tc),ic=()=>rr(rc),Eg=e=>{throw new Error('usePreventNavigate$ is experimental and must be enabled with `experimental: ["preventNavigate"]` in the `qwikVite` plugin.')},d0=kn(Eg),Ig=()=>rr(nc),ac=()=>jn(qi("qwikcity")),Ia={},Vr={navCount:0},Lg=":root{view-transition-name:none}",Rg=e=>{},Dg=async(e,t)=>{const[r,n,s,i]=oe(),{type:a="link",forceReload:o=e===void 0,replaceState:l=!1,scroll:c=!0}=typeof t=="object"?t:{forceReload:t};Vr.navCount++;const d=s.value.dest,u=e===void 0?d:typeof e=="number"?e:Tg(e,i.url);if(Ia.$cbs$&&(o||typeof u=="number"||!yn(u,d)||!Na(u,d))){const h=Vr.navCount,p=await Promise.all([...Ia.$cbs$.values()].map(v=>v(u)));if(h!==Vr.navCount||p.some(Boolean)){h===Vr.navCount&&a==="popstate"&&history.pushState(null,"",d);return}}if(typeof u!="number"&&Na(u,d)&&!(!o&&yn(u,d)))return s.value={type:a,dest:u,forceReload:o,replaceState:l,scroll:c},r.value=void 0,i.isNavigating=!0,new Promise(h=>{n.r=h})},Og=({track:e})=>{const[t,r,n,s,i,a,o,l,c,d,u]=oe();async function h(){const p=e(d),v=e(t),y=Xo(""),m=u.url,$=v?"form":p.type;p.replaceState;let x,b,T=null;if(x=new URL(p.dest,u.url),T=i.loadedRoute,b=i.response,T){const[k,S,_,A]=T,O=_,B=O[O.length-1];p.dest.search&&yn(x,m)&&(x.search=p.dest.search),yn(x,m)||(u.prevUrl=m),u.url=x,u.params={...S},d.untrackedValue={type:$,dest:x};const Q=Ng(b,u,O,y);r.headings=B.headings,r.menu=A,n.value=jn(O),s.links=Q.links,s.meta=Q.meta,s.styles=Q.styles,s.scripts=Q.scripts,s.title=Q.title,s.frontmatter=Q.frontmatter}}return h()},Bg=e=>{um(z(Lg,"s_uWFoRnS0UbQ"));const t=ac();if(!t?.params)throw new Error("Missing Qwik City Env Data for help visit https://github.com/QwikDev/qwik/issues/6237");const r=qi("url");if(!r)throw new Error("Missing Qwik URL Env Data");if(t.ev.originalUrl.pathname!==t.ev.url.pathname)throw new Error('enableRequestRewrite is an experimental feature and is not enabled. Please enable the feature flag by adding `experimental: ["enableRequestRewrite"]` to your qwikVite plugin options.');const n=new URL(r),s=ur({url:n,params:t.params,isNavigating:!1,prevUrl:void 0},{deep:!1}),i={},a=Rp(ur(t.response.loaders,{deep:!1})),o=ue({type:"initial",dest:n,forceReload:!1,replaceState:!1,scroll:!0}),l=ur(sc),c=ur({headings:void 0,menu:void 0}),d=ue(),u=t.response.action,h=u?t.response.loaders[u]:void 0,p=ue(h?{id:u,data:t.response.formData,output:{result:h,status:t.response.status}}:void 0),v=z(Rg,"s_Ezi1aHl5EA8"),y=z(Dg,"s_OYiK83S2tvQ",[p,i,o,s]);return Ze(bg,c),Ze(Zl,d),Ze(ec,l),Ze(tc,s),Ze(rc,y),Ze(Xl,a),Ze(nc,p),Ze(wg,v),an(z(Og,"s_KajC5HmFCP4",[p,c,d,l,t,y,a,i,e,o,s])),W(kt,null,3,"pG_3")},zg=se(z(Bg,"s_xSYg098z8dQ")),Qg=(e={})=>{const[t,r,n,s]=oe();throw new Error(`Actions can not be invoked within the server during SSR.
Action.run() can only be called on the browser, for example when a user clicks a button, or submits a form.`)},oc=(e,...t)=>{const{id:r,validators:n}=lc(t,e);function s(){const i=Un(),a=Ig(),o={actionPath:`?${Pg}=${r}`,submitted:!1,isRunning:!1,status:void 0,value:void 0,formData:void 0},l=ur(()=>{const c=a.value;if(c&&c?.id===r){const d=c.data;if(d instanceof FormData&&(o.formData=d),c.output){const{status:u,result:h}=c.output;o.status=u,o.value=h}}return o});return o.submit=z(Qg,"s_Ip7fHOIzWcw",[a,r,i,l]),l}return s.__brand="server_action",s.__validators=n,s.__qrl=e,s.__id=r,Object.freeze(s),s},Mg=(e,...t)=>{const{id:r,validators:n}=lc(t,e);function s(){return rr(Xl,i=>{if(!(r in i))throw new Error(`routeLoader$ "${e.getSymbol()}" was invoked in a route where it was not declared.
    This is because the routeLoader$ was not exported in a 'layout.tsx' or 'index.tsx' file of the existing route.
    For more information check: https://qwik.dev/qwikcity/route-loader/

    If your are managing reusable logic or a library it is essential that this function is re-exported from within 'layout.tsx' or 'index.tsx file of the existing route otherwise it will not run or throw exception.
    For more information check: https://qwik.dev/docs/re-exporting-loaders/`);return al(i,r)})}return s.__brand="server_loader",s.__qrl=e,s.__validators=n,s.__id=r,Object.freeze(s),s},jg=async function(...e){const[t,r,n,s,i]=oe();e.length>0&&e[0]instanceof AbortSignal&&e.shift();{let a=globalThis.qcAsyncRequestStore?.getStore();return a||(a=[ac()?.ev,this,oh()].find(o=>o&&Object.prototype.hasOwnProperty.call(o,"sharedMap")&&Object.prototype.hasOwnProperty.call(o,"cookie"))),i.apply(a,e)}},Fg=(e,t)=>{{const o=e.getCaptured();if(o&&o.length>0&&!ah())throw new Error("For security reasons, we cannot serialize QRLs that capture lexical scope.")}const r=t?.method?.toUpperCase?.()||"POST",n=t?.headers||{},s=t?.origin||"",i=t?.fetchOptions||{};function a(){return z(jg,"s_MCuta9P3G2k",[i,n,r,s,e])}return a()},lc=(e,t)=>{let r;const n=[];if(e.length===1){const s=e[0];s&&typeof s=="object"&&("validate"in s?n.push(s):(r=s.id,s.validation&&n.push(...s.validation)))}else e.length>1&&n.push(...e.filter(s=>!!s));return typeof r=="string"?r=`id_${r}`:r=t.getHash(),{validators:n.reverse(),id:r}},Ug=e=>{const[t]=oe();if(!t.submitted)return t.submit(e)},La=({action:e,spaReset:t,reloadDocument:r,onSubmit$:n,...s},i)=>(rl(),e?Array.isArray(n)?Oe("form",{...s,get action(){return e.actionPath},action:Ce(e,"actionPath"),"preventdefault:submit":!r,method:"post","data-spa-reset":t?"true":void 0,onSubmit$:[...n,r?void 0:z(Ug,"s_nN3CgsmW9VM",[e])]},{method:j},0,i):Oe("form",{...s,get action(){return e.actionPath},action:Ce(e,"actionPath"),"preventdefault:submit":!r,method:"post","data-spa-reset":t?"true":void 0,onSubmit$:[r?void 0:e.submit,n]},{method:j},0,i):W(Jg,{spaReset:t,reloadDocument:r,onSubmit$:n,...s},0,i)),Vg=async(e,t)=>{const[r]=oe(),n=new FormData(t),s=new URLSearchParams;n.forEach((i,a)=>{typeof i=="string"&&s.append(a,i)}),await r("?"+s.toString(),{type:"form",forceReload:!0})},Wg=(e,t)=>{t.getAttribute("data-spa-reset")==="true"&&t.reset(),t.dispatchEvent(new CustomEvent("submitcompleted",{bubbles:!1,cancelable:!1,composed:!1,detail:{status:200}}))},Hg=e=>{const t=Fd(e,["action","spaReset","reloadDocument","onSubmit$"]),r=ic();return Oe("form",{action:"get",get"preventdefault:submit"(){return!e.reloadDocument},get"data-spa-reset"(){return e.spaReset?"true":void 0},...t,children:W(kt,null,3,"pG_10"),onSubmit$:[...Array.isArray(e.onSubmit$)?e.onSubmit$:[e.onSubmit$],z(Vg,"s_V0EST5LSEAU",[r]),z(Wg,"s_U0pgwr815JE")]},{action:j,"preventdefault:submit":Ee(n=>!n.reloadDocument,[e],"!p0.reloadDocument"),"data-spa-reset":Ee(n=>n.spaReset?"true":void 0,[e],'p0.spaReset?"true":void 0')},0,"pG_11")},Jg=se(z(Hg,"s_KrBf14t5ejM")),Kg=new Set(["style","font","script","image"]);const Gg=(e,t,r)=>{const n=new Set;return Array.from(e??[]).filter(s=>{if(s.rel!=="preload")return!0;if(t)return!1;const i=s.href,a=s.as;return typeof i!="string"||i.trim().length===0||r&&!r.has(i)||typeof a!="string"||!Kg.has(a)||n.has(i)?!1:(n.add(i),!0)})};var cc=[];const Yg=(e,t)=>{if(t)return[];const r=new Set;return cc.filter(({pattern:n})=>n.test(e)).flatMap(({links:n})=>n).filter(n=>{const s=n.href;if(typeof s!="string"||s.trim().length===0)return!1;const i=`${n.rel}:${s}`;return r.has(i)?!1:(r.add(i),!0)})};var Xg=e=>typeof e=="string"&&e.trim().length>0;const Zg=new Set(cc.flatMap(({links:e})=>e).filter(e=>e.rel==="preload").map(e=>e.href).filter(Xg));var e$=(e,t)=>e===void 0?t:typeof e=="boolean"?e:e==="1"||e.toLowerCase()==="true",is=(e,t)=>e$(e,t&&!0);const gr={speculationRules:is(void 0,!0),viewTransitions:is(void 0,!0),partytown:is(void 0,!1)};var t$=async e=>{const[t,r,n]=oe();if(r||e.defaultPrevented||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;if(e.preventDefault(),typeof document>"u"){await n(t);return}const s=document,i=gr.viewTransitions?s.startViewTransition:void 0;if(i){i.call(s,()=>n(t))?.finished.catch(()=>{});return}await n(t)},r$=()=>{const e=Un(),t=ic(),r=Ii({queryLocale:e.url.searchParams.get("locale"),cookieLocale:typeof document<"u"?document.cookie.split(";").map(s=>s.trim()).find(s=>s.startsWith("locale="))?.split("=")[1]:void 0,acceptLanguage:typeof navigator<"u"?navigator.languages?.join(",")||navigator.language:void 0}),n=s=>{const i=new URLSearchParams(e.url.search);i.set("locale",s);const a=i.toString();return`${e.url.pathname}${a?`?${a}`:""}`};return P("div",null,{class:"flex items-center gap-1 text-xs"},As.map(s=>{const i=s===r,a=n(s);return P("a",{href:a,"aria-disabled":i,style:i?{viewTransitionName:"locale-pill"}:void 0,class:["rounded-full border px-2 py-1 transition-colors",i?"border-emerald-500/40 bg-emerald-500/10 text-emerald-200 pointer-events-none":"border-slate-700 text-slate-300 hover:text-emerald-200 hover:border-emerald-500/40"].join(" "),onClick$:z(t$,"s_CskzXQBKCjQ",[a,i,t])},null,Ei[s]??s.toUpperCase(),0,s)}),1,"mU_0")};const n$=se(z(r$,"s_00eYrYyi6VA"));var as=e=>{const t=typeof import.meta<"u"&&{BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!0}[e];if(t!==void 0)return t;if(typeof process<"u")return process.env?.[e]??process.env?.[e.replace(/^VITE_/,"")]},_e={gaId:as("VITE_GTAG_ID"),adsClient:as("VITE_ADSENSE_CLIENT"),supportWidgetSrc:as("VITE_SUPPORT_WIDGET_SRC")},uc=[{id:"gtag",label:"Google Analytics 4",category:"analytics",src:_e.gaId?`https://www.googletagmanager.com/gtag/js?id=${_e.gaId}`:void 0,inline:_e.gaId?`window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', '${_e.gaId}', { transport_type: 'beacon', send_page_view: true });`:void 0,forward:["dataLayer.push","gtag"],attributes:{async:!0,"data-gtm-id":_e.gaId},budgetKb:90,load:"defer",partytown:!0,fallback:"Falls back to async tag when Partytown is disabled.",when:!!_e.gaId},{id:"adsense",label:"Google AdSense",category:"ads",src:_e.adsClient?`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${_e.adsClient}`:void 0,forward:["adsbygoogle.push"],attributes:{async:!0,"data-ad-client":_e.adsClient,crossOrigin:"anonymous"},budgetKb:95,load:"idle",partytown:!0,fallback:"Loads on idle/timeout when Partytown is off to avoid blocking hydration.",when:!!_e.adsClient},{id:"support-widget",label:"Support chat widget",category:"widget",src:_e.supportWidgetSrc,budgetKb:120,load:"interaction",partytown:!1,fallback:"Injected after user input, idle callback, or 5s timeout.",when:!!_e.supportWidgetSrc}];const bn=uc.filter(e=>e.when),s$=Array.from(new Set(uc.flatMap(e=>e.forward??[])));var i$=(e,t)=>`(()=>{const url='${t}';let loaded=false;const load=()=>{if(loaded||!url)return;loaded=true;const s=document.createElement('script');s.src=url;s.async=true;s.dataset.thirdParty='${e}';document.body.appendChild(s);};const prime=()=>{load();cleanup();};const cleanup=()=>events.forEach((event)=>window.removeEventListener(event,prime,opts));const events=['pointerdown','keydown','touchstart','focusin'];const opts={once:true,passive:true};events.forEach((event)=>window.addEventListener(event,prime,opts));if('requestIdleCallback'in window){requestIdleCallback(()=>prime(),{timeout:5000});}else{setTimeout(prime,5000);}setTimeout(load,8000);})();`,a$=()=>bn.length?W(Be,{children:bn.map(e=>{if(!e.src&&!e.inline)return null;const t=e.attributes??{};if(e.partytown&&gr.partytown)return W(Be,{children:[e.src&&Oe("script",{type:"text/partytown",...t,get src(){return e.src},src:Ce(e,"src")},{type:j},0,"dH_0"),e.inline&&Oe("script",{type:"text/partytown",...t,get dangerouslySetInnerHTML(){return e.inline},dangerouslySetInnerHTML:Ce(e,"inline")},{type:j},0,"dH_1")]},1,e.id);if(e.load==="interaction"&&e.src)return P("script",{dangerouslySetInnerHTML:i$(e.id,e.src)},null,null,3,`${e.id}-loader`);const r=e.load==="defer"?{defer:!0}:{async:!0};return W(Be,{children:[e.src&&Oe("script",{...t,...r,get src(){return e.src},src:Ce(e,"src")},null,0,"dH_2"),e.inline&&Oe("script",{...t,...r,get dangerouslySetInnerHTML(){return e.inline},dangerouslySetInnerHTML:Ce(e,"inline")},null,0,"dH_3")]},1,e.id)})},1,"dH_4"):null;const o$=se(z(a$,"s_mLjU5QE56DA"));var l$=".route-transition{view-transition-name:route;contain:paint}",c$=`:root {
  color-scheme: light dark;
}

:root[data-theme='light'],
:root.light {
  color-scheme: light;
}

:root[data-theme='dark'],
:root.dark {
  color-scheme: dark;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background-color: #020617;
  color: #e2e8f0;
  min-height: 100vh;
}
`;const u$=c$,d$={prefetch:[{source:"document",where:{and:[{selector_matches:'a[href^="/"]:not([href*="#"]):not([href*="?"])'},{not:{selector_matches:'[rel~=nofollow], [data-speculate="false"]'}}]},eagerness:"moderate"}],prerender:[]},f$=(...e)=>{const t={prefetch:[],prerender:[]};return e.forEach(r=>{r&&(r.prefetch?.length&&t.prefetch?.push(...r.prefetch),r.prerender?.length&&t.prerender?.push(...r.prerender))}),!t.prefetch?.length&&!t.prerender?.length?null:(t.prefetch?.length||delete t.prefetch,t.prerender?.length||delete t.prerender,t)};var h$=dt({RouterHead:()=>mc,_auto_isNonEmptyString:()=>dc,_auto_navLinks:()=>Li,_auto_resolveSpeculationCandidates:()=>fc,_auto_resolveThirdPartyOrigins:()=>pc,_auto_toSpeculationRules:()=>hc,default:()=>g$},1),Li=[{href:"/",label:()=>N`Home`},{href:"/store",label:()=>N`Store`,dataSpeculate:"prerender"},{href:"/chat",label:()=>N`Chat`,dataSpeculate:"prefetch"},{href:"/ai",label:()=>N`AI`}],dc=e=>typeof e=="string"&&e.trim().length>0,fc=e=>Li.filter(t=>!!t.dataSpeculate&&t.href!==e).map(({href:t,dataSpeculate:r})=>({url:t,action:r})),hc=e=>{const t={prefetch:[],prerender:[]};return e.forEach(r=>{r.action==="prefetch"&&t.prefetch?.push({source:"list",urls:[r.url]}),r.action==="prerender"&&t.prerender?.push({source:"list",urls:[r.url]})}),t.prefetch?.length||t.prerender?.length?t:null},pc=e=>Array.from(e.reduce((t,r)=>{if(!r.src)return t;try{const{origin:n}=new URL(r.src);n&&t.add(n)}catch{}return t},new Set)),p$=()=>{const e=Ag(),t=Un(),r=gr.speculationRules&&!0,n=r?fc(t.url.pathname):[],s=r?hc(n):null,i=r?f$(d$,s):null,a=Yg(t.url.pathname,!1),o=new Set([...Zg,...a.map(p=>p.href).filter(dc)]),l=pc(bn),c=Gg([...e.links,...a],!1,o),d=!1,u=i?JSON.stringify(i):null,h=r&&u?`(()=>{const script=document.querySelector('script[type="speculationrules"][data-source="router"]');if(!script)return;if(navigator.connection?.saveData){script.remove();return;}if(!HTMLScriptElement.supports?.('speculationrules')){script.remove();}})();`:void 0;return W(Be,{children:[P("title",null,null,e.title||"Prometheus",1,null),P("meta",null,{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"},null,3,null),P("link",null,{rel:"canonical",href:Ee(p=>p.url.href,[t],"p0.url.href")},null,3,null),P("style",null,{"data-critical":!0,dangerouslySetInnerHTML:u$},null,3,null),e.meta.map(p=>Oe("meta",{...p},null,0,p.key)),c.map(p=>Oe("link",{...p},null,0,p.key)),l.map(p=>P("link",{href:p},{rel:"dns-prefetch"},null,3,`dns:${p}`)),l.map(p=>P("link",{href:p},{rel:"preconnect",crossOrigin:"anonymous"},null,3,`preconnect:${p}`)),r&&n.map(({url:p,action:v})=>P("link",{rel:v,href:p},null,null,3,`${v}:${p}`)),e.styles.map(p=>Oe("style",{...p.props,get dangerouslySetInnerHTML(){return p.style},dangerouslySetInnerHTML:Ce(p,"style")},null,0,p.key)),gr.partytown&&bn.some(p=>p.partytown)&&P("script",null,{dangerouslySetInnerHTML:ju({lib:"/~partytown/",forward:s$})},null,3,"qG_0"),u&&P("script",{dangerouslySetInnerHTML:u},{type:"speculationrules","data-source":"router"},null,3,"qG_1"),h&&P("script",{dangerouslySetInnerHTML:h},null,null,3,"qG_2"),gr.viewTransitions&&P("script",null,{dangerouslySetInnerHTML:"if ('startViewTransition' in document) {document.documentElement.classList.add('supports-view-transition');}"},null,3,"qG_3"),W(o$,null,3,"qG_4"),d]},1,"qG_6")};const mc=se(z(p$,"s_0ZAFccQi4aM"));var m$=()=>(Br(z(l$,"s_ovuN5RMiUy0")),P("div",null,{class:"min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950"},[P("header",null,{class:"sticky top-0 z-20 border-b border-slate-800 bg-slate-950/80 backdrop-blur"},P("nav",null,{class:"mx-auto flex max-w-5xl items-center justify-between px-4 py-3 text-sm font-medium"},[P("div",null,{class:"flex items-center gap-2"},[P("span",null,{class:"rounded-full bg-emerald-500/10 px-3 py-1 text-emerald-300"},"Prometheus",3,null),P("span",null,{class:"text-slate-400"},N`Performance Lab`,1,null)],1,null),P("div",null,{class:"flex items-center gap-4 text-slate-200"},[Li.map(({href:e,label:t,dataSpeculate:r})=>P("a",{href:e,"data-speculate":r},{class:"hover:text-emerald-300 transition-colors"},t(),1,e)),W(n$,null,3,"qG_7")],1,null)],1,null),1,null),P("main",null,{class:"mx-auto flex max-w-5xl flex-col gap-6 px-4 py-10 route-transition"},W(kt,null,3,"qG_8"),1,null)],1,"qG_9")),g$=se(z(m$,"s_wqKL2Up903o")),$$=".home-grid{gap:1.5rem;display:grid}@media (width>=768px){.home-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}",v$=dt({default:()=>$c,head:()=>vc,onGet:()=>gc},1);const gc=({cacheControl:e})=>{e({public:!0,maxAge:900})};var y$=()=>(Br(z($$,"s_RIE80aAOC7Q")),P("section",null,{class:"home-grid"},[P("div",null,{class:"p-6 surface"},[P("p",null,{class:"text-emerald-300 text-sm uppercase tracking-wide"},N`Performance first`,1,null),P("h1",null,{class:"mt-2 font-semibold text-slate-50 text-3xl"},N`Microscopic first load, big capability`,1,null),P("p",null,{class:"mt-4 text-slate-300"},N`Qwik City SSR keeps the shell light. Navigation is enhanced with View Transitions and Speculation Rules when the browser supports them, and third-party scripts stay off the main thread.`,1,null),P("div",null,{class:"gap-3 grid mt-6 text-slate-200 text-sm"},[P("div",null,{class:"flex items-center gap-2"},N`- Ultra-thin home route with immutable caching`,1,null),P("div",null,{class:"flex items-center gap-2"},N`- Lazy feature routes for store, chat, and AI`,1,null),P("div",null,{class:"flex items-center gap-2"},N`- Optional Partytown for third-party isolation`,1,null)],1,null)],1,null),P("div",null,{class:"p-6 text-slate-200 text-sm surface"},[P("h2",null,{class:"font-semibold text-slate-50 text-lg"},N`Latency budget`,1,null),P("ul",null,{class:"space-y-2 mt-3"},[P("li",null,null,N`Server render: sub-50ms target with streaming enabled`,1,null),P("li",null,null,N`Critical CSS: UnoCSS + Lightning CSS keeps payloads tiny`,1,null),P("li",null,null,N`Speculative nav: prerender store, prefetch chat`,1,null)],1,null)],1,null)],1,"FW_0")),$c=se(z(y$,"s_e7mxYERDQJw"));const vc=({withLocale:e})=>e(()=>({title:N`Prometheus | Ultra-fast starter`,meta:[{name:"description",content:N`Qwik City + Bun + Valkey performance stack starter.`}]}));var b$=dt({default:()=>$c,head:()=>vc,onGet:()=>gc},1),w$=".ai-island{margin-top:1rem}",S$=async()=>{const[e,t]=oe();if(!e.value)return;const r=await fetch("/api/ai/echo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e.value})});if(r.ok){const{echo:n}=await r.json();t.value=n}},x$=()=>{const e=ue(""),t=ue(""),r=z(S$,"s_rGtr6P02y5w",[e,t]);return P("div",null,{class:"ai-island space-y-3 text-sm text-slate-200"},[P("textarea",null,{value:Ee(n=>n.value,[e],"p0.value"),class:"w-full rounded-lg border border-slate-800 bg-slate-900 px-3 py-2",placeholder:N`Type a quick prompt`,rows:4,onInput$:Ct("s_YrRlW66gD5Y",[e])},null,3,null),P("div",null,{class:"flex items-center gap-2"},[P("button",null,{type:"button",class:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-950",onClick$:r},N`Send to API`,1,null),t.value&&P("span",null,{class:"text-emerald-300"},N`Response: ${t.value}`,1,"9W_0")],1,null)],1,"9W_1")};const _$=se(z(x$,"s_6AcQXlwaGPM"));var P$=dt({default:()=>C$,head:()=>k$},1),T$=()=>(Br(z(w$,"s_S5uQY9BGXbM")),P("section",null,{class:"surface p-6"},[P("p",null,{class:"text-sm uppercase tracking-wide text-emerald-300"},N`AI tools`,1,null),P("h1",null,{class:"text-2xl font-semibold text-slate-50"},N`Edge-friendly utilities`,1,null),P("p",null,{class:"mt-3 max-w-2xl text-sm text-slate-300"},N`This route keeps the interaction simple: a round-trip echo API that exercises Bun + Elysia without shipping extra client bundles.`,1,null),P("div",null,{onQVisible$:Ct("s_08qeP0eGH6U")},W(_$,null,3,"gn_0"),1,null)],1,"gn_1")),C$=se(z(T$,"s_X8xIQqUjebE"));const k$=({withLocale:e})=>e(()=>({title:N`AI | Prometheus`,meta:[{name:"description",content:N`Minimal AI utility route hitting Bun API.`}]}));var q$=".chat-island{margin-top:1.25rem}.chat-messages{max-height:16rem}",N$=({cleanup:e})=>{const[t,r,n]=oe()},A$=()=>{const[e,t]=oe();!e.value||!t.value||(t.value.send(JSON.stringify({type:"chat",text:e.value})),e.value="")},E$=()=>{const e=ue([]),t=ue(null),r=ue(""),n=ue(!1);an(z(N$,"s_QOX90pOt9sA",[e,n,t]),{eagerness:"visible"});const s=z(A$,"s_0P85XrqKCfY",[r,t]);return P("div",null,{class:"chat-island"},[P("div",null,{class:"mt-4 flex items-center gap-3"},[P("button",null,{type:"button",class:"rounded-lg bg-slate-800 px-3 py-2 text-sm text-slate-100 ring-1 ring-slate-700 transition hover:bg-slate-700",disabled:Ee(i=>i.value,[n],"p0.value"),onClick$:Ct("s_DoKYoyvM41g",[n])},n.value?N`Connected`:N`Connect to chat`,1,null),!n.value&&P("span",null,{class:"text-xs text-slate-400"},N`No socket opened until you opt in.`,1,"Ki_0")],1,null),P("div",null,{class:"mt-5 space-y-3 text-sm text-slate-200"},[P("div",null,{class:"surface chat-messages overflow-auto p-4"},[e.value.length===0&&P("p",null,{class:"text-slate-500"},N`No messages yet.`,1,"Ki_1"),e.value.map(i=>P("div",null,{class:"py-1"},[P("span",null,{class:"text-slate-400"},[Ce(i,"from"),":"],1,null)," ",P("span",null,null,Ce(i,"text"),1,null)],1,i.id))],1,null),P("div",null,{class:"flex gap-2"},[P("input",null,{value:Ee(i=>i.value,[r],"p0.value"),class:"w-full rounded-lg border border-slate-800 bg-slate-900 px-3 py-2 text-slate-100",placeholder:N`Say something quick`,onInput$:Ct("s_hgk47q7YSmg",[r])},null,3,null),P("button",null,{type:"button",class:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-950",onClick$:s},N`Send`,1,null)],1,null)],1,null)],1,"Ki_2")};const I$=se(z(E$,"s_54i2tFOIwmo"));var L$=dt({default:()=>D$,head:()=>O$},1),R$=()=>(Br(z(q$,"s_hNgJ6QruKFA")),P("section",null,{class:"surface p-6"},[P("div",null,{class:"flex items-center justify-between gap-2"},[P("div",null,null,[P("p",null,{class:"text-sm uppercase tracking-wide text-emerald-300"},N`Realtime`,1,null),P("h1",null,{class:"text-2xl font-semibold text-slate-50"},N`WebSocket chat via Valkey pub/sub`,1,null)],1,null),P("span",null,{class:"rounded-full bg-slate-800 px-3 py-1 text-xs text-slate-200"},N`websocket`,1,null)],1,null),P("p",null,{class:"mt-3 max-w-2xl text-sm text-slate-300"},N`The client only loads after navigation to keep the home route microscopic. Connect on demand to keep bfcache eligibility until realtime is needed. Messages fan out through Valkey channels on the API.`,1,null),P("div",null,{onQVisible$:Ct("s_ELa2ERJwGkM")},W(I$,null,3,"TX_0"),1,null)],1,"TX_1")),D$=se(z(R$,"s_uFxaifyy6KQ"));const O$=({withLocale:e})=>e(()=>({title:N`Chat | Prometheus`,meta:[{name:"description",content:N`WebSocket chat backed by Valkey pub/sub.`}]}));var Ri=Symbol.for("drizzle:OriginalColumn"),g=Symbol.for("drizzle:entityKind"),f0=Symbol.for("drizzle:hasOwnEntityKind");function w(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,g))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(e).constructor;if(r)for(;r;){if(g in r&&r[g]===t[g])return!0;r=Object.getPrototypeOf(r)}return!1}var H=class{static[g]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;length;isLengthExact;isAlias;config;table;onInit(){}constructor(e,t){this.config=t,this.onInit(),this.table=e,this.name=t.name,this.isAlias=!1,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity,this.length=t.length,this.isLengthExact=t.isLengthExact}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}[Ri](){return this}},B$=class{static[g]="ColumnBuilder";config;constructor(e,t,r){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}},tt=Symbol.for("drizzle:Name"),z$=class{static[g]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{const{name:r,columns:n,foreignColumns:s}=e();return{name:r,columns:n,foreignTable:s[0].table,foreignColumns:s}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Q$(e,this)}},Q$=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[g]="PgForeignKey";reference;onUpdate;onDelete;name;getName(){const{name:e,columns:t,foreignColumns:r}=this.reference(),n=t.map(a=>a.name),s=r.map(a=>a.name),i=[this.table[tt],...n,r[0].table[tt],...s];return e??`${i.join("_")}_fk`}isNameExplicit(){return!!this.reference().name}};function M$(e,...t){return e(...t)}function Ra(e,t,r){for(let n=t;n<e.length;n++){const s=e[n];if(s==="\\"){n++;continue}if(s==='"')return[e.slice(t,n).replace(/\\/g,""),n+1];if(!r&&(s===","||s==="}"))return[e.slice(t,n).replace(/\\/g,""),n]}return[e.slice(t).replace(/\\/g,""),e.length]}function yc(e,t=0){const r=[];let n=t,s=!1;for(;n<e.length;){const i=e[n];if(i===","){(s||n===t)&&r.push(""),s=!0,n++;continue}if(s=!1,i==="\\"){n+=2;continue}if(i==='"'){const[l,c]=Ra(e,n+1,!0);r.push(l),n=c;continue}if(i==="}")return[r,n+1];if(i==="{"){const[l,c]=yc(e,n+1);r.push(l),n=c;continue}const[a,o]=Ra(e,n,!1);r.push(a),n=o}return[r,n]}function Da(e){const[t]=yc(e,1);return t}function bc(e){return`{${e.map(t=>Array.isArray(t)?bc(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var M=class extends B${foreignKeyConfigs=[];static[g]="PgColumnBuilder";array(e){return new F$(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,config:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,config:n})=>M$((s,i)=>{const a=new z$(()=>{const o=s();return{name:i.name,columns:[e],foreignColumns:[o]}});return i.onUpdate&&a.onUpdate(i.onUpdate),i.onDelete&&a.onDelete(i.onDelete),a.build(t)},r,n))}buildExtraConfigColumn(e){return new j$(e,this.config)}},L=class extends H{static[g]="PgColumn";table;constructor(e,t){super(e,t),this.table=e}},j$=class extends L{static[g]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},h0=class{static[g]="IndexedColumn";constructor(e,t,r,n){this.name=e,this.keyAsName=t,this.type=r,this.indexConfig=n}name;keyAsName;type;indexConfig},F$=class extends M{static[g]="PgArrayBuilder";constructor(e,t,r){super(e,"array basecolumn","PgArray"),this.config.baseBuilder=t,this.config.length=r}build(e){const t=this.config.baseBuilder.build(e);return new wc(e,this.config,t)}},wc=class Sc extends L{constructor(t,r,n,s){super(t,r),this.baseColumn=n,this.range=s}static[g]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.length=="number"?this.length:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=Da(t)),t.map(r=>this.baseColumn.mapFromDriverValue(r))}mapFromJsonValue(t){typeof t=="string"&&(t=Da(t));const r=this.baseColumn;return"mapFromJsonValue"in r?t.map(n=>r.mapFromJsonValue(n)):t.map(n=>r.mapFromDriverValue(n))}mapToDriverValue(t,r=!1){const n=t.map(s=>s===null?null:w(this.baseColumn,Sc)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return r?n:bc(n)}},p0=class extends M{static[g]="PgEnumObjectColumnBuilder";constructor(e,t){super(e,"string enum","PgEnumObjectColumn"),this.config.enum=t}build(e){return new U$(e,this.config)}},U$=class extends L{static[g]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}},Oa=Symbol.for("drizzle:isPgEnum");function V$(e){return!!e&&typeof e=="function"&&Oa in e&&e[Oa]===!0}var m0=class extends M{static[g]="PgEnumColumnBuilder";constructor(e,t){super(e,"string enum","PgEnumColumn"),this.config.enum=t}build(e){return new W$(e,this.config)}},W$=class extends L{static[g]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}},ie=class{static[g]="Subquery";constructor(e,t,r,n=!1,s=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:r,isWith:n,usedTables:s}}},xc=class extends ie{static[g]="WithSubquery"},J={startActiveSpan(e,t){return t()}},K=Symbol.for("drizzle:ViewBaseConfig"),Je=Symbol.for("drizzle:Schema"),ct=Symbol.for("drizzle:Columns"),Ba=Symbol.for("drizzle:ExtraConfigColumns"),$r=Symbol.for("drizzle:OriginalName"),os=Symbol.for("drizzle:BaseName"),er=Symbol.for("drizzle:IsAlias"),za=Symbol.for("drizzle:ExtraConfigBuilder"),H$=Symbol.for("drizzle:IsDrizzleTable"),E=class{static[g]="Table";static Symbol={Name:tt,Schema:Je,OriginalName:$r,Columns:ct,ExtraConfigColumns:Ba,BaseName:os,IsAlias:er,ExtraConfigBuilder:za};[tt];[$r];[Je];[ct];[Ba];[os];[er]=!1;[H$]=!0;[za]=void 0;constructor(e,t,r){this[tt]=this[$r]=e,this[Je]=t,this[os]=r}};function Ve(e){return e[tt]}function Tr(e){return`${e[Je]??"public"}.${e[tt]}`}var g0=class{static[g]="FakePrimitiveParam"};function Di(e){return e!=null&&typeof e.getSQL=="function"}function J$(e){const t={sql:"",params:[]};for(const r of e)t.sql+=r.sql,t.params.push(...r.params),r.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}var ne=class{static[g]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new I([this])}},I=class dr{constructor(t){this.queryChunks=t;for(const r of t)if(w(r,E)){const n=r[E.Symbol.Schema];this.usedTables.push(n===void 0?r[E.Symbol.Name]:n+"."+r[E.Symbol.Name])}}static[g]="SQL";decoder=Oi;shouldInlineParams=!1;usedTables=[];append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return J.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,t);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(t,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:a,prepareTyping:o,inlineParams:l,paramStartIndex:c,invokeSource:d}=n;return J$(t.map(u=>{if(w(u,ne))return{sql:u.value.join(""),params:[]};if(w(u,Is))return{sql:i(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const h=[new ne("(")];for(const[p,v]of u.entries())h.push(v),p<u.length-1&&h.push(new ne(", "));return h.push(new ne(")")),this.buildQueryFromSourceParams(h,n)}if(w(u,dr))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:l||u.shouldInlineParams});if(w(u,E)){const h=u[E.Symbol.Schema],p=u[E.Symbol.Name];return d==="mssql-view-with-schemabinding"?{sql:i(h===void 0?"dbo":h)+"."+i(p),params:[]}:{sql:h===void 0||u[er]?i(p):i(h)+"."+i(p),params:[]}}if(w(u,H)){const h=s.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:i(h),params:[]};const p=d==="mssql-check"?void 0:u.table[E.Symbol.Schema];return{sql:u.isAlias?i(u.name):u.table[er]||p===void 0?i(u.table[E.Symbol.Name])+"."+i(h):i(p)+"."+i(u.table[E.Symbol.Name])+"."+i(h),params:[]}}if(w(u,mt)){const h=u[K].schema,p=u[K].name;return{sql:h===void 0||u[K].isAlias?i(p):i(h)+"."+i(p),params:[]}}if(w(u,ut)){if(w(u.value,qt))return{sql:a(c.value++,u),params:[u],typings:["none"]};const h=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(w(h,dr))return this.buildQueryFromSourceParams([h],n);if(l)return{sql:this.mapInlineParam(h,n),params:[]};let p=["none"];return o&&(p=[o(u.encoder)]),{sql:a(c.value++,h),params:[h],typings:p}}return w(u,qt)?{sql:a(c.value++,u),params:[u],typings:["none"]}:w(u,dr.Aliased)&&u.fieldAlias!==void 0?{sql:i(u.fieldAlias),params:[]}:w(u,ie)?u._.isWith?{sql:i(u._.alias),params:[]}:this.buildQueryFromSourceParams([new ne("("),u._.sql,new ne(") "),new Is(u._.alias)],n):V$(u)?u.schema?{sql:i(u.schema)+"."+i(u.enumName),params:[]}:{sql:i(u.enumName),params:[]}:Di(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new ne("("),u.getSQL(),new ne(")")],n):l?{sql:this.mapInlineParam(u,n),params:[]}:{sql:a(c.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(t,{escapeString:r}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(typeof t=="string")return r(t);if(typeof t=="object"){const n=t.toString();return r(n==="[object Object]"?JSON.stringify(t):n)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new dr.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}},Is=class{constructor(e){this.value=e}static[g]="Name";brand;getSQL(){return new I([this])}};function K$(e){return typeof e=="object"&&e!==null&&"mapToDriverValue"in e&&typeof e.mapToDriverValue=="function"}var Oi={mapFromDriverValue:e=>e},_c={mapToDriverValue:e=>e},$0={...Oi,..._c},ut=class{constructor(e,t=_c){this.value=e,this.encoder=t}static[g]="Param";brand;getSQL(){return new I([this])}};function f(e,...t){const r=[];(t.length>0||e.length>0&&e[0]!=="")&&r.push(new ne(e[0]));for(const[n,s]of t.entries())r.push(s,new ne(e[n+1]));return new I(r)}(e=>{function t(){return new I([])}e.empty=t;function r(l){return new I(l)}e.fromList=r;function n(l){return new I([new ne(l)])}e.raw=n;function s(l,c){const d=[];for(const[u,h]of l.entries())u>0&&c!==void 0&&d.push(c),d.push(h);return new I(d)}e.join=s;function i(l){return new Is(l)}e.identifier=i;function a(l){return new qt(l)}e.placeholder=a;function o(l,c){return new ut(l,c)}e.param=o})(f||(f={}));(e=>{class t{constructor(n,s){this.sql=n,this.fieldAlias=s}static[g]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(I||(I={}));var qt=class{constructor(e){this.name=e}static[g]="Placeholder";getSQL(){return new I([this])}};function ls(e,t){return e.map(r=>{if(w(r,qt)){if(!(r.name in t))throw new Error(`No value for placeholder "${r.name}" was provided`);return t[r.name]}if(w(r,ut)&&w(r.value,qt)){if(!(r.value.name in t))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(t[r.value.name])}return r})}var G$=Symbol.for("drizzle:IsDrizzleView"),mt=class{static[g]="View";[K];[G$]=!0;get[tt](){return this[K].name}get[Je](){return this[K].schema}get[er](){return this[K].isAlias}get[$r](){return this[K].originalName}get[ct](){return this[K].selectedFields}constructor({name:e,schema:t,selectedFields:r,query:n}){this[K]={name:e,originalName:e,schema:t,selectedFields:r,query:n,isExisting:!n,isAlias:!1}}};H.prototype.getSQL=function(){return new I([this])};ie.prototype.getSQL=function(){return new I([this])};var wn=class{constructor(e,t){this.table=e,this.ignoreColumnAlias=t}static[g]="ColumnTableAliasProxyHandler";get(e,t){return t==="table"?this.table:t==="isAlias"&&this.ignoreColumnAlias?!1:e[t]}},Bi=class{constructor(e,t,r){this.alias=e,this.replaceOriginalName=t,this.ignoreColumnAlias=r}static[g]="TableAliasProxyHandler";get(e,t){if(t===E.Symbol.IsAlias)return!0;if(t===E.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===E.Symbol.OriginalName)return this.alias;if(t===K)return{...e[K],name:this.alias,isAlias:!0};if(t===E.Symbol.Columns){const n=e[E.Symbol.Columns];if(!n)return n;const s={};return Object.keys(n).map(i=>{s[i]=new Proxy(n[i],new wn(new Proxy(e,this),this.ignoreColumnAlias))}),s}const r=e[t];return w(r,H)?new Proxy(r,new wn(new Proxy(e,this),this.ignoreColumnAlias)):r}},Y$=class{constructor(e){this.alias=e}static[g]="ColumnAliasProxyHandler";get(e,t){return t==="isAlias"?!0:t==="name"?this.alias:t==="keyAsName"?!1:t===Ri?()=>e:e[t]}},v0=class{constructor(e){this.alias=e}static[g]="RelationTableAliasProxyHandler";get(e,t){return t==="sourceTable"?Ue(e.sourceTable,this.alias):e[t]}};function Ue(e,t){return new Proxy(e,new Bi(t,!1,!1))}function X$(e,t){return new Proxy(e,new Y$(t))}function je(e,t){return new Proxy(e,new wn(new Proxy(e.table,new Bi(t,!1,!1)),!1))}function Pc(e,t){return new I.Aliased(Sn(e.sql,t),e.fieldAlias)}function Sn(e,t){return f.join(e.queryChunks.map(r=>w(r,H)?je(r,t):w(r,I)?Sn(r,t):w(r,I.Aliased)?Pc(r,t):r))}H.prototype.as=function(e){return X$(this,e)};function Qa(e){return e[Ri]()}var vr=class extends Error{static[g]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}},Ot=class Tc extends Error{constructor(t,r,n){super(`Failed query: ${t}
params: ${r}`),this.query=t,this.params=r,this.cause=n,Error.captureStackTrace(this,Tc),n&&(this.cause=n)}static[g]="DrizzleQueryError"},Z$=class extends vr{static[g]="TransactionRollbackError";constructor(){super({message:"Rollback"})}},ev=class{static[g]="ConsoleLogWriter";write(e){console.log(e)}},tv=class{static[g]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new ev}logQuery(e,t){const r=t.map(s=>{try{return JSON.stringify(s)}catch{return String(s)}}),n=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${n}`)}},rv=class{static[g]="NoopLogger";logQuery(){}},gt=class{static[g]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}};function X(e,t){return K$(t)&&!Di(e)&&!w(e,ut)&&!w(e,qt)&&!w(e,H)&&!w(e,E)&&!w(e,mt)?new ut(e,t):e}var rt=(e,t)=>f`${e} = ${X(t,e)}`,Cc=(e,t)=>f`${e} <> ${X(t,e)}`;function we(...e){const t=e.filter(r=>r!==void 0);if(t.length!==0)return t.length===1?new I(t):new I([new ne("("),f.join(t,new ne(" and ")),new ne(")")])}function Vn(...e){const t=e.filter(r=>r!==void 0);if(t.length!==0)return t.length===1?new I(t):new I([new ne("("),f.join(t,new ne(" or ")),new ne(")")])}function Wn(e){return f`not ${e}`}var Hn=(e,t)=>f`${e} > ${X(t,e)}`,kc=(e,t)=>f`${e} >= ${X(t,e)}`,qc=(e,t)=>f`${e} < ${X(t,e)}`,Nc=(e,t)=>f`${e} <= ${X(t,e)}`;function Ac(e,t){return Array.isArray(t)?t.length===0?f`false`:f`${e} in ${t.map(r=>X(r,e))}`:f`${e} in ${X(t,e)}`}function Ec(e,t){return Array.isArray(t)?t.length===0?f`true`:f`${e} not in ${t.map(r=>X(r,e))}`:f`${e} not in ${X(t,e)}`}function Ic(e){return f`(${e} is null)`}function Lc(e){return f`(${e} is not null)`}function zi(e){return f`exists ${e}`}function Qi(e){return f`not exists ${e}`}function Rc(e,t,r){return f`${e} between ${X(t,e)} and ${X(r,e)}`}function Dc(e,t,r){return f`${e} not between ${X(t,e)} and ${X(r,e)}`}function Oc(e,t){return f`${e} like ${t}`}function Bc(e,t){return f`${e} not like ${t}`}function zc(e,t){return f`${e} ilike ${t}`}function Qc(e,t){return f`${e} not ilike ${t}`}function nv(e,t){if(Array.isArray(t)){if(t.length===0)throw new Error("arrayContains requires at least one value");return f`${e} @> ${f`${X(t,e)}`}`}return f`${e} @> ${X(t,e)}`}function sv(e,t){if(Array.isArray(t)){if(t.length===0)throw new Error("arrayContained requires at least one value");return f`${e} <@ ${f`${X(t,e)}`}`}return f`${e} <@ ${X(t,e)}`}function iv(e,t){if(Array.isArray(t)){if(t.length===0)throw new Error("arrayOverlaps requires at least one value");return f`${e} && ${f`${X(t,e)}`}`}return f`${e} && ${X(t,e)}`}function yr(e){return f`${e} asc`}function Mi(e){return f`${e} desc`}var Mc=class{constructor(e,t){this.targetTableName=t,this.targetTable=e}static[g]="RelationV2";fieldName;sourceColumns;targetColumns;alias;where;sourceTable;targetTable;through;throughTable;isReversed;sourceColumnTableNames=[];targetColumnTableNames=[]},jc=class extends Mc{static[g]="OneV2";relationType="one";optional;constructor(e,t,r,n){super(t,r),this.alias=n?.alias,this.where=n?.where,n?.from&&(this.sourceColumns=(Array.isArray(n.from)?n.from:[n.from]).map(s=>(this.throughTable??=s._.through?e[s._.through._.tableName]:void 0,this.sourceColumnTableNames.push(s._.tableName),s._.column))),n?.to&&(this.targetColumns=(Array.isArray(n.to)?n.to:[n.to]).map(s=>(this.throughTable??=s._.through?e[s._.through._.tableName]:void 0,this.targetColumnTableNames.push(s._.tableName),s._.column))),this.throughTable&&(this.through={source:(Array.isArray(n?.from)?n.from:n?.from?[n.from]:[]).map(s=>s._.through),target:(Array.isArray(n?.to)?n.to:n?.to?[n.to]:[]).map(s=>s._.through)}),this.optional=n?.optional??!0}},av=class extends Mc{constructor(e,t,r,n){super(t,r),this.config=n,this.alias=n?.alias,this.where=n?.where,n?.from&&(this.sourceColumns=(Array.isArray(n.from)?n.from:[n.from]).map(s=>(this.throughTable??=s._.through?e[s._.through._.tableName]:void 0,this.sourceColumnTableNames.push(s._.tableName),s._.column))),n?.to&&(this.targetColumns=(Array.isArray(n.to)?n.to:[n.to]).map(s=>(this.throughTable??=s._.through?e[s._.through._.tableName]:void 0,this.targetColumnTableNames.push(s._.tableName),s._.column))),this.throughTable&&(this.through={source:(Array.isArray(n?.from)?n.from:n?.from?[n.from]:[]).map(s=>s._.through),target:(Array.isArray(n?.to)?n.to:n?.to?[n.to]:[]).map(s=>s._.through)})}static[g]="ManyV2";relationType="many"},ov=class{static[g]="AggregatedField";table;onTable(e){return this.table=e,this}},lv=class extends ov{static[g]="AggregatedFieldCount";query;getSQL(){if(!this.query){if(!this.table)throw new Error("Table must be set before building aggregate field");this.query=f`select count(*) as ${f.identifier("r")} from ${Kt(this.table)}`.mapWith(Number)}return this.query}},Wt={and:we,between:Rc,eq:rt,exists:zi,gt:Hn,gte:kc,ilike:zc,inArray:Ac,arrayContains:nv,arrayContained:sv,arrayOverlaps:iv,isNull:Ic,isNotNull:Lc,like:Oc,lt:qc,lte:Nc,ne:Cc,not:Wn,notBetween:Dc,notExists:Qi,notLike:Bc,notIlike:Qc,notInArray:Ec,or:Vn,sql:f},cv={sql:f,asc:yr,desc:Mi};function Ls(e,t,r=a=>a,n=!1,s=!1,i){for(const a of t){if(a.selection){const d=`${i?`${i}.`:""}${a.key}`;if(e[a.key]===null||n&&(e[a.key]=JSON.parse(e[a.key]),e[a.key]===null))continue;if(s&&typeof e[a.key]=="string"&&(e[a.key]=JSON.parse(e[a.key])),a.isArray){for(const u of e[a.key])Ls(u,a.selection,r,!1,s,d);continue}Ls(e[a.key],a.selection,r,!1,s,d);continue}const o=a.field,l=r(e[a.key]);if(l===null)continue;let c;w(o,H)?c=o:w(o,I)?c=o.decoder:w(o,I.Aliased)?c=o.sql.decoder:w(o,E)||w(o,mt)?c=Oi:c=o.getSQL().decoder,e[a.key]="mapFromJsonValue"in c?c.mapFromJsonValue(l):c.mapFromDriverValue(l)}return e}var y0=class{static[g]="RelationsBuilderTable";_;constructor(e,t){this._={name:t,table:e}}},b0=class{static[g]="RelationsBuilderColumn";_;constructor(e,t,r){this._={tableName:t,column:e,key:r}}through(e){return new uv(this._.column,this._.tableName,this._.key,e)}},uv=class{static[g]="RelationsBuilderColumn";_;constructor(e,t,r,n){this._={tableName:t,column:e,through:n,key:r}}},w0=class{static[g]="RelationsHelperStatic";_;constructor(e){this._={tables:e};const t={},r={};for(const[n,s]of Object.entries(e))t[n]=i=>new jc(e,s,n,i),r[n]=i=>new av(e,s,n,i);this.one=t,this.many=r}one;many;aggs={count(){return new lv}}};function Fc(e,t){const r=e[ct][t];return r?w(r,H)?r:w(r,I.Aliased)?f`${e}.${f.identifier(r.fieldAlias)}`:f`${e}.${f.identifier(t)}`:f`${e}.${f.identifier(t)}`}function Kr(e,t){if(typeof t!="object"||w(t,qt))return rt(e,t);const r=Object.entries(t);if(!r.length)return;const n=[];for(const[s,i]of r)if(i!==void 0)switch(s){case"NOT":{const a=Kr(e,i);if(!a)continue;n.push(Wn(a));continue}case"OR":if(!i.length)continue;n.push(Vn(...i.map(a=>Kr(e,a))));continue;case"AND":if(!i.length)continue;n.push(we(...i.map(a=>Kr(e,a))));continue;case"isNotNull":case"isNull":if(!i)continue;n.push(Wt[s](e));continue;case"in":n.push(Wt.inArray(e,i));continue;case"notIn":n.push(Wt.notInArray(e,i));continue;default:n.push(Wt[s](e,i));continue}if(n.length)return we(...n)}function et(e,t,r={},n={},s,i=0){const a=Object.entries(t);if(!a.length)return;const o=[];for(const[l,c]of a)if(c!==void 0)switch(l){case"RAW":{const d=typeof c=="function"?c(e,Wt):c.getSQL();o.push(d);continue}case"OR":if(!c?.length)continue;o.push(Vn(...c.map(d=>et(e,d,r,n,s,i))));continue;case"AND":if(!c?.length)continue;o.push(we(...c.map(d=>et(e,d,r,n,s,i))));continue;case"NOT":{if(c===void 0)continue;const d=et(e,c,r,n,s,i);if(!d)continue;o.push(Wn(d));continue}default:{if(e[ct][l]){const x=Kr(Fc(e,l),c);x&&o.push(x);continue}const d=r[l];if(!d)throw new vr({message:`Unknown relational filter field: "${l}"`});const u=Ue(d.targetTable,`f${i}`),h=d.throughTable?Ue(d.throughTable,`ft${i}`):void 0,p=n[d.targetTableName],{filter:v,joinCondition:y}=Uc(s,d,e,u,h),m=we(v,typeof c=="boolean"?void 0:et(u,c,p.relations,n,s,i+1)),$=h?f`(select * from ${Kt(u)} inner join ${Kt(h)} on ${y}${f` where ${m}`.if(m)} limit 1)`:f`(select * from ${Kt(u)}${f` where ${m}`.if(m)} limit 1)`;m&&o.push((c?zi:Qi)($))}}return we(...o)}function dv(e,t){if(typeof t=="function"){const n=t(e,cv);return w(n,I)?n:Array.isArray(n)?n.length?f.join(n.map(s=>w(s,I)?s:yr(s)),f`, `):void 0:w(n,H)?yr(n):void 0}const r=Object.entries(t).filter(([n,s])=>s);if(r.length)return f.join(r.map(([n,s])=>(s==="asc"?yr:Mi)(Fc(e,n))),f`, `)}function fv(e,t){const r=[],n=[];for(const[s,i]of Object.entries(t)){if(!i)continue;const a=typeof i=="function"?i(e,{sql:Wt.sql}):i,o=f`(${a.getSQL()}) as ${f.identifier(s)}`;o.decoder=a.getSQL().decoder,r.push(o),n.push({key:s,field:o})}return{sql:r.length?f.join(r,f`, `):void 0,selection:n}}function Uc(e,t,r,n,s){if(t.through){const i=t.sourceColumns.map((o,l)=>{const c=t.through.source[l];return rt(f`${r}.${f.identifier(e.getColumnCasing(o))}`,f`${s}.${f.identifier(w(c._.column,H)?e.getColumnCasing(c._.column):c._.key)}`)}),a=t.targetColumns.map((o,l)=>{const c=t.through.target[l];return rt(f`${s}.${f.identifier(w(c._.column,H)?e.getColumnCasing(c._.column):c._.key)}`,f`${n}.${f.identifier(e.getColumnCasing(o))}`)});return{filter:we(t.where?et(t.isReversed?r:n,t.where):void 0,...i),joinCondition:we(...a)}}return{filter:we(...t.sourceColumns.map((i,a)=>{const o=t.targetColumns[a];return rt(f`${r}.${f.identifier(e.getColumnCasing(i))}`,f`${n}.${f.identifier(e.getColumnCasing(o))}`)}),t.where?et(t.isReversed?r:n,t.where):void 0)}}function Kt(e){return f`${e[er]?f`${f`${f.identifier(e[Je]??"")}.`.if(e[Je])}${f.identifier(e[$r])} as ${e}`:e}`}function hv(e,t,r){const n={},s=e.reduce((i,{path:a,field:o},l)=>{let c;w(o,H)?c=o:w(o,I)?c=o.decoder:w(o,ie)?c=o._.sql.decoder:c=o.sql.decoder;let d=i;for(const[u,h]of a.entries())if(u<a.length-1)h in d||(d[h]={}),d=d[h];else{const p=t[l],v=d[h]=p===null?null:c.mapFromDriverValue(p);if(r&&w(o,H)&&a.length===2){const y=a[0];y in n?typeof n[y]=="string"&&n[y]!==Ve(o.table)&&(n[y]=!1):n[y]=v===null?Ve(o.table):!1}}return i},{});if(r&&Object.keys(n).length>0)for(const[i,a]of Object.entries(n))typeof a=="string"&&!r[a]&&(s[i]=null);return s}function Nt(e,t){return Object.entries(e).reduce((r,[n,s])=>{if(typeof n!="string")return r;const i=t?[...t,n]:[n];return w(s,H)||w(s,I)||w(s,I.Aliased)||w(s,ie)?r.push({path:i,field:s}):w(s,E)?r.push(...Nt(s[E.Symbol.Columns],i)):r.push(...Nt(s,i)),r},[])}function ji(e,t){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const[s,i]of r.entries())if(i!==n[s])return!1;return!0}function Vc(e,t){const r=Object.entries(t).filter(([,n])=>n!==void 0).map(([n,s])=>w(s,I)||w(s,H)?[n,s]:[n,new ut(s,e[E.Symbol.Columns][n])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}function pv(e,t){for(const r of t)for(const n of Object.getOwnPropertyNames(r.prototype))n!=="constructor"&&Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)||Object.create(null))}function mv(e){return e[E.Symbol.Columns]}function bt(e){return w(e,ie)?e._.alias:w(e,mt)?e[K].name:w(e,I)?void 0:e[E.Symbol.IsAlias]?e[E.Symbol.Name]:e[E.Symbol.BaseName]}function re(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var S0=typeof TextDecoder>"u"?null:new TextDecoder,Qr=class extends M{static[g]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}},gv=class extends Qr{static[g]="PgBigInt53Builder";constructor(e){super(e,"number int53","PgBigInt53")}build(e){return new $v(e,this.config)}},$v=class extends L{static[g]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},vv=class extends Qr{static[g]="PgBigInt64Builder";constructor(e){super(e,"bigint int64","PgBigInt64")}build(e){return new yv(e,this.config)}},yv=class extends L{static[g]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}},bv=class extends Qr{static[g]="PgBigIntStringBuilder";constructor(e){super(e,"string int64","PgBigIntString")}build(e){return new wv(e,this.config)}},wv=class extends L{static[g]="PgBigIntString";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}};function Sv(e,t){const{name:r,config:n}=re(e,t);return n.mode==="number"?new gv(r):n.mode==="string"?new bv(r):new vv(r)}var xv=class extends M{static[g]="PgBigSerial53Builder";constructor(e){super(e,"number int53","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new _v(e,this.config)}},_v=class extends L{static[g]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},Pv=class extends M{static[g]="PgBigSerial64Builder";constructor(e){super(e,"bigint int64","PgBigSerial64"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Tv(e,this.config)}},Tv=class extends L{static[g]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function Cv(e,t){const{name:r,config:n}=re(e,t);return n.mode==="number"?new xv(r):new Pv(r)}var kv=class extends M{static[g]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new qv(e,this.config)}},qv=class extends L{static[g]="PgBoolean";getSQLType(){return"boolean"}};function Nv(e){return new kv(e??"")}var Av=class extends M{static[g]="PgCharBuilder";constructor(e,t){super(e,t.enum?.length?"string enum":"string","PgChar"),this.config.length=t.length??1,this.config.setLength=t.length!==void 0,this.config.enumValues=t.enum}build(e){return new Ev(e,this.config)}},Ev=class extends L{static[g]="PgChar";enumValues=this.config.enumValues;getSQLType(){return this.config.setLength?`char(${this.length})`:"char"}};function Iv(e,t={}){const{name:r,config:n}=re(e,t);return new Av(r,n)}var Lv=class extends M{static[g]="PgCidrBuilder";constructor(e){super(e,"string cidr","PgCidr")}build(e){return new Rv(e,this.config)}},Rv=class extends L{static[g]="PgCidr";getSQLType(){return"cidr"}};function Dv(e){return new Lv(e??"")}var Ov=class extends M{static[g]="PgCustomColumnBuilder";constructor(e,t,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new Bv(e,this.config)}},Bv=class extends L{static[g]="PgCustomColumn";sqlName;mapTo;mapFrom;mapJson;forJsonSelect;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver,this.mapJson=t.customTypeParams.fromJson,this.forJsonSelect=t.customTypeParams.forJsonSelect}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapFromJsonValue(e){return typeof this.mapJson=="function"?this.mapJson(e):this.mapFromDriverValue(e)}jsonSelectIdentifier(e,t,r){if(typeof this.forJsonSelect=="function")return this.forJsonSelect(e,t,r);const n=this.getSQLType().toLowerCase(),s=n.indexOf("(");switch(s+1?n.slice(0,s):n){case"bytea":case"geometry":case"timestamp":case"numeric":case"bigint":{const i="[]".repeat(r??0);return t`${e}::text${t.raw(i).if(r)}`}default:return e}}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function zv(e){return(t,r)=>{const{name:n,config:s}=re(t,r);return new Ov(n,s,e)}}var Mr=class extends M{static[g]="PgDateColumnBaseBuilder";defaultNow(){return this.default(f`now()`)}},Qv=class extends Mr{static[g]="PgDateBuilder";constructor(e){super(e,"object date","PgDate")}build(e){return new Wc(e,this.config)}},Wc=class extends L{static[g]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return typeof e=="string"?new Date(e):e}mapToDriverValue(e){return typeof e=="string"?e:e.toISOString()}},Mv=class extends Mr{static[g]="PgDateStringBuilder";constructor(e){super(e,"string date","PgDateString")}build(e){return new Hc(e,this.config)}},Hc=class extends L{static[g]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(e){return typeof e=="string"?e:e.toISOString().slice(0,-14)}mapToDriverValue(e){return typeof e=="string"?e:e.toISOString()}};function jv(e,t){const{name:r,config:n}=re(e,t);return n?.mode==="date"?new Qv(r):new Mv(r)}var Fv=class extends M{static[g]="PgDoublePrecisionBuilder";constructor(e){super(e,"number double","PgDoublePrecision")}build(e){return new Uv(e,this.config)}},Uv=class extends L{static[g]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function Vv(e){return new Fv(e??"")}var Wv=class extends M{static[g]="PgInetBuilder";constructor(e){super(e,"string inet","PgInet")}build(e){return new Hv(e,this.config)}},Hv=class extends L{static[g]="PgInet";getSQLType(){return"inet"}};function Jv(e){return new Wv(e??"")}var Kv=class extends Qr{static[g]="PgIntegerBuilder";constructor(e){super(e,"number int32","PgInteger")}build(e){return new Gv(e,this.config)}},Gv=class extends L{static[g]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function Yv(e){return new Kv(e??"")}var Xv=class extends M{static[g]="PgIntervalBuilder";constructor(e,t){super(e,"string interval","PgInterval"),this.config.intervalConfig=t}build(e){return new Zv(e,this.config)}},Zv=class extends L{static[g]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){return`interval${this.fields?` ${this.fields}`:""}${this.precision?`(${this.precision})`:""}`}};function ey(e,t={}){const{name:r,config:n}=re(e,t);return new Xv(r,n)}var ty=class extends M{static[g]="PgJsonBuilder";constructor(e){super(e,"object json","PgJson")}build(e){return new Jc(e,this.config)}},Jc=class extends L{static[g]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function ry(e){return new ty(e??"")}var ny=class extends M{static[g]="PgJsonbBuilder";constructor(e){super(e,"object json","PgJsonb")}build(e){return new Kc(e,this.config)}},Kc=class extends L{static[g]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function sy(e){return new ny(e??"")}var iy=class extends M{static[g]="PgLineBuilder";constructor(e){super(e,"array line","PgLine")}build(e){return new ay(e,this.config)}},ay=class extends L{static[g]="PgLine";mode="tuple";getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r),Number.parseFloat(n)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},oy=class extends M{static[g]="PgLineABCBuilder";constructor(e){super(e,"object line","PgLineABC")}build(e){return new ly(e,this.config)}},ly=class extends L{static[g]="PgLineABC";mode="abc";getSQLType(){return"line"}mapFromDriverValue(e){const[t,r,n]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(r),c:Number.parseFloat(n)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function cy(e,t){const{name:r,config:n}=re(e,t);return!n?.mode||n.mode==="tuple"?new iy(r):new oy(r)}var uy=class extends M{static[g]="PgMacaddrBuilder";constructor(e){super(e,"string macaddr","PgMacaddr")}build(e){return new dy(e,this.config)}},dy=class extends L{static[g]="PgMacaddr";getSQLType(){return"macaddr"}};function fy(e){return new uy(e??"")}var hy=class extends M{static[g]="PgMacaddr8Builder";constructor(e){super(e,"string macaddr8","PgMacaddr8")}build(e){return new py(e,this.config)}},py=class extends L{static[g]="PgMacaddr8";getSQLType(){return"macaddr8"}};function my(e){return new hy(e??"")}var gy=class extends M{static[g]="PgNumericBuilder";constructor(e,t,r){super(e,"string numeric","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new Gc(e,this.config)}},Gc=class extends L{static[g]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},$y=class extends M{static[g]="PgNumericNumberBuilder";constructor(e,t,r){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=r}build(e){return new vy(e,this.config)}},vy=class extends L{static[g]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},yy=class extends M{static[g]="PgNumericBigIntBuilder";constructor(e,t,r){super(e,"bigint int64","PgNumericBigInt"),this.config.precision=t,this.config.scale=r}build(e){return new by(e,this.config)}},by=class extends L{static[g]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function wy(e,t){const{name:r,config:n}=re(e,t),s=n?.mode;return s==="number"?new $y(r,n?.precision,n?.scale):s==="bigint"?new yy(r,n?.precision,n?.scale):new gy(r,n?.precision,n?.scale)}var Sy=class extends M{static[g]="PgPointTupleBuilder";constructor(e){super(e,"array point","PgPointTuple")}build(e){return new xy(e,this.config)}},xy=class extends L{static[g]="PgPointTuple";mode="tuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},_y=class extends M{static[g]="PgPointObjectBuilder";constructor(e){super(e,"object point","PgPointObject")}build(e){return new Py(e,this.config)}},Py=class extends L{static[g]="PgPointObject";mode="xy";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function Ty(e,t){const{name:r,config:n}=re(e,t);return!n?.mode||n.mode==="tuple"?new Sy(r):new _y(r)}function Cy(e){const t=[];for(let r=0;r<e.length;r+=2)t.push(Number.parseInt(e.slice(r,r+2),16));return new Uint8Array(t)}function Ma(e,t){const r=new ArrayBuffer(8),n=new DataView(r);for(let s=0;s<8;s++)n.setUint8(s,e[t+s]);return n.getFloat64(0,!0)}function Yc(e){const t=Cy(e);let r=0;const n=t[r];r+=1;const s=new DataView(t.buffer),i=s.getUint32(r,n===1);r+=4;let a;if(i&536870912&&(a=s.getUint32(r,n===1),r+=4),(i&65535)===1){const o=Ma(t,r);r+=8;const l=Ma(t,r);return r+=8,{srid:a,point:[o,l]}}throw new Error("Unsupported geometry type")}var ky=class extends M{static[g]="PgGeometryBuilder";constructor(e,t){super(e,"array geometry","PgGeometry"),this.config.srid=t}build(e){return new qy(e,this.config)}},qy=class extends L{static[g]="PgGeometry";srid=this.config.srid;mode="tuple";getSQLType(){return`geometry(point${this.srid===void 0?"":`,${this.srid}`})`}mapFromDriverValue(e){return typeof e!="string"?e:Yc(e).point}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},Ny=class extends M{static[g]="PgGeometryObjectBuilder";constructor(e,t){super(e,"object geometry","PgGeometryObject"),this.config.srid=t}build(e){return new Ay(e,this.config)}},Ay=class extends L{static[g]="PgGeometryObject";srid=this.config.srid;mode="object";getSQLType(){return`geometry(point${this.srid===void 0?"":`,${this.srid}`})`}mapFromDriverValue(e){const t=Yc(e);return{x:t.point[0],y:t.point[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function Ey(e,t){const{name:r,config:n}=re(e,t);return!n?.mode||n.mode==="tuple"?new ky(r,n?.srid):new Ny(r,n?.srid)}var Iy=class extends M{static[g]="PgRealBuilder";constructor(e,t){super(e,"number float","PgReal"),this.config.length=t}build(e){return new Ly(e,this.config)}},Ly=class extends L{static[g]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function Ry(e){return new Iy(e??"")}var Dy=class extends M{static[g]="PgSerialBuilder";constructor(e){super(e,"number int32","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Oy(e,this.config)}},Oy=class extends L{static[g]="PgSerial";getSQLType(){return"serial"}};function By(e){return new Dy(e??"")}var zy=class extends Qr{static[g]="PgSmallIntBuilder";constructor(e){super(e,"number int16","PgSmallInt")}build(e){return new Qy(e,this.config)}},Qy=class extends L{static[g]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function My(e){return new zy(e??"")}var jy=class extends M{static[g]="PgSmallSerialBuilder";constructor(e){super(e,"number int16","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Fy(e,this.config)}},Fy=class extends L{static[g]="PgSmallSerial";getSQLType(){return"smallserial"}};function Uy(e){return new jy(e??"")}var Vy=class extends M{static[g]="PgTextBuilder";constructor(e,t){super(e,t.enum?.length?"string enum":"string","PgText"),this.config.enumValues=t.enum}build(e){return new Wy(e,this.config,this.config.enumValues)}},Wy=class extends L{static[g]="PgText";enumValues;constructor(e,t,r){super(e,t),this.enumValues=r}getSQLType(){return"text"}};function Hy(e,t={}){const{name:r,config:n}=re(e,t);return new Vy(r,n)}var Jy=class extends Mr{constructor(e,t,r){super(e,"string time","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}static[g]="PgTimeBuilder";build(e){return new Xc(e,this.config)}},Xc=class extends L{static[g]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function Ky(e,t={}){const{name:r,config:n}=re(e,t);return new Jy(r,n.withTimezone??!1,n.precision)}var Gy=class extends Mr{static[g]="PgTimestampBuilder";constructor(e,t,r){super(e,"object date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new Zc(e,this.config)}},Zc=class extends L{static[g]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){return typeof e=="string"?new Date(this.withTimezone?e:e+"+0000"):e}mapToDriverValue(e){return typeof e=="string"?e:e.toISOString()}},Yy=class extends Mr{static[g]="PgTimestampStringBuilder";constructor(e,t,r){super(e,"string timestamp","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new eu(e,this.config)}},eu=class extends L{static[g]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){if(typeof e=="string")return e;const t=e.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){const r=e.getTimezoneOffset();return`${t}${r<=0?"+":"-"}${Math.floor(Math.abs(r)/60).toString().padStart(2,"0")}`}return t}mapToDriverValue(e){return typeof e=="string"?e:e.toISOString()}};function Xy(e,t={}){const{name:r,config:n}=re(e,t);return n?.mode==="string"?new Yy(r,n.withTimezone??!1,n.precision):new Gy(r,n?.withTimezone??!1,n?.precision)}var Zy=class extends M{static[g]="PgUUIDBuilder";constructor(e){super(e,"string uuid","PgUUID")}defaultRandom(){return this.default(f`gen_random_uuid()`)}build(e){return new tu(e,this.config)}},tu=class extends L{static[g]="PgUUID";getSQLType(){return"uuid"}};function eb(e){return new Zy(e??"")}var tb=class extends M{static[g]="PgVarcharBuilder";constructor(e,t){super(e,t.enum?.length?"string enum":"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new rb(e,this.config)}},rb=class extends L{static[g]="PgVarchar";enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function nb(e,t={}){const{name:r,config:n}=re(e,t);return new tb(r,n)}var sb=class extends M{static[g]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string binary","PgBinaryVector"),this.config.length=t.dimensions,this.config.isLengthExact=!0}build(e){return new ib(e,this.config)}},ib=class extends L{static[g]="PgBinaryVector";getSQLType(){return`bit(${this.length})`}};function ab(e,t){const{name:r,config:n}=re(e,t);return new sb(r,n)}var ob=class extends M{static[g]="PgHalfVectorBuilder";constructor(e,t){super(e,"array halfvector","PgHalfVector"),this.config.length=t.dimensions,this.config.isLengthExact=!0}build(e){return new lb(e,this.config)}},lb=class extends L{static[g]="PgHalfVector";getSQLType(){return`halfvec(${this.length})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function cb(e,t){const{name:r,config:n}=re(e,t);return new ob(r,n)}var ub=class extends M{static[g]="PgSparseVectorBuilder";constructor(e,t){super(e,"string sparsevec","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new db(e,this.config)}},db=class extends L{static[g]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function fb(e,t){const{name:r,config:n}=re(e,t);return new ub(r,n)}var hb=class extends M{static[g]="PgVectorBuilder";constructor(e,t){super(e,"array vector","PgVector"),this.config.length=t.dimensions,this.config.isLengthExact=!0}build(e){return new pb(e,this.config)}},pb=class extends L{static[g]="PgVector";getSQLType(){return`vector(${this.length})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function mb(e,t){const{name:r,config:n}=re(e,t);return new hb(r,n)}function gb(){return{bigint:Sv,bigserial:Cv,boolean:Nv,char:Iv,cidr:Dv,customType:zv,date:jv,doublePrecision:Vv,inet:Jv,integer:Yv,interval:ey,json:ry,jsonb:sy,line:cy,macaddr:fy,macaddr8:my,numeric:wy,point:Ty,geometry:Ey,real:Ry,serial:By,smallint:My,smallserial:Uy,text:Hy,time:Ky,timestamp:Xy,uuid:eb,varchar:nb,bit:ab,halfvec:cb,sparsevec:fb,vector:mb}}var Rs=Symbol.for("drizzle:PgInlineForeignKeys"),Ds=Symbol.for("drizzle:EnableRLS"),fe=class extends E{static[g]="PgTable";static Symbol=Object.assign({},E.Symbol,{InlineForeignKeys:Rs,EnableRLS:Ds});[Rs]=[];[Ds]=!1;[E.Symbol.ExtraConfigBuilder]=void 0;[E.Symbol.ExtraConfigColumns]={}};function ru(e,t,r,n,s=e){const i=new fe(e,n,s),a=typeof t=="function"?t(gb()):t,o=Object.fromEntries(Object.entries(a).map(([d,u])=>{const h=u;h.setName(d);const p=h.build(i);return i[Rs].push(...h.buildForeignKeys(p,i)),[d,p]})),l=Object.fromEntries(Object.entries(a).map(([d,u])=>{const h=u;return h.setName(d),[d,h.buildExtraConfigColumn(i)]})),c=Object.assign(i,o);return c[E.Symbol.Columns]=o,c[E.Symbol.ExtraConfigColumns]=l,r&&(c[fe.Symbol.ExtraConfigBuilder]=r),Object.assign(c,{enableRLS:()=>(c[fe.Symbol.EnableRLS]=!0,c)})}var $b=(e,t,r)=>ru(e,t,r,void 0),vb=(e,t,r)=>{const n=ru(e,t,r,void 0);return n[Ds]=!0,n},x0=Object.assign($b,{withRLS:vb}),yb=class{static[g]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new bb(e,this.columns,this.name)}},bb=class{constructor(e,t,r){this.table=e,this.columns=t,this.name=r,this.isNameExplicit=!!r}static[g]="PgPrimaryKey";columns;name;isNameExplicit;getName(){return this.name??`${this.table[fe.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}},nu=class{constructor(e,t,r){this.sourceTable=e,this.referencedTable=t,this.relationName=r,this.referencedTableName=t[E.Symbol.Name]}static[g]="Relation";referencedTableName;fieldName},wb=class{constructor(e,t){this.table=e,this.config=t}static[g]="Relations"},Cr=class su extends nu{constructor(t,r,n,s){super(t,r,n?.relationName),this.config=n,this.isNullable=s}static[g]="One";withFieldName(t){const r=new su(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=t,r}},iu=class au extends nu{constructor(t,r,n){super(t,r,n?.relationName),this.config=n}static[g]="Many";withFieldName(t){const r=new au(this.sourceTable,this.referencedTable,this.config);return r.fieldName=t,r}};function Sb(){return{and:we,between:Rc,eq:rt,exists:zi,gt:Hn,gte:kc,ilike:zc,inArray:Ac,isNull:Ic,isNotNull:Lc,like:Oc,lt:qc,lte:Nc,ne:Cc,not:Wn,notBetween:Dc,notExists:Qi,notLike:Bc,notIlike:Qc,notInArray:Ec,or:Vn,sql:f}}function xb(){return{sql:f,asc:yr,desc:Mi}}function _b(e,t){Object.keys(e).length===1&&"default"in e&&!w(e.default,E)&&(e=e.default);const r={},n={},s={};for(const[i,a]of Object.entries(e))if(w(a,E)){const o=Tr(a),l=n[o];r[o]=i,s[i]={tsName:i,dbName:a[E.Symbol.Name],schema:a[E.Symbol.Schema],columns:a[E.Symbol.Columns],relations:l?.relations??{},primaryKey:l?.primaryKey??[]};for(const d of Object.values(a[E.Symbol.Columns]))d.primary&&s[i].primaryKey.push(d);const c=a[E.Symbol.ExtraConfigBuilder]?.(a[E.Symbol.ExtraConfigColumns]);if(c)for(const d of Object.values(c))w(d,yb)&&s[i].primaryKey.push(...d.columns)}else if(w(a,wb)){const o=Tr(a.table),l=r[o],c=a.config(t(a.table));for(const[d,u]of Object.entries(c))if(l){const h=s[l];h.relations[d]=u}else o in n||(n[o]={relations:{}}),n[o].relations[d]=u}return{tables:s,tableNamesMap:r}}function Pb(e){return function(r,n){return new Cr(e,r,n,n?.fields.reduce((s,i)=>s&&i.notNull,!0)??!1)}}function Tb(e){return function(r,n){return new iu(e,r,n)}}function Cb(e,t,r){if(w(r,Cr)&&r.config)return{fields:r.config.fields,references:r.config.references};const n=t[Tr(r.referencedTable)];if(!n)throw new Error(`Table "${r.referencedTable[E.Symbol.Name]}" not found in schema`);const s=e[n];if(!s)throw new Error(`Table "${n}" not found in schema`);const i=r.sourceTable,a=t[Tr(i)];if(!a)throw new Error(`Table "${i[E.Symbol.Name]}" not found in schema`);const o=[];for(const l of Object.values(s.relations))(r.relationName&&r!==l&&l.relationName===r.relationName||!r.relationName&&l.referencedTable===r.sourceTable)&&o.push(l);if(o.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${r.sourceTable[E.Symbol.Name]}". Please specify relation name`);if(o[0]&&w(o[0],Cr)&&o[0].config)return{fields:o[0].config.references,references:o[0].config.fields};throw new Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}function kb(e){return{one:Pb(e),many:Tb(e)}}function Os(e,t,r,n,s=i=>i){const i={};for(const[a,o]of n.entries())if(o.isJson){const l=t.relations[o.tsKey],c=r[a],d=typeof c=="string"?JSON.parse(c):c;i[o.tsKey]=w(l,Cr)?d&&Os(e,e[o.relationTableTsKey],d,o.selection,s):d.map(u=>Os(e,e[o.relationTableTsKey],u,o.selection,s))}else{const l=s(r[a]),c=o.field;let d;w(c,H)?d=c:w(c,I)?d=c.decoder:d=c.sql.decoder,i[o.tsKey]=l===null?null:d.mapFromDriverValue(l)}return i}var he=class ou{static[g]="SelectionProxyHandler";config;constructor(t){this.config={...t}}get(t,r){if(r==="_")return{...t._,selectedFields:new Proxy(t._.selectedFields,this)};if(r===K)return{...t[K],selectedFields:new Proxy(t[K].selectedFields,this)};if(typeof r=="symbol")return t[r];const n=(w(t,ie)?t._.selectedFields:w(t,mt)?t[K].selectedFields:t)[r];if(w(n,I.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!n.isSelectionField)return n.sql;const s=n.clone();return s.isSelectionField=!0,s}if(w(n,I)){if(this.config.sqlBehavior==="sql")return n;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return w(n,H)?this.config.alias?new Proxy(n,new wn(new Proxy(n.table,new Bi(this.config.alias,this.config.replaceOriginalName??!1,!0)),!0)):n:typeof n!="object"||n===null?n:new Proxy(n,new ou(this.config))}};function St(e){return w(e,fe)?[e[Je]?`${e[Je]}.${e[E.Symbol.BaseName]}`:e[E.Symbol.BaseName]]:w(e,ie)?e._.usedTables??[]:w(e,I)?e.usedTables??[]:[]}var ja=class extends gt{constructor(e,t,r,n){super(),this.session=t,this.dialect=r,this.config={table:e,withList:n}}static[g]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[E.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Nt(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return J.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:St(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>J.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new he({alias:Ve(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};function qb(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(t=>t.toLowerCase()).join("_")}function Nb(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((t,r,n)=>t+(n===0?r.toLowerCase():`${r[0].toUpperCase()}${r.slice(1)}`),"")}function Ab(e){return e}var Eb=class{static[g]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?qb:e==="camelCase"?Nb:Ab}getColumnCasing(e){if(!e.keyAsName)return e.name;const t=`${e.table[E.Symbol.Schema]??"public"}.${e.table[E.Symbol.OriginalName]}.${e.name}`;return this.cache[t]||this.cacheTable(e.table),this.cache[t]}cacheTable(e){const t=`${e[E.Symbol.Schema]??"public"}.${e[E.Symbol.OriginalName]}`;if(!this.cachedTables[t]){for(const r of Object.values(e[E.Symbol.Columns])){if(!w(r,H))continue;const n=`${t}.${r.name}`;this.cache[n]=this.convert(r.name)}this.cachedTables[t]=!0}}clearCache(){this.cache={},this.cachedTables={}}},lu=class extends mt{static[g]="PgViewBase"},Gr=class{static[g]="PgDialect";casing;constructor(e){this.casing=new Eb(e?.casing)}async migrate(e,t,r){const n=typeof r=="string"?"__drizzle_migrations":r.migrationsTable??"__drizzle_migrations",s=typeof r=="string"?"drizzle":r.migrationsSchema??"drizzle",i=f`
			CREATE TABLE IF NOT EXISTS ${f.identifier(s)}.${f.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(f`CREATE SCHEMA IF NOT EXISTS ${f.identifier(s)}`),await t.execute(i);const a=await t.all(f`select id, hash, created_at from ${f.identifier(s)}.${f.identifier(n)} order by created_at desc limit 1`);if(typeof r=="object"&&r.init){if(a.length)return{exitCode:"databaseMigrations"};if(e.length>1)return{exitCode:"localMigrations"};const[l]=e;if(!l)return;await t.execute(f`insert into ${f.identifier(s)}.${f.identifier(n)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`);return}const o=a[0];await t.transaction(async l=>{for await(const c of e)if(!o||Number(o.created_at)<c.folderMillis){for(const d of c.sql)await l.execute(f.raw(d));await l.execute(f`insert into ${f.identifier(s)}.${f.identifier(n)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;const t=[f`with `];for(const[r,n]of e.entries())t.push(f`${f.identifier(n._.alias)} as (${n._.sql})`),r<e.length-1&&t.push(f`, `);return t.push(f` `),f.join(t)}buildDeleteQuery({table:e,where:t,returning:r,withList:n}){const s=this.buildWithCTE(n),i=r?f` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0;return f`${s}delete from ${e}${t?f` where ${t}`:void 0}${i}`}buildUpdateSet(e,t){const r=e[E.Symbol.Columns],n=Object.keys(r).filter(i=>t[i]!==void 0||r[i]?.onUpdateFn!==void 0),s=n.length;return f.join(n.flatMap((i,a)=>{const o=r[i],l=o.onUpdateFn?.(),c=t[i]??(w(l,I)?l:f.param(l,o)),d=f`${f.identifier(this.casing.getColumnCasing(o))} = ${c}`;return a<s-1?[d,f.raw(", ")]:[d]}))}buildUpdateQuery({table:e,set:t,where:r,returning:n,withList:s,from:i,joins:a}){const o=this.buildWithCTE(s),l=e[fe.Symbol.Name],c=e[fe.Symbol.Schema],d=e[fe.Symbol.OriginalName],u=l===d?void 0:l,h=f`${c?f`${f.identifier(c)}.`:void 0}${f.identifier(d)}${u&&f` ${f.identifier(u)}`}`,p=this.buildUpdateSet(e,t),v=i&&f.join([f.raw(" from "),this.buildFromTable(i)]),y=this.buildJoins(a),m=n?f` returning ${this.buildSelection(n,{isSingleTable:!i})}`:void 0;return f`${o}update ${h} set ${p}${v}${y}${r?f` where ${r}`:void 0}${m}`}buildSelection(e,{isSingleTable:t=!1}={}){const r=e.length,n=e.flatMap(({field:s},i)=>{const a=[];if(w(s,I.Aliased)&&s.isSelectionField)a.push(f.identifier(s.fieldAlias));else if(w(s,I.Aliased)||w(s,I)){const o=w(s,I.Aliased)?s.sql:s;t?a.push(new I(o.queryChunks.map(l=>w(l,L)?f.identifier(this.casing.getColumnCasing(l)):l))):a.push(o),w(s,I.Aliased)&&a.push(f` as ${f.identifier(s.fieldAlias)}`)}else if(w(s,H))t?a.push(s.isAlias?f`${f.identifier(this.casing.getColumnCasing(Qa(s)))} as ${s}`:f.identifier(this.casing.getColumnCasing(s))):a.push(s.isAlias?f`${Qa(s)} as ${s}`:s);else if(w(s,ie)){const o=Object.entries(s._.selectedFields);if(o.length===1){const l=o[0][1],c=w(l,I)?l.decoder:w(l,H)?{mapFromDriverValue:d=>l.mapFromDriverValue(d)}:l.sql.decoder;c&&(s._.sql.decoder=c)}a.push(s)}return i<r-1&&a.push(f`, `),a});return f.join(n)}buildJoins(e){if(!e||e.length===0)return;const t=[];for(const[r,n]of e.entries()){r===0&&t.push(f` `);const s=n.table,i=n.lateral?f` lateral`:void 0,a=n.on?f` on ${n.on}`:void 0;if(w(s,fe)){const o=s[fe.Symbol.Name],l=s[fe.Symbol.Schema],c=s[fe.Symbol.OriginalName],d=o===c?void 0:n.alias;t.push(f`${f.raw(n.joinType)} join${i} ${l?f`${f.identifier(l)}.`:void 0}${f.identifier(c)}${d&&f` ${f.identifier(d)}`}${a}`)}else if(w(s,mt)){const o=s[K].name,l=s[K].schema,c=s[K].originalName,d=o===c?void 0:n.alias;t.push(f`${f.raw(n.joinType)} join${i} ${l?f`${f.identifier(l)}.`:void 0}${f.identifier(c)}${d&&f` ${f.identifier(d)}`}${a}`)}else t.push(f`${f.raw(n.joinType)} join${i} ${s}${a}`);r<e.length-1&&t.push(f` `)}return f.join(t)}buildFromTable(e){if(w(e,E)&&e[E.Symbol.IsAlias]){let t=f`${f.identifier(e[E.Symbol.OriginalName])}`;return e[E.Symbol.Schema]&&(t=f`${f.identifier(e[E.Symbol.Schema])}.${t}`),f`${t} ${f.identifier(e[E.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:n,having:s,table:i,joins:a,orderBy:o,groupBy:l,limit:c,offset:d,lockingClause:u,distinct:h,setOperators:p}){const v=r??Nt(t);for(const q of v)if(w(q.field,H)&&Ve(q.field.table)!==(w(i,ie)?i._.alias:w(i,lu)?i[K].name:w(i,I)?void 0:Ve(i))&&!(R=>a?.some(({alias:U})=>U===(R[E.Symbol.IsAlias]?Ve(R):R[E.Symbol.BaseName])))(q.field.table)){const R=Ve(q.field.table);throw new Error(`Your "${q.path.join("->")}" field references a column "${R}"."${q.field.name}", but the table "${R}" is not part of the query! Did you forget to join it?`)}const y=!a||a.length===0,m=this.buildWithCTE(e);let $;h&&($=h===!0?f` distinct`:f` distinct on (${f.join(h.on,f`, `)})`);const x=this.buildSelection(v,{isSingleTable:y}),b=this.buildFromTable(i),T=this.buildJoins(a),k=n?f` where ${n}`:void 0,S=s?f` having ${s}`:void 0;let _;o&&o.length>0&&(_=f` order by ${f.join(o,f`, `)}`);let A;l&&l.length>0&&(A=f` group by ${f.join(l,f`, `)}`);const O=typeof c=="object"||typeof c=="number"&&c>=0?f` limit ${c}`:void 0,B=d?f` offset ${d}`:void 0,Q=f.empty();if(u){const q=f` for ${f.raw(u.strength)}`;u.config.of&&q.append(f` of ${f.join(Array.isArray(u.config.of)?u.config.of:[u.config.of],f`, `)}`),u.config.noWait?q.append(f` nowait`):u.config.skipLocked&&q.append(f` skip locked`),Q.append(q)}const C=f`${m}select${$} ${x} from ${b}${T}${k}${A}${S}${_}${O}${B}${Q}`;return p.length>0?this.buildSetOperations(C,p):C}buildSetOperations(e,t){const[r,...n]=t;if(!r)throw new Error("Cannot pass undefined values to any set operator");return n.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:r,rightSelect:n,limit:s,orderBy:i,offset:a}}){const o=f`(${e.getSQL()}) `,l=f`(${n.getSQL()})`;let c;if(i&&i.length>0){const p=[];for(const v of i)if(w(v,L))p.push(f.identifier(v.name));else if(w(v,I)){for(let y=0;y<v.queryChunks.length;y++){const m=v.queryChunks[y];w(m,L)&&(v.queryChunks[y]=f.identifier(m.name))}p.push(f`${v}`)}else p.push(f`${v}`);c=f` order by ${f.join(p,f`, `)} `}const d=typeof s=="object"||typeof s=="number"&&s>=0?f` limit ${s}`:void 0,u=f.raw(`${t} ${r?"all ":""}`),h=a?f` offset ${a}`:void 0;return f`${o}${u}${l}${c}${d}${h}`}buildInsertQuery({table:e,values:t,onConflict:r,returning:n,withList:s,select:i,overridingSystemValue_:a}){const o=[],l=e[E.Symbol.Columns],c=Object.entries(l).filter(([y,m])=>!m.shouldDisableInsert()),d=c.map(([,y])=>f.identifier(this.casing.getColumnCasing(y)));if(i){const y=t;w(y,I)?o.push(y):o.push(y.getSQL())}else{const y=t;o.push(f.raw("values "));for(const[m,$]of y.entries()){const x=[];for(const[b,T]of c){const k=$[b];if(k===void 0||w(k,ut)&&k.value===void 0)if(T.defaultFn!==void 0){const S=T.defaultFn(),_=w(S,I)?S:f.param(S,T);x.push(_)}else if(!T.default&&T.onUpdateFn!==void 0){const S=T.onUpdateFn(),_=w(S,I)?S:f.param(S,T);x.push(_)}else x.push(f`default`);else x.push(k)}o.push(x),m<y.length-1&&o.push(f`, `)}}const u=this.buildWithCTE(s),h=f.join(o),p=n?f` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,v=r?f` on conflict ${r}`:void 0;return f`${u}insert into ${e} ${d} ${a===!0?f`overriding system value `:void 0}${h}${v}${p}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:r}){return f`refresh materialized view${t?f` concurrently`:void 0} ${e}${r?f` with no data`:void 0}`}prepareTyping(e){return w(e,Kc)||w(e,Jc)?"json":w(e,Gc)?"decimal":w(e,Xc)?"time":w(e,Zc)||w(e,eu)?"timestamp":w(e,Wc)||w(e,Hc)?"date":w(e,tu)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}_buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:s,queryConfig:i,tableAlias:a,nestedQueryRelation:o,joinOn:l}){let c=[],d,u,h=[],p;const v=[];if(i===!0)c=Object.entries(s.columns).map(([m,$])=>({dbKey:$.name,tsKey:m,field:je($,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{const m=Object.fromEntries(Object.entries(s.columns).map(([S,_])=>[S,je(_,a)]));if(i.where){const S=typeof i.where=="function"?i.where(m,Sb()):i.where;p=S&&Sn(S,a)}const $=[];let x=[];if(i.columns){let S=!1;for(const[_,A]of Object.entries(i.columns))A!==void 0&&_ in s.columns&&(!S&&A===!0&&(S=!0),x.push(_));x.length>0&&(x=S?x.filter(_=>i.columns?.[_]===!0):Object.keys(s.columns).filter(_=>!x.includes(_)))}else x=Object.keys(s.columns);for(const S of x){const _=s.columns[S];$.push({tsKey:S,value:_})}let b=[];i.with&&(b=Object.entries(i.with).filter(S=>!!S[1]).map(([S,_])=>({tsKey:S,queryConfig:_,relation:s.relations[S]})));let T;if(i.extras){T=typeof i.extras=="function"?i.extras(m,{sql:f}):i.extras;for(const[S,_]of Object.entries(T))$.push({tsKey:S,value:Pc(_,a)})}for(const{tsKey:S,value:_}of $)c.push({dbKey:w(_,I.Aliased)?_.fieldAlias:s.columns[S].name,tsKey:S,field:w(_,H)?je(_,a):_,relationTableTsKey:void 0,isJson:!1,selection:[]});let k=typeof i.orderBy=="function"?i.orderBy(m,xb()):i.orderBy??[];Array.isArray(k)||(k=[k]),h=k.map(S=>w(S,H)?je(S,a):Sn(S,a)),d=i.limit,u=i.offset;for(const{tsKey:S,queryConfig:_,relation:A}of b){const O=Cb(t,r,A),B=r[Tr(A.referencedTable)],Q=`${a}_${S}`,C=we(...O.fields.map((U,Z)=>rt(je(O.references[Z],Q),je(U,a)))),q=this._buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:e[B],tableConfig:t[B],queryConfig:w(A,Cr)?_===!0?{limit:1}:{..._,limit:1}:_,tableAlias:Q,joinOn:C,nestedQueryRelation:A}),R=f`${f.identifier(Q)}.${f.identifier("data")}`.as(S);v.push({on:f`true`,table:new ie(q.sql,{},Q),alias:Q,joinType:"left",lateral:!0}),c.push({dbKey:S,tsKey:S,field:R,relationTableTsKey:B,isJson:!0,selection:q.selection})}}if(c.length===0)throw new vr({message:`No fields selected for table "${s.tsName}" ("${a}")`});let y;if(p=we(l,p),o){let m=f`json_build_array(${f.join(c.map(({field:x,tsKey:b,isJson:T})=>T?f`${f.identifier(`${a}_${b}`)}.${f.identifier("data")}`:w(x,I.Aliased)?x.sql:x),f`, `)})`;w(o,iu)&&(m=f`coalesce(json_agg(${m}${h.length>0?f` order by ${f.join(h,f`, `)}`:void 0}), '[]'::json)`);const $=[{dbKey:"data",tsKey:"data",field:m.as("data"),isJson:!0,relationTableTsKey:s.tsName,selection:c}];d!==void 0||u!==void 0||h.length>0?(y=this.buildSelectQuery({table:Ue(n,a),fields:{},fieldsFlat:[{path:[],field:f.raw("*")}],where:p,limit:d,offset:u,orderBy:h,setOperators:[]}),p=void 0,d=void 0,u=void 0,h=[]):y=Ue(n,a),y=this.buildSelectQuery({table:w(y,fe)?y:new ie(y,{},a),fields:{},fieldsFlat:$.map(({field:x})=>({path:[],field:w(x,H)?je(x,a):x})),joins:v,where:p,limit:d,offset:u,orderBy:h,setOperators:[]})}else y=this.buildSelectQuery({table:Ue(n,a),fields:{},fieldsFlat:c.map(({field:m})=>({path:[],field:w(m,H)?je(m,a):m})),joins:v,where:p,limit:d,offset:u,orderBy:h,setOperators:[]});return{tableTsKey:s.tsName,sql:y,selection:c}}nestedSelectionerror(){throw new vr({message:"Views with nested selections are not supported by the relational query builder"})}buildRqbColumn(e,t,r){if(w(t,H)){const n=f`${e}.${f.identifier(this.casing.getColumnCasing(t))}`;let s=t.columnType,i=t,a=0;for(;w(i,wc);)i=i.baseColumn,s=i.columnType,++a;switch(s){case"PgNumeric":case"PgNumericNumber":case"PgNumericBigInt":case"PgBigInt64":case"PgBigIntString":case"PgBigSerial64":case"PgTimestampString":case"PgGeometry":case"PgGeometryObject":case"PgBytea":{const o="[]".repeat(a);return f`${n}::text${f.raw(o).if(o)} as ${f.identifier(r)}`}case"PgCustomColumn":return f`${i.jsonSelectIdentifier(n,f,a>0?a:void 0)} as ${f.identifier(r)}`;default:return f`${n} as ${f.identifier(r)}`}}return f`${e}.${w(t,I.Aliased)?f.identifier(t.fieldAlias):Di(t)?f.identifier(r):this.nestedSelectionerror()} as ${f.identifier(r)}`}unwrapAllColumns=(e,t)=>f.join(Object.entries(e[ct]).map(([r,n])=>(t.push({key:r,field:n}),this.buildRqbColumn(e,n,r))),f`, `);buildColumns=(e,t,r)=>r?.columns?(()=>{const n=Object.entries(r.columns),s=e[ct],i=[];let a;for(const[o,l]of n)if(l!==void 0&&(a=a||l,l)){const c=s[o];i.push(this.buildRqbColumn(e,c,o)),t.push({key:o,field:c})}if(a===!1)for(const[o,l]of Object.entries(s))r.columns[o]!==!1&&(i.push(this.buildRqbColumn(e,l,o)),t.push({key:o,field:l}));return i.length?f.join(i,f`, `):void 0})():this.unwrapAllColumns(e,t);buildRelationalQuery({schema:e,table:t,tableConfig:r,queryConfig:n,relationWhere:s,mode:i,errorPath:a,depth:o,throughJoin:l}){const c=[],d=i==="first",u=n===!0?void 0:n,h=a??"",p=o??0;p||(t=Ue(t,`d${p}`));const v=d?1:u?.limit,y=u?.offset,m=u?.where&&s?we(et(t,u.where,r.relations,e,this.casing),s):u?.where?et(t,u.where,r.relations,e,this.casing):s,$=u?.orderBy?dv(t,u.orderBy):void 0,x=this.buildColumns(t,c,u),b=u?.extras?fv(t,u.extras):void 0;b&&c.push(...b.selection);const T=x?[x]:[],k=u?(()=>{const{with:S}=u;if(!S)return;const _=Object.entries(S).filter(([A,O])=>O);if(_.length)return f.join(_.map(([A,O])=>{const B=r.relations[A],Q=w(B,jc),C=Ue(B.targetTable,`d${p+1}`),q=B.throughTable?Ue(B.throughTable,`tr${p}`):void 0,{filter:R,joinCondition:U}=Uc(this.casing,B,t,C,q);T.push(f`${f.identifier(A)}.${f.identifier("r")} as ${f.identifier(A)}`);const Z=q?f` inner join ${Kt(q)} on ${U}`:void 0,le=this.buildRelationalQuery({table:C,mode:Q?"first":"many",schema:e,queryConfig:O,tableConfig:e[B.targetTableName],relationWhere:R,errorPath:`${h.length?`${h}.`:""}${A}`,depth:p+1,throughJoin:Z});return c.push({field:C,key:A,selection:le.selection,isArray:!Q,isOptional:(B.optional??!1)||O!==!0&&!!O.where}),f`left join lateral(select ${Q?f`row_to_json(${f.identifier("t")}.*) ${f.identifier("r")}`:f`coalesce(json_agg(row_to_json(${f.identifier("t")}.*)), '[]') as ${f.identifier("r")}`} from (${le.sql}) as ${f.identifier("t")}) as ${f.identifier(A)} on true`}),f` `)})():void 0;if(b?.sql&&T.push(b.sql),!T.length)throw new vr({message:`No fields selected for table "${r.name}"${h?` ("${h}")`:""}`});return{sql:f`select ${f.join(T.filter(S=>S!==void 0),f`, `)} from ${Kt(t)}${l}${f` ${k}`.if(k)}${f` where ${m}`.if(m)}${f` order by ${$}`.if($)}${f` limit ${v}`.if(v!==void 0)}${f` offset ${y}`.if(y!==void 0)}`,selection:c}}},Ib=class{static[g]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}},Te=class{static[g]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){const t=!!this.fields,r=e;let n;return this.fields?n=this.fields:w(r,ie)?n=Object.fromEntries(Object.keys(r._.selectedFields).map(s=>[s,r[s]])):w(r,lu)?n=r[K].selectedFields:w(r,I)?n={}:n=mv(r),new cu({table:r,fields:n,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Lb=class extends Ib{static[g]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:r,session:n,dialect:s,withList:i,distinct:a}){super(),this.config={withList:i,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=r,this.session=n,this.dialect=s,this._={selectedFields:t,config:this.config},this.tableName=bt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(const o of St(e))this.usedTables.add(o)}getUsedTables(){return[...this.usedTables]}createJoin(e,t){return((r,n)=>{const s=this.tableName,i=bt(r);for(const a of St(r))this.usedTables.add(a);if(typeof i=="string"&&this.config.joins?.some(a=>a.alias===i))throw new Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof s=="string"&&(this.config.fields={[s]:this.config.fields}),typeof i=="string"&&!w(r,I))){const a=w(r,ie)?r._.selectedFields:w(r,mt)?r[K].selectedFields:r[E.Symbol.Columns];this.config.fields[i]=a}if(typeof n=="function"&&(n=n(new Proxy(this.config.fields,new he({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:r,joinType:e,alias:i,lateral:t}),typeof i=="string")switch(e){case"left":this.joinsNotNullableMap[i]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[i]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!1;break}return this})}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,t){return r=>{const n=typeof r=="function"?r(Rb()):r;if(!ji(this.getSelectedFields(),n.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new he({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new he({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){const t=e[0](new Proxy(this.config.fields,new he({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){const t=e[0](new Proxy(this.config.fields,new he({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else{const t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){const t=[];if(t.push(...St(this.config.table)),this.config.joins)for(const r of this.config.joins)t.push(...St(r.table));return new Proxy(new ie(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new he({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new he({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},cu=class extends Lb{static[g]="PgSelect";_prepare(e){const{session:t,config:r,dialect:n,joinsNotNullableMap:s,authToken:i,cacheConfig:a,usedTables:o}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");const{fields:l}=r;return J.startActiveSpan("drizzle.prepareQuery",()=>{const c=Nt(l),d=t.prepareQuery(n.sqlToQuery(this.getSQL()),c,e,!0,void 0,{type:"select",tables:[...o]},a);return d.joinsNotNullableMap=s,d.setToken(i)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>J.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};pv(cu,[gt]);function ar(e,t){return(r,n,...s)=>{const i=[n,...s].map(a=>({type:e,isAll:t,rightSelect:a}));for(const a of i)if(!ji(r.getSelectedFields(),a.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(i)}}var Rb=()=>({union:Db,unionAll:Ob,intersect:Bb,intersectAll:zb,except:Qb,exceptAll:Mb}),Db=ar("union",!1),Ob=ar("union",!0),Bb=ar("intersect",!1),zb=ar("intersect",!0),Qb=ar("except",!1),Mb=ar("except",!0),uu=class{static[g]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=w(e,Gr)?e:void 0,this.dialectConfig=w(e,Gr)?void 0:e}$with=(e,t)=>{const r=this;return{as:s=>(typeof s=="function"&&(s=s(r)),new Proxy(new xc(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new he({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){const t=this;function r(i){return new Te({fields:i??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function n(i){return new Te({fields:i??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function s(i,a){return new Te({fields:a??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:i}})}return{select:r,selectDistinct:n,selectDistinctOn:s}}select(e){return new Te({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Te({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new Te({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Gr(this.dialectConfig)),this.dialect}},Fa=class{constructor(e,t,r,n,s){this.table=e,this.session=t,this.dialect=r,this.withList=n,this.overridingSystemValue_=s}static[g]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");const t=e.map(r=>{const n={},s=this.table[E.Symbol.Columns];for(const i of Object.keys(r)){const a=r[i];n[i]=w(a,I)?a:new ut(a,s[i])}return n});return new Ua(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){const t=typeof e=="function"?e(new uu):e;if(!w(t,I)&&!ji(this.table[ct],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Ua(this.table,t,this.session,this.dialect,this.withList,!0)}},Ua=class extends gt{constructor(e,t,r,n,s,i,a){super(),this.session=r,this.dialect=n,this.config={table:e,values:t,withList:s,select:i,overridingSystemValue_:a}}static[g]="PgInsert";config;cacheConfig;returning(e=this.config.table[E.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Nt(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=f`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(n=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(n))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));const r=e.where?f` where ${e.where}`:void 0;this.config.onConflict=f`(${f.raw(t)})${r} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');const t=e.where?f` where ${e.where}`:void 0,r=e.targetWhere?f` where ${e.targetWhere}`:void 0,n=e.setWhere?f` where ${e.setWhere}`:void 0,s=this.dialect.buildUpdateSet(this.config.table,Vc(this.config.table,e.set));let i="";return i=Array.isArray(e.target)?e.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=f`(${f.raw(i)})${r} do update set ${s}${t}${n}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return J.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:St(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>J.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new he({alias:Ve(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}},jb=class extends gt{constructor(e,t,r){super(),this.session=t,this.dialect=r,this.config={view:e}}static[g]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return J.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>J.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))},Va=class{constructor(e,t,r,n){this.table=e,this.session=t,this.dialect=r,this.withList=n}static[g]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new Fb(this.table,Vc(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},Fb=class extends gt{constructor(e,t,r,n,s){super(),this.session=r,this.dialect=n,this.config={set:t,table:e,withList:s,joins:[]},this.tableName=bt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[g]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){const t=e,r=bt(t);return typeof r=="string"&&(this.joinsNotNullableMap[r]=!0),this.config.from=t,this}getTableLikeFields(e){return w(e,fe)?e[E.Symbol.Columns]:w(e,ie)?e._.selectedFields:e[K].selectedFields}createJoin(e){return((t,r)=>{const n=bt(t);if(typeof n=="string"&&this.config.joins.some(s=>s.alias===n))throw new Error(`Alias "${n}" is already used in this query`);if(typeof r=="function"){const s=this.config.from&&!w(this.config.from,I)?this.getTableLikeFields(this.config.from):void 0;r=r(new Proxy(this.config.table[E.Symbol.Columns],new he({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),s&&new Proxy(s,new he({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:r,table:t,joinType:e,alias:n}),typeof n=="string")switch(e){case"left":this.joinsNotNullableMap[n]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([s])=>[s,!1])),this.joinsNotNullableMap[n]=!0;break;case"inner":this.joinsNotNullableMap[n]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([s])=>[s,!1])),this.joinsNotNullableMap[n]=!1;break}return this})}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[E.Symbol.Columns]),this.config.from)){const t=bt(this.config.from);if(typeof t=="string"&&this.config.from&&!w(this.config.from,I)){const r=this.getTableLikeFields(this.config.from);e[t]=r}for(const r of this.config.joins){const n=bt(r.table);if(typeof n=="string"&&!w(r.table,I)){const s=this.getTableLikeFields(r.table);e[n]=s}}}return this.config.returningFields=e,this.config.returning=Nt(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){const{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){const t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:St(this.config.table)},this.cacheConfig);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new he({alias:Ve(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}},Ub=class{constructor(e,t,r,n,s,i,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=s,this.dialect=i,this.session=a}static[g]="PgRelationalQueryBuilder";findMany(e){return new Wa(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new Wa(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},Wa=class extends gt{constructor(e,t,r,n,s,i,a,o,l){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=s,this.dialect=i,this.session=a,this.config=o,this.mode=l}static[g]="PgRelationalQuery";_prepare(e){return J.startActiveSpan("drizzle.prepareQuery",()=>{const{query:t,builtQuery:r}=this._toSQL();return this.session.prepareQuery(r,void 0,e,!0,(n,s)=>{const i=n.map(a=>Os(this.schema,this.tableConfig,a,t.selection,s));return this.mode==="first"?i[0]:i})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect._buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){const e=this._getQuery();return{query:e,builtQuery:this.dialect.sqlToQuery(e.sql)}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return J.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}},Vb=class Bs extends I{constructor(t){super(Bs.buildEmbeddedCount(t.source,t.filters).queryChunks),this.params=t,this.mapWith(Number),this.session=t.session,this.sql=Bs.buildCount(t.source,t.filters)}sql;token;static[g]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(t,r){return f`(select count(*) from ${t}${f.raw(" where ").if(r)}${r})`}static buildCount(t,r){return f`select count(*) as count from ${t}${f.raw(" where ").if(r)}${r};`}setToken(t){return this.token=t,this}then(t,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(t,r)}catch(t){return this.then(void 0,t)}finally(t){return this.then(r=>(t?.(),r),r=>{throw t?.(),r})}},Wb=class{constructor(e,t,r,n,s,i){this.schema=e,this.table=t,this.tableConfig=r,this.dialect=n,this.session=s,this.parseJson=i}static[g]="PgRelationalQueryBuilderV2";findMany(e){return new Ha(this.schema,this.table,this.tableConfig,this.dialect,this.session,e??!0,"many",this.parseJson)}findFirst(e){return new Ha(this.schema,this.table,this.tableConfig,this.dialect,this.session,e??!0,"first",this.parseJson)}},Ha=class extends gt{constructor(e,t,r,n,s,i,a,o){super(),this.schema=e,this.table=t,this.tableConfig=r,this.dialect=n,this.session=s,this.config=i,this.mode=a,this.parseJson=o}static[g]="PgRelationalQueryV2";_prepare(e){return J.startActiveSpan("drizzle.prepareQuery",()=>{const{query:t,builtQuery:r}=this._toSQL();return this.session.prepareRelationalQuery(r,void 0,e,(n,s)=>{const i=n.map(a=>Ls(a,t.selection,s,this.parseJson));return this.mode==="first"?i[0]:i})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQuery({schema:this.schema,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,mode:this.mode})}getSQL(){return this._getQuery().sql}_toSQL(){const e=this._getQuery();return{query:e,builtQuery:this.dialect.sqlToQuery(e.sql)}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return J.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}},Hb=class extends gt{constructor(e,t,r,n){super(),this.execute=e,this.sql=t,this.query=r,this.mapBatchResult=n}static[g]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}},du=class{constructor(e,t,r,n,s=!1){if(this.dialect=e,this.session=t,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,relations:r,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},relations:r,session:t},this._query={},this._.schema)for(const[i,a]of Object.entries(this._.schema))this._query[i]=new Ub(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[i],a,e,t);this.query={};for(const[i,a]of Object.entries(r))this.query[i]=new Wb(r,r[a.name].table,a,e,t,s);this.$cache={invalidate:async i=>{}}}static[g]="PgDatabase";_query;query;$with=(e,t)=>{const r=this;return{as:s=>(typeof s=="function"&&(s=s(new uu(r.dialect))),new Proxy(new xc(s.getSQL(),t??("getSelectedFields"in s?s.getSelectedFields()??{}:{}),e,!0),new he({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new Vb({source:e,filters:t,session:this.session})}$cache;with(...e){const t=this;function r(l){return new Te({fields:l??void 0,session:t.session,dialect:t.dialect,withList:e})}function n(l){return new Te({fields:l??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function s(l,c){return new Te({fields:c??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:l}})}function i(l){return new Va(l,t.session,t.dialect,e)}function a(l){return new Fa(l,t.session,t.dialect,e)}function o(l){return new ja(l,t.session,t.dialect,e)}return{select:r,selectDistinct:n,selectDistinctOn:s,update:i,insert:a,delete:o}}select(e){return new Te({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Te({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new Te({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Va(e,this.session,this.dialect)}insert(e){return new Fa(e,this.session,this.dialect)}delete(e){return new ja(e,this.session,this.dialect)}refreshMaterializedView(e){return new jb(e,this.session,this.dialect)}authToken;execute(e){const t=typeof e=="string"?f.raw(e):e.getSQL(),r=this.dialect.sqlToQuery(t),n=this.session.prepareQuery(r,void 0,void 0,!1);return new Hb(()=>n.execute(void 0,this.authToken),t,r,s=>n.mapResult(s,!0))}transaction(e,t){return this.session.transaction(e,t)}},Jb=class{static[g]="Cache"},fu=class extends Jb{strategy(){return"all"}static[g]="NoopCache";async get(e){}async put(e,t,r,n){}async onMutate(e){}};async function Ja(e,t){const r=`${e}-${JSON.stringify(t)}`,n=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",n);return[...new Uint8Array(s)].map(i=>i.toString(16).padStart(2,"0")).join("")}var Kb=class{constructor(e,t,r,n){this.query=e,this.cache=t,this.queryMetadata=r,this.cacheConfig=n,t&&t.strategy()==="all"&&n===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static[g]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,t,r){if(this.cache===void 0||w(this.cache,fu)||this.queryMetadata===void 0)try{return await r()}catch(n){throw new Ot(e,t,n)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await r()}catch(n){throw new Ot(e,t,n)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{const[n]=await Promise.all([r(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return n}catch(n){throw new Ot(e,t,n)}if(!this.cacheConfig)try{return await r()}catch(n){throw new Ot(e,t,n)}if(this.queryMetadata.type==="select"){const n=await this.cache.get(this.cacheConfig.tag??await Ja(e,t),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(n===void 0){let s;try{s=await r()}catch(i){throw new Ot(e,t,i)}return await this.cache.put(this.cacheConfig.tag??await Ja(e,t),s,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),s}return n}try{return await r()}catch(n){throw new Ot(e,t,n)}}},Gb=class{constructor(e){this.dialect=e}static[g]="PgSession";execute(e,t){return J.startActiveSpan("drizzle.operation",()=>J.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){const r=await this.execute(e,t);return Number(r[0].count)}},Yb=class extends du{constructor(e,t,r,n,s=0,i){super(e,t,r,n,i),this.relations=r,this.schema=n,this.nestedIndex=s}static[g]="PgTransaction";rollback(){throw new Z$}getTransactionConfigSQL(e){const t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),f.raw(t.join(" "))}setTransaction(e){return this.session.execute(f`set transaction ${this.getTransactionConfigSQL(e)}`)}},Ka=class extends Kb{constructor(e,t,r,n,s,i,a,o,l,c,d){super({sql:t,params:r},s,i,a),this.client=e,this.queryString=t,this.params=r,this.logger=n,this.fields=o,this._isResponseInArrayMode=l,this.customResultMapper=c,this.isRqbV2Query=d}static[g]="PostgresJsPreparedQuery";async execute(e={}){return this.isRqbV2Query?this.executeRqbV2(e):J.startActiveSpan("drizzle.execute",async t=>{const r=ls(this.params,e);t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(r)}),this.logger.logQuery(this.queryString,r);const{fields:n,queryString:s,client:i,joinsNotNullableMap:a,customResultMapper:o}=this;if(!n&&!o)return J.startActiveSpan("drizzle.driver.execute",()=>this.queryWithCache(s,r,async()=>await i.unsafe(s,r)));const l=await J.startActiveSpan("drizzle.driver.execute",()=>(t?.setAttributes({"drizzle.query.text":s,"drizzle.query.params":JSON.stringify(r)}),this.queryWithCache(s,r,async()=>await i.unsafe(s,r).values())));return J.startActiveSpan("drizzle.mapResponse",()=>o?o(l):l.map(c=>hv(n,c,a)))})}async executeRqbV2(e={}){return J.startActiveSpan("drizzle.execute",async t=>{const r=ls(this.params,e);t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(r)}),this.logger.logQuery(this.queryString,r);const{queryString:n,client:s,customResultMapper:i}=this,a=await J.startActiveSpan("drizzle.driver.execute",()=>(t?.setAttributes({"drizzle.query.text":n,"drizzle.query.params":JSON.stringify(r)}),s.unsafe(n,r)));return J.startActiveSpan("drizzle.mapResponse",()=>i(a))})}all(e={}){return J.startActiveSpan("drizzle.execute",async t=>{const r=ls(this.params,e);return t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(r)}),this.logger.logQuery(this.queryString,r),J.startActiveSpan("drizzle.driver.execute",()=>(t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(r)}),this.queryWithCache(this.queryString,r,async()=>this.client.unsafe(this.queryString,r))))})}isResponseInArrayMode(){return this._isResponseInArrayMode}},hu=class pu extends Gb{constructor(t,r,n,s,i={}){super(r),this.client=t,this.relations=n,this.schema=s,this.options=i,this.logger=i.logger??new rv,this.cache=i.cache??new fu}static[g]="PostgresJsSession";logger;cache;prepareQuery(t,r,n,s,i,a,o){return new Ka(this.client,t.sql,t.params,this.logger,this.cache,a,o,r,s,i)}prepareRelationalQuery(t,r,n,s){return new Ka(this.client,t.sql,t.params,this.logger,this.cache,void 0,void 0,r,!1,s,!0)}query(t,r){return this.logger.logQuery(t,r),this.client.unsafe(t,r).values()}queryObjects(t,r){return this.client.unsafe(t,r)}transaction(t,r){return this.client.begin(async n=>{const s=new pu(n,this.dialect,this.relations,this.schema,this.options),i=new Xb(this.dialect,s,this.schema,this.relations);return r&&await i.setTransaction(r),t(i)})}},Xb=class mu extends Yb{constructor(t,r,n,s,i=0){super(t,r,s,n,i),this.session=r}static[g]="PostgresJsTransaction";transaction(t){return this.session.client.savepoint(r=>{const n=new hu(r,this.dialect,this.relations,this.schema,this.session.options);return t(new mu(this.dialect,n,this.schema,this.relations))})}},Zb=class extends du{static[g]="PostgresJsDatabase"};function fr(e,t={}){const r=l=>l;for(const l of["1184","1082","1083","1114","1182","1185","1115","1231"])e.options.parsers[l]=r,e.options.serializers[l]=r;e.options.serializers[114]=r,e.options.serializers[3802]=r;const n=new Gr({casing:t.casing});let s;t.logger===!0?s=new tv:t.logger!==!1&&(s=t.logger);let i;if(t.schema){const l=_b(t.schema,kb);i={fullSchema:t.schema,schema:l.tables,tableNamesMap:l.tableNamesMap}}const a=t.relations??{},o=new Zb(n,new hu(e,n,a,i,{logger:s,cache:t.cache}),a,i);return o.$client=e,o.$cache=t.cache,o.$cache&&(o.$cache.invalidate=t.cache?.onMutate),o}function zs(...e){if(typeof e[0]=="string")return fr(Wr(e[0]),e[1]);const{connection:t,client:r,...n}=e[0];if(r)return fr(r,n);if(typeof t=="object"&&t.url!==void 0){const{url:s,...i}=t;return fr(Wr(s,i),n)}return fr(Wr(t),n)}(e=>{function t(r){return fr({options:{parsers:{},serializers:{}}},r)}e.mock=t})(zs||(zs={}));var ew=process.env.DATABASE_URL??`postgresql://${process.env.POSTGRES_USER??"prometheus"}:${process.env.POSTGRES_PASSWORD??"secret"}@${process.env.POSTGRES_HOST??"localhost"}:${process.env.POSTGRES_PORT??5433}/${process.env.POSTGRES_DB??"prometheus"}`,tw=process.env.POSTGRES_SSL==="true"?"require":!1;const rw=Wr(ew,{max:5,ssl:tw}),Jn=zs({client:rw}),Ke=Ya("store_items",{id:Xa("id").primaryKey(),name:cs("name").notNull(),price:Fu("price",{precision:10,scale:2}).notNull(),createdAt:Za("created_at",{mode:"date",withTimezone:!1}).defaultNow()}),_0=Ya("chat_messages",{id:Xa("id").primaryKey(),author:cs("author").notNull(),body:cs("body").notNull(),createdAt:Za("created_at",{mode:"date",withTimezone:!1}).defaultNow()});var gu=e=>{const t=Number.parseFloat(String(e.price));return{id:e.id,name:e.name,price:Number.isFinite(t)?t:0}};const nw=({cacheControl:e})=>{e({public:!0,maxAge:300,sMaxAge:900,staleWhileRevalidate:60})};var $u=async e=>{const r=Number.isFinite(e)&&(e??0)>0?Number(e):0,n=Jn.select().from(Ke),s=r>0?n.where(Hn(Ke.id,r)):n;try{const i=(await s.orderBy(Ke.id).limit(6)).map(gu);return{items:i,cursor:i.length===6?i[i.length-1].id:null,source:"db"}}catch(i){return console.error("Failed to load store items",i),{items:[{id:-1,name:N`Sample adapter (offline)`,price:24.99},{id:-2,name:N`Edge cache pack (offline)`,price:12.5}],cursor:null,source:"fallback"}}},sw=np(async e=>$u(e),"o0FSe7O5kbg");const iw=Fg(z(sw,"s_o0FSe7O5kbg"));var aw=async()=>$u();const vu=Mg(z(aw,"s_v669J74jz24"));var ow=async e=>{const t=Number.parseInt(String(e.id??""),10);if(!Number.isFinite(t)||t<=0)return{success:!1,error:N`Invalid id.`};try{const[r]=await Jn.delete(Ke).where(rt(Ke.id,t)).returning();return r?{success:!0,id:t}:{success:!1,error:N`Item not found.`}}catch(r){return console.error("Failed to delete store item",r),{success:!1,error:N`Unable to delete item right now.`}}};const yu=oc(z(ow,"s_R9VLNISWb6o"));var lw=async e=>{const t=String(e.name??"").trim(),r=Number.parseFloat(String(e.price??""));if(!t||Number.isNaN(r)||r<=0)return{success:!1,error:N`Name and positive price required.`};try{const[n]=await Jn.insert(Ke).values({name:t,price:r.toString()}).returning();return{success:!0,item:gu(n)}}catch(n){return console.error("Failed to create store item",n),{success:!1,error:N`Unable to create item right now.`}}};const bu=oc(z(lw,"s_nexPpNJs6FU"));var cw=[.16,1,.3,1],uw=[.4,0,1,1],wu=()=>typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion: reduce)").matches,Su=e=>`cubic-bezier(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`,dw=()=>new Promise(e=>{if(typeof requestAnimationFrame!="function"){e();return}requestAnimationFrame(()=>requestAnimationFrame(()=>e()))}),xu=e=>e.finished?.then(()=>{})??new Promise((t,r)=>{e.addEventListener("finish",()=>t(),{once:!0}),e.addEventListener("cancel",()=>r(new Error("Animation cancelled")),{once:!0})}),fw=async(e,t,r)=>{if(!e.length||typeof document>"u"||typeof e[0]?.animate!="function")return;const n=e.map((s,i)=>{const a=typeof r.delay=="function"?r.delay(i):r.delay;return s.animate(t,{...r,delay:a})});await Promise.all(n.map(s=>xu(s)))},hw=async(e,t="new")=>{if(typeof document>"u"||!e.length||wu())return;await dw();const r=e.map(n=>document.querySelector(`[data-store-item-id="${n}"]`)).filter(n=>!!n);if(r.length)try{const n=t==="initial"?.7:0,s=t==="initial"?12:8,i=t==="initial"?.99:.98,a=t==="initial"?500:380,o=t==="initial"?60:45;await fw(r,[{opacity:n,transform:`translate3d(0, ${s}px, 0) scale(${i})`},{opacity:1,transform:"translate3d(0, 0, 0) scale(1)"}],{duration:a,easing:Su(cw),fill:"none",delay:l=>l*o})}catch(n){console.error("Failed to run entrance animations",n)}},pw=async e=>{const[t]=oe(),r=()=>{const s=()=>{t.value=t.value.filter(a=>a.id!==e)};if(typeof document>"u"){s();return}const i=document.startViewTransition;if(typeof i=="function"){i.call(document,s);return}s()};if(typeof document>"u"||wu())return r();const n=document.querySelector(`[data-store-item-id="${e}"]`);if(!n){r();return}try{await xu(n.animate([{opacity:1,transform:"translate3d(0, 0, 0) scale(1)"},{opacity:0,transform:"translate3d(0, -8px, 0) scale(0.96)"}],{duration:220,easing:Su(uw),fill:"both"}))}catch(s){console.error("Failed to animate removal",s)}r()},mw=async(e=!1)=>{const[t,r,n,s,i,a]=oe();if(!a.value){a.value=!0,n.value=null;try{const o=await iw(e?void 0:r.value??void 0),l=o?.items??[],c=e?l:[...i.value,...l],d=e?new Set:new Set(i.value.map(p=>p.id)),u=l.map(p=>p.id).filter(p=>!d.has(p)),h=()=>{i.value=c};if(typeof document>"u")h();else{const p=document.startViewTransition;typeof p=="function"?p.call(document,h):h()}r.value=o?.cursor??null,s.value=o?.source==="fallback",n.value=o?.source==="fallback"?N`Database offline: showing fallback inventory.`:null,t(u)}catch(o){console.error("Failed to load store items",o),n.value=N`Unable to load inventory right now.`}finally{a.value=!1}}},gw=async(e,t)=>{const[r]=oe();await r(t.dataset.reset==="1")},$w=({track:e})=>{const[t,r,n,s]=oe(),i=e(()=>r.value);if(i?.success&&i.item){const a=[...s.value.filter(l=>l.id!==i.item.id),i.item];a.sort((l,c)=>l.id-c.id);const o=()=>{s.value=a};if(typeof document>"u")o();else{const l=document.startViewTransition;typeof l=="function"?l.call(document,o):o()}n.value=null,t([i.item.id])}},vw=({track:e})=>{const[t,r,n]=oe(),s=e(()=>r.value);s?.success&&s.id?(t(s.id),n.value=null):s?.error&&(n.value=s.error)},yw=()=>{const e=vu(),t=ue(e.value.items),r=ue(e.value.cursor),n=ue(!1),s=ue(e.value.source==="fallback"),i=ue(e.value.source==="fallback"?N`Database offline: showing fallback inventory.`:null),a=bu(),o=yu(),l=z(hw,"s_ZF5ox75ncAY"),c=z(pw,"s_i5YbwZ5sHVc",[t]),d=z(gw,"s_dQlMqeLWpD0",[z(mw,"s_69ywUjDxRgU",[l,r,i,s,t,n])]);return an(z($w,"s_h70dBAjCmqY",[l,a,i,t]),{eagerness:"idle"}),an(z(vw,"s_fap9umrX08E",[c,o,i]),{eagerness:"idle"}),P("div",null,{class:"gap-4 grid md:grid-cols-[1.2fr_1fr] bg-slate-900/60 mt-5 p-4 border border-slate-800 rounded-lg"},[P("div",null,{class:"space-y-4"},[P("div",null,{class:"flex justify-between items-center"},[P("p",null,{class:"text-slate-300 text-sm"},N`Inventory`,1,null),P("button",null,{type:"button",class:"bg-slate-800 hover:bg-slate-700 disabled:opacity-60 px-3 py-2 rounded-lg ring-1 ring-slate-700 font-semibold text-slate-100 text-xs transition","data-reset":"1",disabled:Ee(u=>u.value,[n],"p0.value"),onClick$:d},N`Refresh`,1,null)],1,null),s.value&&P("p",null,{class:"text-amber-300 text-xs"},N`Showing fallback data while the database is unavailable.`,1,"YL_0"),i.value&&P("p",null,{class:"text-rose-300 text-sm"},Ee(u=>u.value,[i],"p0.value"),3,"YL_1"),t.value.length?P("ul",null,{class:"gap-3 grid md:grid-cols-2",style:{viewTransitionName:"store-grid"}},t.value.map(u=>P("li",{"data-store-item-id":Ce(u,"id"),style:{viewTransitionName:`store-item-${u.id}`}},{class:"surface space-y-2 p-4"},[P("div",null,{class:"flex justify-between items-start gap-3"},[P("div",null,null,[P("p",null,{class:"text-slate-400 text-sm"},N`SKU ${u.id}`,1,null),P("p",null,{class:"font-semibold text-slate-50 text-lg"},Ce(u,"name"),1,null)],1,null),W(La,{action:o,class:"shrink-0",children:[P("input",{value:Ce(u,"id")},{type:"hidden",name:"id"},null,3,null),P("button",{disabled:o.isRunning||u.id<=0,"aria-label":N`Delete ${u.name}`},{type:"submit",class:"hover:bg-rose-500/10 disabled:opacity-60 px-2 py-1 rounded-md ring-1 ring-slate-700 hover:ring-rose-500 text-slate-400 hover:text-rose-200 text-xs transition"},N`Delete`,1,null)],[j]:{action:j,class:j}},1,"YL_2")],1,null),P("p",null,{class:"text-emerald-300"},["$",u.price.toFixed(2)],1,null)],1,u.id)),1,"YL_3"):!n.value&&P("p",null,{class:"text-slate-500 text-sm"},N`No items yet.`,1,"YL_4"),P("div",null,{class:"flex items-center gap-3"},[r.value!==null&&P("button",null,{type:"button",class:"bg-emerald-500 hover:bg-emerald-400 disabled:opacity-60 px-4 py-2 rounded-lg font-semibold text-emerald-950 text-sm transition",disabled:Ee(u=>u.value,[n],"p0.value"),onClick$:d},N`Load more`,1,"YL_5"),n.value&&P("span",null,{class:"text-slate-400 text-xs"},N`Loading...`,1,"YL_6")],1,null)],1,null),P("div",null,{class:"space-y-3 bg-slate-900/80 p-4 border border-slate-800 rounded-lg"},[P("p",null,{class:"font-semibold text-slate-100 text-sm"},N`Add an item`,1,null),W(La,{action:a,class:"space-y-3 text-slate-200 text-sm",children:[P("div",null,{class:"space-y-1"},[P("label",null,{class:"text-slate-400 text-xs uppercase tracking-wide",for:"name"},N`Name`,1,null),P("input",null,{id:"name",name:"name",class:"bg-slate-950 px-3 py-2 border border-slate-800 rounded-lg w-full text-slate-100",placeholder:N`Lightweight widget`,required:!0},null,3,null)],1,null),P("div",null,{class:"space-y-1"},[P("label",null,{class:"text-slate-400 text-xs uppercase tracking-wide",for:"price"},N`Price`,1,null),P("input",null,{id:"price",name:"price",type:"number",step:"0.01",min:"0",class:"bg-slate-950 px-3 py-2 border border-slate-800 rounded-lg w-full text-slate-100",placeholder:"24.99",required:!0},null,3,null)],1,null),P("button",null,{type:"submit",class:"bg-emerald-500 hover:bg-emerald-400 disabled:opacity-70 px-4 py-2 rounded-lg w-full font-semibold text-emerald-950 text-sm transition",disabled:Ee(u=>u.isRunning,[a],"p0.isRunning")},a.isRunning?N`Saving...`:N`Create item`,1,null),a.value?.error&&P("p",null,{class:"text-rose-300 text-xs"},Ee(u=>u.value.error,[a],"p0.value.error"),3,"YL_7"),a.value?.success&&a.value.item&&P("p",null,{class:"text-emerald-300 text-xs"},N`Added ${a.value.item.name}.`,1,"YL_8")],[j]:{action:j,class:j}},1,"YL_9")],1,null)],1,"YL_10")};const bw=se(z(yw,"s_2aWAOZ0c5GI"));var ww="[data-store-item-id]{transform-origin:top;will-change:transform,opacity}@media (prefers-reduced-motion:reduce){[data-store-item-id]{transition:none!important;animation:none!important}}",Sw=dt({default:()=>_w,head:()=>Pw,onGet:()=>nw,useCreateStoreItem:()=>bu,useDeleteStoreItem:()=>yu,useStoreItemsLoader:()=>vu},1),xw=()=>(Br(z(ww,"s_cOQoV5jD0Q4")),P("section",null,{class:"p-6 surface"},[P("div",null,{class:"flex justify-between items-center gap-2"},[P("div",null,null,[P("p",null,{class:"text-emerald-300 text-sm uppercase tracking-wide"},N`Store`,1,null),P("h1",null,{class:"font-semibold text-slate-50 text-2xl"},N`Fast browsing with tiny payloads`,1,null)],1,null),P("span",null,{class:"bg-slate-800 px-3 py-1 rounded-full text-slate-200 text-xs"},N`cached`,1,null)],1,null),P("p",null,{class:"mt-3 max-w-2xl text-slate-300 text-sm"},N`Items stream directly from Postgres via Drizzle, with cursor pagination to keep responses lean. Interactivity wakes up only when you click.`,1,null),W(bw,null,3,"3h_0")],1,"3h_1")),_w=se(z(xw,"s_bZ8kc5UlLx4"));const Pw=({withLocale:e})=>e(()=>({title:N`Store | Prometheus`,meta:[{name:"description",content:N`Drizzle-powered store pulling from Postgres with cursor pagination and lazy loading.`}]}));var Tw=dt({onGet:()=>Cw},1);const Cw=async({cacheControl:e,query:t,json:r})=>{e({public:!0,maxAge:300,sMaxAge:900,staleWhileRevalidate:60});const n=Number.parseInt(t.get("limit")??"",10),s=Number.parseInt(t.get("cursor")??"",10),i=Number.isFinite(n)&&n>0?Math.min(n,50):10,a=Number.isFinite(s)&&s>0?s:0;try{const o=Jn.select().from(Ke),l=(await(a>0?o.where(Hn(Ke.id,a)):o).orderBy(Ke.id).limit(i)).map(c=>({...c,price:Number.parseFloat(String(c.price))}));r(200,{items:l,cursor:l.length===i?l[l.length-1].id:null})}catch(o){console.error("Failed to load store items",o),r(500,{error:"Unable to load items right now."})}},kw=[vg];var Bt=()=>h$;const qw=[["/",[Bt,()=>b$],"/",["q-9iuv4ikC.js","q-BSWY-ium.js"]],["ai",[Bt,()=>P$],"/ai",["q-9iuv4ikC.js","q-Dd6V3Vm6.js"]],["chat",[Bt,()=>L$],"/chat",["q-9iuv4ikC.js","q-Urx3URkR.js"]],["index",[Bt,()=>v$],"/index",["q-9iuv4ikC.js","q-Be-Bc8QR.js"]],["store",[Bt,()=>Sw],"/store",["q-9iuv4ikC.js","q-BgSvt7s7.js"]],["api/store/items",[Bt,()=>Tw],"/api/store/items",["q-9iuv4ikC.js"]]],Nw=[];var _u={routes:qw,serverPlugins:kw,menus:Nw,trailingSlash:!1,basePathname:"/",cacheModules:!0},Aw=({serverData:e})=>`/build${`/${e.locale}`}`,Ew=()=>{ng(()=>Xo(Fn))},Iw=()=>{const e=Un();return Hf(Ct("s_TVD7erg9zpo",[ue(e.url.href),e])),W(kt,null,3,"Dv_0")};const Lw=se(z(Iw,"s_w6dmeDadJmA"));var Rw={};globalThis.__EXPERIMENTAL__=Rw;var Dw=()=>W(zg,{children:[P("head",null,null,[P("meta",null,{charSet:"utf-8"},null,3,null),W(mc,null,3,"xd_0")],1,null),P("body",null,{class:"app-shell"},W(Lw,{children:W(_g,null,3,"xd_1")},1,"xd_2"),1,null)]},1,"xd_3"),Ow=se(z(Dw,"s_8txvw3enrrU"));Ew();var Bw=e=>{const t=typeof e.base=="function"?e.base(e):e.base;return t?t.endsWith("/")?t:`${t}/`:"/build/"},Ga=e=>!!e&&typeof e=="object"&&"manifest"in e,zw=e=>{const t=e.serverData?.locale;if(t)return t;let r=null;const n=e.serverData?.url;if(n)try{r=new URL(n).searchParams.get("locale")}catch{r=null}const s=e.serverData?.requestHeaders?.["accept-language"]??void 0;return Ii({queryLocale:r,acceptLanguage:s})},Qw=e=>{const t=e.serverData?.url;if(typeof t=="string"&&t.length>0)try{return new URL(t).pathname}catch{}return"/"},Mw=e=>{const t=_u.routes;if(!Array.isArray(t))return[];const r=e.startsWith("/")?e:`/${e}`,n=new Set(["/","/index"]);for(const s of t){if(!Array.isArray(s)||s.length<4)continue;const i=s[2],a=s[3];if(!(typeof i!="string"||!Array.isArray(a))){if(n.has(i)&&n.has(r))return a.filter(o=>typeof o=="string"&&o.length>0);if(i===r)return a.filter(o=>typeof o=="string"&&o.length>0)}}return[]},jw=(e,t,r)=>{const n=t&&typeof t=="object"?t:null,s=[typeof n?.qwikLoader=="string"?n.qwikLoader:null,typeof n?.core=="string"?n.core:null,typeof n?.preloader=="string"?n.preloader:null,...Mw(r)].filter(a=>typeof a=="string"),i=new Set;return s.filter(a=>i.has(a)?!1:(i.add(a),!0)).map(a=>({tag:"link",location:"head",attributes:{rel:"modulepreload",href:`${e}${a}`,crossorigin:"anonymous"}}))};function Fw(e){const t=e.manifest??gn,r=Ga(t)?t.manifest:t,n=Qw(e),s=zw(e),i={...e.serverData,locale:s},a=Bw({...e,base:Aw,serverData:i}),o=`${a}${r?.qwikLoader??"qwikloader.js"}`,l={...e.containerAttributes,lang:s,"q:locale":s},d={tag:"script",location:"head",attributes:{"data-qwik-lazy-loader":"1",dangerouslySetInnerHTML:`(function(){const src='${o}';if(!src)return;let started=false;const load=()=>{if(started||navigator.connection?.saveData)return;started=true;const s=document.createElement('script');s.type='module';s.defer=true;s.src=src;s.setAttribute('data-qwik-loader','lazy');document.head.appendChild(s);};const prime=()=>{load();cleanup();};const cleanup=()=>triggers.forEach((event)=>document.removeEventListener(event,prime,listenerOpts));const triggers=['pointerdown','keydown','touchstart','focusin'];const listenerOpts={once:true,passive:true};triggers.forEach((event)=>document.addEventListener(event,prime,listenerOpts));document.addEventListener('visibilitychange',()=>{if(document.visibilityState==='visible')prime();},{once:true});})();`}},u=jw(a,r,n),h=r?Ga(t)?{...t,manifest:{...r,core:void 0,preloader:void 0,injections:[...r?.injections??[],...u,d]}}:{...r,core:void 0,preloader:void 0,injections:[...r?.injections??[],...u,d]}:t;return jm(W(Ow,null,3,"CC_0"),{...e,base:a,serverData:i,manifest:h,qwikLoader:"never",preloader:!1,containerTagName:"html",containerAttributes:l,stream:e.stream??{static:{buffer:0},inOrder:["<html"]}})}var{router:Uw,notFound:Vw}=tg({render:Fw,qwikCityPlan:_u,manifest:gn}),P0={router:Uw,notFound:Vw};export{P0 as default,Vw as notFound,Uw as router};
