@layer components {
  .preact-island {
    @apply mt-4 rounded-2xl border border-teal-200/80 bg-white/70 p-4;
    position: relative;
    overflow: hidden;
    background-color: rgb(var(--surface) / 0.75);
    border-color: rgb(var(--signal) / 0.22);
  }

  .preact-island-ui {
    position: relative;
    z-index: 1;
    display: grid;
    gap: 12px;
  }

  .preact-island-top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }

  .preact-island-label {
    @apply font-mono text-[11px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .preact-island-timer {
    @apply rounded-full border border-teal-200/70 bg-teal-50 px-3 py-1;
    @apply font-mono text-[11px] text-teal-700 uppercase tracking-[0.35em];
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    background-color: rgb(var(--signal) / 0.12);
    border-color: rgb(var(--signal) / 0.28);
    color: rgb(var(--signal-strong));
  }

  .preact-island-ui[data-running="false"] .preact-island-timer {
    @apply border-slate-200/70 bg-slate-100 text-slate-600;
    background-color: rgb(var(--surface-soft));
    border-color: rgb(var(--stroke) / 0.7);
    color: rgb(var(--muted));
  }

  @keyframes timer-bloom {
    from {
      opacity: 0;
      transform: scale(0.96);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .preact-island-stage {
    position: relative;
    display: grid;
    place-items: center;
    padding: 18px;
    border-radius: 20px;
    border: 1px solid rgb(var(--signal) / 0.25);
    background:
      radial-gradient(
        circle at 50% 25%,
        rgb(var(--signal) / 0.12),
        rgb(var(--surface) / 0.92) 60%
      ),
      linear-gradient(
        180deg,
        rgb(var(--surface) / 0.9),
        rgb(var(--surface-soft) / 0.7)
      );
    animation: timer-bloom 420ms ease;
    overflow: hidden;
  }

  .preact-island-stage::before {
    content: "";
    position: absolute;
    inset: 14px;
    border-radius: 999px;
    border: 1px dashed rgb(var(--muted-faint) / 0.35);
    pointer-events: none;
  }

  .preact-island-ui[data-running="true"] .preact-island-stage {
    animation: timer-bloom 420ms ease;
  }

  .preact-island-dial {
    width: 160px;
    height: 160px;
    display: block;
  }

  .preact-island-dial-track {
    fill: none;
    stroke: rgb(var(--muted-faint) / 0.45);
    stroke-width: 10;
  }

  .preact-island-dial-ticks {
    fill: none;
    stroke: rgb(var(--muted-faint) / 0.4);
    stroke-width: 2;
    stroke-dasharray: 2 6;
    opacity: 0.6;
  }

  .preact-island-dial-progress {
    fill: none;
    stroke: rgb(var(--signal) / 0.85);
    stroke-width: 10;
    stroke-linecap: round;
    transform: rotate(-90deg);
    transform-origin: 60px 60px;
    transition: stroke-dashoffset 600ms ease;
  }

  .preact-island-dial-hand {
    stroke: rgb(var(--accent) / 0.85);
    stroke-width: 3;
    stroke-linecap: round;
    transition: transform 600ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  .preact-island-dial-center-dot {
    fill: rgb(var(--surface));
    stroke: rgb(var(--signal) / 0.7);
    stroke-width: 2;
  }

  .preact-island-ui[data-running="true"] .preact-island-dial-center-dot {
    fill: rgb(var(--surface) / 0.9);
  }

  .preact-island-stage-center {
    position: absolute;
    text-align: center;
    display: grid;
    gap: 6px;
    pointer-events: none;
  }

  .preact-island-stage-title {
    @apply font-mono text-[11px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .preact-island-stage-time {
    @apply font-semibold text-slate-900 text-2xl;
    letter-spacing: 0.04em;
    color: rgb(var(--ink));
  }

  .preact-island-stage-sub {
    @apply text-slate-500 text-xs;
    color: rgb(var(--muted-soft));
  }

  .preact-island-action {
    @apply bg-white mt-1 px-4 py-2 border border-slate-200 rounded-full;
    @apply font-mono text-[11px] text-slate-600 uppercase tracking-[0.35em];
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    transition:
      color 160ms ease,
      border-color 160ms ease,
      transform 160ms ease,
      box-shadow 160ms ease;
    box-shadow: 0 10px 18px rgba(15, 23, 42, 0.08);
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted));
  }

  .preact-island-action:hover {
    @apply border-teal-300 text-teal-700;
    transform: translateY(-1px);
    box-shadow: 0 14px 22px rgba(20, 184, 166, 0.2);
    border-color: rgb(var(--signal) / 0.5);
    color: rgb(var(--signal-strong));
  }

  @media (prefers-reduced-motion: reduce) {
    .preact-island-stage,
    .preact-island-ui[data-running="true"] .preact-island-stage {
      animation: none;
    }

    .preact-island-dial-progress,
    .preact-island-dial-hand {
      transition: none;
    }
  }

  @keyframes planner-dot {
    0% {
      transform: scale(1);
      opacity: 0.6;
    }
    50% {
      transform: scale(1.2);
      opacity: 1;
    }
    100% {
      transform: scale(1);
      opacity: 0.7;
    }
  }

  @keyframes planner-spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .planner-demo {
    @apply mt-4 rounded-2xl border border-slate-200/70 bg-white/70 p-4;
    display: grid;
    gap: 12px;
    background-color: rgb(var(--surface) / 0.75);
    border-color: rgb(var(--stroke) / 0.7);
  }

  .planner-demo-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
  }

  .planner-demo-title {
    @apply font-mono text-[11px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .planner-demo-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .planner-demo-action {
    @apply inline-flex items-center gap-2 rounded-full border border-amber-200/80 bg-amber-50 px-4 py-2;
    @apply font-mono text-[10px] text-amber-700 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    box-shadow: 0 12px 20px rgba(249, 115, 22, 0.2);
    transition:
      transform 160ms ease,
      box-shadow 160ms ease,
      background-color 160ms ease;
    background-color: rgb(var(--accent) / 0.12);
    border-color: rgb(var(--accent) / 0.28);
    color: rgb(var(--accent-strong));
  }

  .planner-demo-action:hover:not(:disabled) {
    background: rgb(var(--surface));
    box-shadow: 0 16px 26px rgba(249, 115, 22, 0.25);
    transform: translateY(-1px);
  }

  .planner-demo-action:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    box-shadow: none;
  }

  .planner-demo-secondary {
    @apply inline-flex items-center gap-2 bg-white px-4 py-2 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    transition:
      color 160ms ease,
      border-color 160ms ease,
      transform 160ms ease;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  .planner-demo-secondary:hover {
    @apply border-amber-200/80 text-amber-700;
    transform: translateY(-1px);
    border-color: rgb(var(--accent) / 0.35);
    color: rgb(var(--accent-strong));
  }

  .planner-demo-status {
    @apply text-slate-600 text-sm leading-6;
    color: rgb(var(--muted));
  }

  .planner-demo-steps {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .planner-demo-step {
    @apply inline-flex items-center gap-2 bg-white px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    transition:
      border-color 160ms ease,
      color 160ms ease,
      transform 160ms ease;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  .planner-demo-step::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 9999px;
    background: rgb(var(--muted-faint) / 0.6);
  }

  .planner-demo-step.is-active {
    @apply border-amber-200/80 text-amber-700;
    border-color: rgb(var(--accent) / 0.35);
    color: rgb(var(--accent-strong));
  }

  .planner-demo-step.is-active::before {
    background: rgb(var(--accent));
    animation: planner-dot 1s ease-in-out infinite;
  }

  .planner-demo-step.is-done {
    @apply border-teal-200/80 text-teal-700;
    border-color: rgb(var(--signal) / 0.3);
    color: rgb(var(--signal-strong));
  }

  .planner-demo-step.is-done::before {
    background: rgb(var(--signal));
  }

  .planner-demo-grid {
    display: grid;
    gap: 12px;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }

  .planner-demo-card {
    @apply rounded-2xl border border-slate-200/70 bg-white/80 p-3;
    display: grid;
    gap: 10px;
    min-height: 180px;
    transition:
      border-color 160ms ease,
      box-shadow 160ms ease,
      transform 160ms ease;
    background-color: rgb(var(--surface) / 0.85);
    border-color: rgb(var(--stroke) / 0.7);
  }

  .planner-demo-card[data-cache="miss"] {
    border-color: rgba(249, 115, 22, 0.4);
  }

  .planner-demo-card[data-cache="hit"] {
    border-color: rgba(20, 184, 166, 0.35);
  }

  .planner-demo-card-header {
    display: grid;
    gap: 4px;
  }

  .planner-demo-card-title {
    @apply font-semibold text-slate-900 text-sm;
    color: rgb(var(--ink));
  }

  .planner-demo-card-meta {
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .planner-demo-row {
    display: grid;
    grid-template-columns: minmax(0, 1fr) auto auto;
    align-items: center;
    gap: 8px;
  }

  .planner-demo-label {
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .planner-demo-value {
    @apply text-slate-600 text-xs;
    justify-self: start;
    color: rgb(var(--muted));
  }

  .planner-demo-pill {
    @apply bg-white px-2 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[9px] text-slate-500 uppercase tracking-[0.35em];
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    justify-self: end;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  .planner-demo-pill[data-state="ready"] {
    @apply border-teal-200/80 bg-teal-50 text-teal-700;
    background-color: rgb(var(--signal) / 0.12);
    border-color: rgb(var(--signal) / 0.28);
    color: rgb(var(--signal-strong));
  }

  .planner-demo-toggle {
    @apply bg-white px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-600 uppercase tracking-[0.35em];
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    transition:
      color 160ms ease,
      border-color 160ms ease,
      transform 160ms ease;
    justify-self: start;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted));
  }

  .planner-demo-toggle[data-state="hit"] {
    @apply border-teal-200/80 text-teal-700;
    border-color: rgb(var(--signal) / 0.28);
    color: rgb(var(--signal-strong));
  }

  .planner-demo-toggle[data-state="miss"] {
    @apply border-amber-200/80 text-amber-700;
    border-color: rgb(var(--accent) / 0.28);
    color: rgb(var(--accent-strong));
  }

  .planner-demo-toggle:hover {
    transform: translateY(-1px);
  }

  .planner-demo-outcomes {
    display: grid;
    gap: 6px;
  }

  .planner-demo-outcome {
    @apply bg-white px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[9px] text-slate-500 uppercase tracking-[0.35em];
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 6px;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  .planner-demo-outcome[data-state="render"] {
    @apply border-amber-200/80 text-amber-700;
    border-color: rgb(var(--accent) / 0.28);
    color: rgb(var(--accent-strong));
  }

  .planner-demo-outcome[data-state="skip"] {
    @apply border-slate-200 text-slate-500;
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  .planner-demo-outcome[data-state="queued"] {
    @apply border-teal-200/80 text-teal-700;
    border-color: rgb(var(--signal) / 0.28);
    color: rgb(var(--signal-strong));
  }

  .planner-demo-outcome[data-state="fresh"] {
    @apply border-amber-200/70 text-amber-700;
    border-color: rgb(var(--accent) / 0.24);
    color: rgb(var(--accent-strong));
  }

  .planner-demo-outcome.is-muted {
    @apply text-slate-400;
    color: rgb(var(--muted-faint));
  }

  .planner-demo-outcome.is-muted::after {
    content: '';
    width: 10px;
    height: 10px;
    border-radius: 9999px;
    border: 2px solid rgb(var(--muted-faint) / 0.45);
    border-top-color: rgb(var(--signal) / 0.8);
    display: none;
  }

  .planner-demo-outcome.is-muted[data-state="queued"]::after {
    display: inline-block;
    animation: planner-spin 1s linear infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .planner-demo-step.is-active::before,
    .planner-demo-outcome.is-muted[data-state="queued"]::after {
      animation: none;
    }
  }

  @keyframes binary-flash {
    0% {
      opacity: 0.6;
      transform: translateY(0);
    }
    50% {
      opacity: 1;
      transform: translateY(-1px);
    }
    100% {
      opacity: 0.6;
      transform: translateY(0);
    }
  }

  .react-binary-demo {
    @apply mt-4 rounded-2xl border border-slate-200/70 bg-white/70 p-4;
    display: grid;
    gap: 12px;
    background-color: rgb(var(--surface) / 0.75);
    border-color: rgb(var(--stroke) / 0.7);
  }

  .react-binary-header {
    display: grid;
    gap: 8px;
  }

  .react-binary-controls {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
  }

  .react-binary-title {
    @apply font-mono text-[11px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .react-binary-action {
    @apply inline-flex items-center gap-2 rounded-full border border-amber-200/80 bg-amber-50 px-4 py-2;
    @apply font-mono text-[10px] text-amber-700 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    box-shadow: 0 12px 20px rgba(249, 115, 22, 0.2);
    transition:
      transform 160ms ease,
      box-shadow 160ms ease,
      background-color 160ms ease;
    background-color: rgb(var(--accent) / 0.12);
    border-color: rgb(var(--accent) / 0.28);
    color: rgb(var(--accent-strong));
  }

  .react-binary-action:hover {
    background: rgb(var(--surface));
    box-shadow: 0 16px 26px rgba(249, 115, 22, 0.25);
    transform: translateY(-1px);
  }

  .react-binary-action:focus-visible {
    outline: 2px solid rgb(var(--accent));
    outline-offset: 2px;
  }

  .react-binary-status {
    @apply text-slate-600 text-sm leading-6;
    color: rgb(var(--muted));
  }

  .react-binary-steps {
    @apply flex flex-wrap gap-2;
  }

  .react-binary-step {
    @apply inline-flex items-center gap-2 bg-white px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    transition:
      color 160ms ease,
      border-color 160ms ease,
      background-color 160ms ease,
      transform 160ms ease;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  .react-binary-step:hover {
    @apply border-amber-200/80 text-amber-700;
    transform: translateY(-1px);
    border-color: rgb(var(--accent) / 0.28);
    color: rgb(var(--accent-strong));
  }

  .react-binary-step[aria-pressed="true"] {
    @apply border-amber-200/80 bg-amber-50 text-amber-700;
    background-color: rgb(var(--accent) / 0.12);
    border-color: rgb(var(--accent) / 0.3);
    color: rgb(var(--accent-strong));
  }

  .react-binary-step-dot {
    width: 6px;
    height: 6px;
    border-radius: 9999px;
    background: rgb(var(--muted-faint) / 0.7);
  }

  .react-binary-step[aria-pressed="true"] .react-binary-step-dot {
    background: rgb(var(--accent));
    box-shadow: 0 0 8px rgba(249, 115, 22, 0.35);
  }

  .react-binary-track {
    display: grid;
    gap: 10px;
    grid-template-columns: minmax(0, 1fr) 18px minmax(0, 1fr) 18px minmax(
        0,
        1fr
      );
    align-items: stretch;
  }

  .react-binary-connector {
    position: relative;
  }

  .react-binary-connector::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 1px;
    background: rgb(var(--muted-faint) / 0.6);
  }

  .react-binary-connector::after {
    content: "";
    position: absolute;
    top: 50%;
    right: -2px;
    width: 6px;
    height: 6px;
    border-top: 2px solid rgb(var(--muted-faint) / 0.6);
    border-right: 2px solid rgb(var(--muted-faint) / 0.6);
    transform: translateY(-50%) rotate(45deg);
  }

  .react-binary-panel {
    @apply rounded-2xl border border-slate-200/70 bg-white/80 p-3;
    display: grid;
    gap: 8px;
    min-height: 150px;
    opacity: 0.75;
    transition:
      border-color 180ms ease,
      box-shadow 180ms ease,
      transform 180ms ease,
      opacity 180ms ease;
    background-color: rgb(var(--surface) / 0.85);
    border-color: rgb(var(--stroke) / 0.7);
  }

  .react-binary-panel-title {
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .react-binary-demo[data-stage="react"]
    .react-binary-panel[data-panel="react"] {
    border-color: rgb(var(--accent) / 0.5);
    background: linear-gradient(
      135deg,
      rgb(var(--accent) / 0.08),
      rgb(var(--surface) / 0.95)
    );
    box-shadow: 0 14px 26px rgba(249, 115, 22, 0.16);
    opacity: 1;
    transform: translateY(-2px);
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-panel[data-panel="binary"] {
    border-color: rgb(var(--accent) / 0.55);
    background: linear-gradient(
      135deg,
      rgb(var(--accent) / 0.1),
      rgb(var(--surface) / 0.95)
    );
    box-shadow: 0 14px 26px rgba(249, 115, 22, 0.2);
    opacity: 1;
    transform: translateY(-2px);
  }

  .react-binary-demo[data-stage="qwik"] .react-binary-panel[data-panel="qwik"] {
    border-color: rgb(var(--signal) / 0.55);
    background: linear-gradient(
      135deg,
      rgb(var(--signal) / 0.12),
      rgb(var(--surface) / 0.95)
    );
    box-shadow: 0 14px 26px rgba(20, 184, 166, 0.18);
    opacity: 1;
    transform: translateY(-2px);
  }

  .react-binary-demo[data-stage="binary"] .react-binary-connector::before {
    background: rgb(var(--accent) / 0.6);
  }

  .react-binary-demo[data-stage="binary"] .react-binary-connector::after {
    border-color: rgb(var(--accent) / 0.6);
  }

  .react-binary-node-tree {
    display: grid;
    gap: 6px;
  }

  .react-binary-node {
    @apply inline-flex items-center gap-2 bg-white px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-600 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    width: fit-content;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted));
  }

  .react-binary-node::before {
    content: "";
    width: 6px;
    height: 6px;
    border-radius: 9999px;
    background: rgb(var(--accent) / 0.6);
    box-shadow: 0 0 8px rgba(249, 115, 22, 0.35);
  }

  .react-binary-node.is-child {
    margin-left: 14px;
  }

  .react-binary-bits {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(44px, 1fr));
    gap: 6px;
    font-family: var(--font-mono);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.25em;
    color: rgb(var(--muted));
  }

  .react-binary-bits span {
    @apply bg-slate-100 px-2 py-1 rounded-lg text-center;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    background-color: rgb(var(--surface-soft));
    border: 1px solid rgb(var(--stroke) / 0.7);
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"] {
    color: rgb(var(--accent-strong));
    background: rgb(var(--accent) / 0.12);
    border-color: rgb(var(--accent) / 0.25);
    animation: binary-flash 1.6s ease-in-out infinite;
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"]:nth-child(2) {
    animation-delay: 0.15s;
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"]:nth-child(3) {
    animation-delay: 0.3s;
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"]:nth-child(4) {
    animation-delay: 0.45s;
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"]:nth-child(5) {
    animation-delay: 0.6s;
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"]:nth-child(6) {
    animation-delay: 0.75s;
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"]:nth-child(7) {
    animation-delay: 0.9s;
  }

  .react-binary-demo[data-stage="binary"]
    .react-binary-bits
    span[data-anim="true"]:nth-child(8) {
    animation-delay: 1.05s;
  }

  .react-binary-dom {
    @apply flex flex-wrap gap-2;
    font-family: var(--font-mono);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.25em;
    color: rgb(var(--muted));
  }

  .react-binary-dom span {
    @apply bg-white px-2 py-1 border border-slate-200 rounded-full;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
  }

  .react-binary-caption {
    @apply text-slate-500 text-xs;
    color: rgb(var(--muted-soft));
  }

  .react-binary-footer {
    @apply flex flex-wrap gap-2;
  }

  .react-binary-chip {
    @apply inline-flex items-center gap-2 bg-white px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  @media (max-width: 720px) {
    .react-binary-track {
      grid-template-columns: 1fr;
    }

    .react-binary-connector {
      display: none;
    }

    .react-binary-panel {
      min-height: 0;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .react-binary-demo [data-anim="true"] {
      animation: none;
    }
  }

  @keyframes wasm-pulse {
    0% {
      opacity: 0;
      transform: scale(0.92);
    }
    35% {
      opacity: 0.8;
      transform: scale(1);
    }
    100% {
      opacity: 0;
      transform: scale(1.08);
    }
  }

  .wasm-demo {
    @apply mt-4 rounded-2xl border border-slate-200/70 bg-white/70 p-4;
    display: grid;
    gap: 12px;
    background-color: rgb(var(--surface) / 0.75);
    border-color: rgb(var(--stroke) / 0.7);
  }

  .wasm-demo-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
  }

  .wasm-demo-title {
    @apply font-mono text-[11px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .wasm-demo-action {
    @apply inline-flex items-center gap-2 rounded-full border border-teal-200/80 bg-teal-50 px-4 py-2;
    @apply font-mono text-[10px] text-teal-700 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    box-shadow: 0 12px 20px rgba(20, 184, 166, 0.2);
    transition:
      transform 160ms ease,
      box-shadow 160ms ease,
      background-color 160ms ease;
    background-color: rgb(var(--signal) / 0.12);
    border-color: rgb(var(--signal) / 0.28);
    color: rgb(var(--signal-strong));
  }

  .wasm-demo-action:hover {
    background: rgb(var(--surface));
    box-shadow: 0 16px 26px rgba(20, 184, 166, 0.24);
    transform: translateY(-1px);
  }

  .wasm-demo-action:focus-visible {
    outline: 2px solid rgb(var(--signal));
    outline-offset: 2px;
  }

  .wasm-demo-subtitle {
    @apply text-slate-600 text-sm leading-6;
    color: rgb(var(--muted));
  }

  .wasm-demo-grid {
    display: grid;
    gap: 10px;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }

  .wasm-demo-panel {
    @apply rounded-2xl border border-slate-200/70 bg-white/80 p-3;
    display: grid;
    gap: 8px;
    min-height: 150px;
    background-color: rgb(var(--surface) / 0.85);
    border-color: rgb(var(--stroke) / 0.7);
  }

  .wasm-demo-panel-title {
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    color: rgb(var(--muted-soft));
  }

  .wasm-demo-input {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    justify-self: center;
  }

  .wasm-demo-label {
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    min-width: 18px;
    color: rgb(var(--muted-soft));
  }

  .wasm-demo-step {
    @apply inline-flex justify-center items-center bg-white px-2 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-600 uppercase tracking-[0.35em];
    width: 28px;
    height: 28px;
    line-height: 1;
    letter-spacing: 0;
    transition:
      border-color 160ms ease,
      color 160ms ease,
      transform 160ms ease;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted));
  }

  .wasm-demo-step:hover {
    @apply border-teal-200 text-teal-700;
    transform: translateY(-1px);
    border-color: rgb(var(--signal) / 0.3);
    color: rgb(var(--signal-strong));
  }

  .wasm-demo-value {
    @apply bg-slate-50 px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[11px] text-slate-700 uppercase tracking-[0.35em];
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    min-width: 64px;
    text-align: center;
    background-color: rgb(var(--surface-soft));
    border-color: rgb(var(--stroke));
    color: rgb(var(--ink-soft));
  }

  .wasm-demo-core {
    @apply rounded-2xl border border-teal-200/60 bg-teal-50/70 p-3;
    position: relative;
    text-align: center;
    background-color: rgb(var(--signal) / 0.12);
    border-color: rgb(var(--signal) / 0.3);
  }

  .wasm-demo-core::after {
    content: "";
    position: absolute;
    inset: 10%;
    border-radius: 9999px;
    border: 1px solid rgb(var(--signal) / 0.35);
    opacity: 0;
  }

  .wasm-demo-core.is-active::after {
    animation: wasm-pulse 1s ease;
  }

  .wasm-demo-core-value {
    @apply font-semibold text-slate-900 text-lg;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    color: rgb(var(--ink));
  }

  .wasm-demo-core-hash {
    @apply mt-1 font-mono text-[10px] text-teal-700 uppercase tracking-[0.35em];
    color: rgb(var(--signal-strong));
  }

  .wasm-demo-bits {
    @apply bg-slate-50 px-3 py-2 rounded-xl text-center;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    font-family: var(--font-mono);
    font-size: 10px;
    letter-spacing: 0.3em;
    color: rgb(var(--muted));
    background-color: rgb(var(--surface-soft));
  }

  .wasm-demo-metrics {
    display: grid;
    gap: 8px;
  }

  .wasm-demo-metric {
    @apply rounded-2xl border border-slate-200/70 bg-slate-50 px-3 py-2;
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    background-color: rgb(var(--surface-soft));
    border-color: rgb(var(--stroke) / 0.7);
    color: rgb(var(--muted-soft));
  }

  .wasm-demo-metric strong {
    @apply block mt-1 font-semibold text-slate-900 text-base;
    color: rgb(var(--ink));
  }

  .wasm-demo-bar {
    @apply h-2 rounded-full bg-slate-200/70;
    overflow: hidden;
    background-color: rgb(var(--skeleton-base) / 0.7);
  }

  .wasm-demo-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, rgb(var(--signal)), rgb(var(--accent)));
    transition: width 200ms ease;
  }

  .wasm-demo-history {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .wasm-demo-history span {
    @apply bg-white px-2 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  .wasm-demo-note {
    @apply text-slate-500 text-xs;
    color: rgb(var(--muted-soft));
  }

  .wasm-demo-footer {
    @apply flex flex-wrap gap-2;
  }

  .wasm-demo-chip {
    @apply inline-flex items-center gap-2 bg-white px-3 py-1 border border-slate-200 rounded-full;
    @apply font-mono text-[10px] text-slate-500 uppercase tracking-[0.35em];
    justify-content: center;
    line-height: 1;
    background-color: rgb(var(--surface));
    border-color: rgb(var(--stroke));
    color: rgb(var(--muted-soft));
  }

  @media (prefers-reduced-motion: reduce) {
    .wasm-demo-core.is-active::after {
      animation: none;
    }
  }
}
