@layer components {
  html:not([data-motion-ready="true"]) [data-motion] {
    opacity: 1;
    transform: none;
    animation: none;
  }

  html[data-motion-ready="true"] [data-motion][data-motion-state="out"] {
    opacity: 0;
    transform: translateY(var(--motion-distance));
    will-change: transform, opacity;
  }

  html[data-motion-ready="true"] [data-motion][data-motion-state="in"] {
    opacity: 1;
    transform: translateY(0);
    will-change: transform, opacity;
  }

  @media (prefers-reduced-motion: reduce) {
    html[data-motion-ready="true"] [data-motion][data-motion-state="out"],
    html[data-motion-ready="true"] [data-motion][data-motion-state="in"] {
      opacity: 1;
      transform: none;
      will-change: auto;
    }
  }

  @supports (view-transition-name: root) {
    [data-view-transition="shell-header"] {
      view-transition-name: shell-header;
    }

    [data-view-transition="shell-main"] {
      view-transition-name: shell-main;
    }

    .dock-shell {
      view-transition-name: dock-shell;
    }

    .viewport-fade {
      view-transition-name: viewport-fade;
    }

    :root[data-theme-direction] [data-view-transition] {
      view-transition-name: none !important;
    }

    :root[data-theme-direction] .dock-shell,
    :root[data-theme-direction] .viewport-fade {
      view-transition-name: none !important;
    }

    ::view-transition-old(shell-header),
    ::view-transition-new(shell-header) {
      animation-duration: var(--view-transition-duration);
      animation-timing-function: var(--view-transition-ease);
    }

    ::view-transition-old(shell-main),
    ::view-transition-new(shell-main) {
      animation-duration: var(--view-transition-duration-long);
      animation-timing-function: var(--view-transition-ease);
      animation-fill-mode: both;
    }

    ::view-transition-old(shell-main) {
      animation-name: slide-out-left;
    }

    ::view-transition-new(shell-main) {
      animation-name: slide-in-right;
    }

    :root[data-nav-direction="back"]::view-transition-old(shell-main) {
      animation-name: slide-out-right;
    }

    :root[data-nav-direction="back"]::view-transition-new(shell-main) {
      animation-name: slide-in-left;
    }

    :root[data-lang-transition="ui"] .layout-shell {
      view-transition-name: lang-ui;
    }

    :root[data-lang-transition="ui"] [data-view-transition],
    :root[data-lang-transition="ui"] .fragment-grid {
      view-transition-name: none !important;
    }

    :root[data-lang-transition="fragments"] .fragment-grid[data-fragment-grid="main"] {
      view-transition-name: lang-fragments;
    }

    :root[data-lang-transition="fragments"] .fragment-grid:not([data-fragment-grid="main"]) {
      view-transition-name: none !important;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    @supports (view-transition-name: root) {
      [data-view-transition] {
        view-transition-name: none !important;
      }

      .dock-shell,
      .viewport-fade {
        view-transition-name: none !important;
      }

      ::view-transition-old(shell-header),
      ::view-transition-new(shell-header),
      ::view-transition-old(shell-main),
      ::view-transition-new(shell-main) {
        animation-duration: 0.001ms !important;
        animation-delay: 0s !important;
      }
    }
  }
}
